{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2016-12-15T17:57:41.845522+00:00",
    "comment_count": 2,
    "description": "In curvilinear coordinate systems we have been relying on an approximation for computing `cell_volume` which takes the form of the integral for the volume computation and uses the cell widths as the differentials, e.g. the volume in spherical coordinates was `r**2*dr*sin(theta)*dtheta*dphi`. \r\n\r\nWe can't always assume that the cell sizes are going to be small enough for this to be sufficiently accurate, and we can compute the integral analytically for cylindrical, geographic, and spherical coordinate systems, so this PR changes the `cell_volume` computation to explicitly use these integrated forms. \r\n\r\nProbably needs a new test. \r\n\r\nUPDATE: Tightened up the allowed error on the spherical volume tests",
    "created_on": "2016-12-08T17:22:31.689132+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/ad6d4f04b990"
            }
        },
        "hash": "ad6d4f04b990"
    },
    "title": "Do exact cell volume computation for curvilinear coordinates",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2466"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "id": 2466,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/jzuhone"
            },
            "html": {
                "href": "https://bitbucket.org/jzuhone/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/jzuhone/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "John ZuHone",
        "uuid": "{0c51edfa-e317-432f-bbef-7401c6e2aa8a}",
        "username": "jzuhone"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/jzuhone/yt/commit/28435a74837b"
                }
            },
            "hash": "28435a74837b"
        },
        "repository": {
            "full_name": "jzuhone/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/jzuhone/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/jzuhone/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/jzuhone/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{aa71d2fb-24c5-4e74-8701-f32955348acf}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/208722c07b45"
                }
            },
            "hash": "208722c07b45"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matt Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466/comments/28048970"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2466/_/diff#comment-28048970"
                }
            },
            "pullrequest": {
                "title": "Do exact cell volume computation for curvilinear coordinates",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2466"
                    }
                },
                "id": 2466
            },
            "content": {
                "raw": "With `fake_amr_ds` and `geometry = \"spherical\"` do you see a big difference in the results of summing cell volume?",
                "html": "<p>With <code>fake_amr_ds</code> and <code>geometry = \"spherical\"</code> do you see a big difference in the results of summing cell volume?</p>",
                "markup": "markdown"
            },
            "created_on": "2016-12-08T17:23:43.140261+00:00",
            "updated_on": "2016-12-08T17:23:43.142222+00:00",
            "id": 28048970
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/jzuhone"
                    },
                    "html": {
                        "href": "https://bitbucket.org/jzuhone/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/jzuhone/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "John ZuHone",
                "uuid": "{0c51edfa-e317-432f-bbef-7401c6e2aa8a}",
                "username": "jzuhone"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466/comments/28049053"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2466/_/diff#comment-28049053"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466/comments/28048970"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2466/_/diff#comment-28048970"
                    }
                },
                "id": 28048970
            },
            "pullrequest": {
                "title": "Do exact cell volume computation for curvilinear coordinates",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2466"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2466"
                    }
                },
                "id": 2466
            },
            "content": {
                "raw": "I've been testing on an Athena++ dataset--but I will try making a test dataset which could be potentially pathological using the old way.",
                "html": "<p>I've been testing on an Athena++ dataset--but I will try making a test dataset which could be potentially pathological using the old way.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-12-08T17:24:52.429060+00:00",
            "updated_on": "2016-12-08T17:24:52.435804+00:00",
            "id": 28049053
        }
    ]
}