{
    "links": {
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/986/decline"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/986/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/986"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/986/activity"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/986"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/986/commits"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/986/merge"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/986/statuses"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/986/comments"
        },
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/986/diff"
        }
    },
    "task_count": 0,
    "source": {
        "repository": {
            "full_name": "hegan/yt",
            "uuid": "{8166f89d-6aca-4979-8cad-7dd933c97630}",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/hegan/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/hegan/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/hegan/yt/avatar/32/"
                }
            },
            "name": "yt"
        },
        "commit": {
            "hash": "a84b70b77e07",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/hegan/yt/commit/a84b70b77e07"
                }
            }
        },
        "branch": {
            "name": "yt-3.0"
        }
    },
    "closed_by": {
        "username": "ngoldbaum",
        "type": "user",
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}"
    },
    "title": "Make annotate particles work with ptype",
    "id": 986,
    "comment_count": 2,
    "created_on": "2014-06-30T17:59:04.314364+00:00",
    "merge_commit": {
        "hash": "57ecc4cbdf24",
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/57ecc4cbdf24"
            }
        }
    },
    "comments": [
        {
            "content": {
                "markup": "markdown",
                "raw": "This is a good change going forward - all the deleted code are enzo-isms.\n\nWhile this does make the workflow a bit harder for certain classes of enzo users, I think that's not a big deal given how straightforward it is to create a particle filter or union at runtime.",
                "html": "<p>This is a good change going forward - all the deleted code are enzo-isms.</p>\n<p>While this does make the workflow a bit harder for certain classes of enzo users, I think that's not a big deal given how straightforward it is to create a particle filter or union at runtime.</p>"
            },
            "user": {
                "username": "ngoldbaum",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}"
            },
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/986/comments/2272396"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/986/_/diff#comment-2272396"
                }
            },
            "created_on": "2014-06-30T18:02:58.000149+00:00",
            "updated_on": "2014-06-30T18:02:58.009511+00:00",
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/986"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/986"
                    }
                },
                "title": "Make annotate particles work with ptype",
                "id": 986
            },
            "type": "pullrequest_comment",
            "id": 2272396
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>"
            },
            "user": {
                "username": "yt-fido",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}"
            },
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/986/comments/2272753"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/986/_/diff#comment-2272753"
                }
            },
            "created_on": "2014-06-30T18:41:36.340694+00:00",
            "updated_on": "2014-06-30T18:41:36.455218+00:00",
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/986"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/986"
                    }
                },
                "title": "Make annotate particles work with ptype",
                "id": 986
            },
            "type": "pullrequest_comment",
            "id": 2272753
        }
    ],
    "reason": "",
    "type": "pullrequest",
    "close_source_branch": false,
    "state": "MERGED",
    "description": "The annotate_particles callback currently only works completely with certain enzo datasets. Specifically those that are written out with a field 'particle_type'. Enzo datasets that use the active particle infrastructure do not have this field, nor would any other type of dataset necessarily have this field (... I think).\r\n\r\nCurrently the annotate_particle callback checks this field to determine which particles to plot. I changed the annotate_particles callback to instead query region[ptype, field] as is consistent with the rest of yt. The default behaviour is preserved by having the default value of ptype be 'all'. \r\n\r\nI also removed the stars_only and dm_only kwargs as they are sort of redundant now, although this does require the user to define their own particle type outside of the callback. I'm not sure this is an improvement or not, so I could certainly put them back in; they just seemed to fall under the category of an 'enzo-ism'.\r\n\r\nHere is a script that demonstrates the failed behaviour. You'll need to supply your own dataset and particle type I suppose, as I don't think there are any active particle datasets on the hub: http://paste.yt-project.org/show/4864/\r\n\r\nHere is the resulting error: http://paste.yt-project.org/show/4863/",
    "author": {
        "username": "hegan",
        "type": "user",
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/hegan"
            },
            "html": {
                "href": "https://bitbucket.org/hegan/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/hegan/avatar/32/"
            }
        },
        "display_name": "Hilary Egan",
        "uuid": "{56ad7d6a-d009-4fc5-ad4f-2c4a93fb844f}"
    },
    "updated_on": "2014-07-02T07:27:36.750629+00:00",
    "destination": {
        "repository": {
            "full_name": "yt_analysis/yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt"
        },
        "commit": {
            "hash": "5403193d8a46",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/5403193d8a46"
                }
            }
        },
        "branch": {
            "name": "yt-3.0"
        }
    }
}