{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2016-04-14T16:49:27.606946+00:00",
    "comment_count": 6,
    "description": "This rather messy PR enables yt to compile with both Python 2.7 and 3.5 on Windows. \r\n\r\nA basic rundown of what needed to be done:\r\n\r\n1. Don't link against the math library ``-lm`` if we're building with MSVC--it's not necessary. \r\n2. For Python 2.7, code must be C89-compatible--we can't mix up variable declarations and other statements.\r\n3. Must define a number of math and search functions that MSVC doesn't know about\r\n\r\nI've set this up such that if you're compiling on any other platform things should remain the same as before. Unfortunately, this likely means that we cannot compile with mingw anymore on Windows, but I have not tried and it's not likely development for that compiler is going to continue at a steady pace (for example, there is currently no way to compile C with Python 3.5 using mingw and it doesn't look like there will be a way anytime soon).",
    "created_on": "2016-04-09T02:59:30.796237+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/d8eec89b2c86f300ce9cfb0205b97cefb5dd0c45"
            }
        },
        "hash": "d8eec89b2c86f300ce9cfb0205b97cefb5dd0c45"
    },
    "title": "Make yt compile with MSVC on Windows",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2125"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "id": 2125,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/jzuhone"
            },
            "html": {
                "href": "https://bitbucket.org/jzuhone/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/jzuhone/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "John ZuHone",
        "uuid": "{0c51edfa-e317-432f-bbef-7401c6e2aa8a}",
        "username": "jzuhone"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/jzuhone/yt/commit/d8eec89b2c86"
                }
            },
            "hash": "d8eec89b2c86"
        },
        "repository": {
            "full_name": "jzuhone/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/jzuhone/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/jzuhone/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/jzuhone/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{aa71d2fb-24c5-4e74-8701-f32955348acf}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/346c6d008512"
                }
            },
            "hash": "346c6d008512"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/comments/17007422"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2125/_/diff#comment-17007422"
                }
            },
            "pullrequest": {
                "title": "Make yt compile with MSVC on Windows",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2125"
                    }
                },
                "id": 2125
            },
            "content": {
                "raw": "All tests pass. Good job! https://tests.yt-project.org/job/yt_testsuite/308/",
                "html": "<p>All tests pass. Good job! <a href=\"https://tests.yt-project.org/job/yt_testsuite/308/\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_testsuite/308/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2016-04-09T03:43:48.264627+00:00",
            "updated_on": "2016-04-09T03:43:48.349901+00:00",
            "id": 17007422
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/comments/17007558"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2125/_/diff#comment-17007558"
                }
            },
            "pullrequest": {
                "title": "Make yt compile with MSVC on Windows",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2125"
                    }
                },
                "id": 2125
            },
            "content": {
                "raw": "All tests pass. Good job! https://tests.yt-project.org/job/yt_testsuite/309/",
                "html": "<p>All tests pass. Good job! <a href=\"https://tests.yt-project.org/job/yt_testsuite/309/\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_testsuite/309/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2016-04-09T04:28:35.242851+00:00",
            "updated_on": "2016-04-09T04:28:35.313719+00:00",
            "id": 17007558
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/comments/17067024"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2125/_/diff#comment-17067024"
                }
            },
            "pullrequest": {
                "title": "Make yt compile with MSVC on Windows",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2125"
                    }
                },
                "id": 2125
            },
            "content": {
                "raw": "I see four test failures under Python 2.7 on Windows 10, compiled using MSVC on this patch:\n\nhttp://paste.yt-project.org/show/6414\n\nAll four failures are for the `test_grid_arrays_view` test, which tests functionality that is only actually being used for that test. In general we should work to fix this issue on Windows (particularly if @MatthewTurk is planning on expanding the `GridTree` functionality he added), but for now we can probably mark these as known failures on Windows?\n\nI haven't tested on Python 3.5.\n\nI think this is ok to go in, but it would be nice if we could set up Windows testing (maybe just the unit tests?), either before tagging releases or using CI.",
                "html": "<p>I see four test failures under Python 2.7 on Windows 10, compiled using MSVC on this patch:</p>\n<p><a href=\"http://paste.yt-project.org/show/6414\" rel=\"nofollow\">http://paste.yt-project.org/show/6414</a></p>\n<p>All four failures are for the <code>test_grid_arrays_view</code> test, which tests functionality that is only actually being used for that test. In general we should work to fix this issue on Windows (particularly if <a href=\"/MatthewTurk/\" rel=\"nofollow\" title=\"@MatthewTurk\" class=\"mention\">Matthew Turk</a> is planning on expanding the <code>GridTree</code> functionality he added), but for now we can probably mark these as known failures on Windows?</p>\n<p>I haven't tested on Python 3.5.</p>\n<p>I think this is ok to go in, but it would be nice if we could set up Windows testing (maybe just the unit tests?), either before tagging releases or using CI.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-04-11T19:57:02.953869+00:00",
            "updated_on": "2016-04-11T19:57:03.033337+00:00",
            "id": 17067024
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/comments/17193931"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/jzuhone/yt:75b415321e1a..346c6d008512?path=setup.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2125/_/diff#comment-17193931"
                }
            },
            "pullrequest": {
                "title": "Make yt compile with MSVC on Windows",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2125"
                    }
                },
                "id": 2125
            },
            "content": {
                "raw": "Can we change the variable to something like, `standard_libs` or `math_libs` or something?",
                "html": "<p>Can we change the variable to something like, <code>standard_libs</code> or <code>math_libs</code> or something?</p>",
                "markup": "markdown"
            },
            "created_on": "2016-04-13T17:55:58.441865+00:00",
            "updated_on": "2016-04-13T17:55:58.447359+00:00",
            "inline": {
                "from": null,
                "path": "setup.py",
                "to": 48
            },
            "id": 17193931
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/comments/17196854"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2125/_/diff#comment-17196854"
                }
            },
            "pullrequest": {
                "title": "Make yt compile with MSVC on Windows",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2125"
                    }
                },
                "id": 2125
            },
            "content": {
                "raw": "All tests pass. Good job! https://tests.yt-project.org/job/yt_testsuite/313/",
                "html": "<p>All tests pass. Good job! <a href=\"https://tests.yt-project.org/job/yt_testsuite/313/\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_testsuite/313/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2016-04-13T18:52:51.618098+00:00",
            "updated_on": "2016-04-13T18:52:51.820252+00:00",
            "id": 17196854
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125/comments/17254874"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2125/_/diff#comment-17254874"
                }
            },
            "pullrequest": {
                "title": "Make yt compile with MSVC on Windows",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2125"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2125"
                    }
                },
                "id": 2125
            },
            "content": {
                "raw": "All tests pass. Good job! https://tests.yt-project.org/job/yt_testsuite/316/",
                "html": "<p>All tests pass. Good job! <a href=\"https://tests.yt-project.org/job/yt_testsuite/316/\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_testsuite/316/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2016-04-14T16:40:08.845602+00:00",
            "updated_on": "2016-04-14T16:40:08.913294+00:00",
            "id": 17254874
        }
    ]
}