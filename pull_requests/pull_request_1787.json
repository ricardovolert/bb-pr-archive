{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2015-10-22T09:34:46.994772+00:00",
    "comment_count": 13,
    "description": "Right now several things are wrong in the way the tipsy frontend handles cosmological datasets.\r\n\r\n1. If the hubble constant *doesn't* come from a gasoline or pkdgrav parameter file, it was being incorrectly scaled.\r\n\r\n2. If there wasn't a parameter file available, we weren't correctly identifying the dataset as comoving (even though `ds.cosmological_simulation` was set to `). This had the unintended side effect of making ds.domain_left_edge and ds.domain_right_edge incorrect, since the dataset was recognized as non-cosmological with no bounding box, so the bbox is inferred by looking at the particle positions and adding some padding.  This is badly wrong is cosmological datasets, since the box size sets the length units.\r\n\r\n3. The tests were using `unit_base` incorrectly and were reading in the test datasets with the wrong length units.\r\n\r\nThese issues should not all be fixed.\r\n\r\nI used the following test script to debug this:\r\n\r\n```\r\nimport yt\r\n\r\ncosmology_parameters = dict(current_redshift = 0.0,\r\n                            omega_lambda = 0.728,\r\n                            omega_matter = 0.272,\r\n                            hubble_constant = 0.702)\r\n\r\nkwargs = dict(cosmology_parameters = cosmology_parameters,\r\n              unit_base = {'length': (60.0, \"Mpccm/h\")},\r\n              n_ref = 64)\r\n\r\nds = yt.load(\"agora_1e11.00400/agora_1e11.00400\", **kwargs)\r\n```\r\n\r\nThe easier way to work with this script is to run it in IPython with the `%run` magic and then inspect e.g. `ds.hubble_constant`, `ds.comoving`, `ds.domain_left_edge`, and `ds.domain_width`.\r\n\r\nThe answers will need to be regenerated before this is merged in.",
    "created_on": "2015-10-06T04:36:16.171264+00:00",
    "task_count": 1,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/a5d76f647fbb"
            }
        },
        "hash": "a5d76f647fbb"
    },
    "title": "Tipsy cosmology unit fixes",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
            },
            "html": {
                "href": "https://bitbucket.org/brittonsmith/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Britton Smith",
        "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
        "username": "brittonsmith"
    },
    "id": 1787,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt/commit/85d2a0080323"
                }
            },
            "hash": "85d2a0080323"
        },
        "repository": {
            "full_name": "ngoldbaum/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/ngoldbaum/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/ngoldbaum/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{cb18d7d9-ab77-4e80-81ed-8d32a945e0ef}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/d77e881944f8"
                }
            },
            "hash": "d77e881944f8"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10524978"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10524978"
                }
            },
            "pullrequest": {
                "title": "Tipsy cosmology unit fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
                    }
                },
                "id": 1787
            },
            "content": {
                "raw": "Something went wrong, you should checkout http://tests.yt-project.org/job/yt_testsuite_dev/639/",
                "html": "<p>Something went wrong, you should checkout <a href=\"http://tests.yt-project.org/job/yt_testsuite_dev/639/\" rel=\"nofollow\">http://tests.yt-project.org/job/yt_testsuite_dev/639/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2015-10-06T05:49:58.001654+00:00",
            "updated_on": "2015-10-06T05:49:58.071034+00:00",
            "id": 10524978
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10527117"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10527117"
                }
            },
            "pullrequest": {
                "title": "Tipsy cosmology unit fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
                    }
                },
                "id": 1787
            },
            "content": {
                "raw": "Something went wrong, you should checkout http://tests.yt-project.org/job/yt_testsuite_dev/640/",
                "html": "<p>Something went wrong, you should checkout <a href=\"http://tests.yt-project.org/job/yt_testsuite_dev/640/\" rel=\"nofollow\">http://tests.yt-project.org/job/yt_testsuite_dev/640/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2015-10-06T07:26:13.290962+00:00",
            "updated_on": "2015-10-06T07:26:13.448539+00:00",
            "id": 10527117
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10543707"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10543707"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10527117"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10527117"
                    }
                },
                "id": 10527117
            },
            "pullrequest": {
                "title": "Tipsy cosmology unit fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
                    }
                },
                "id": 1787
            },
            "content": {
                "raw": "These failures are expected given the changes in the PR. Answers will need to be regenerated.",
                "html": "<p>These failures are expected given the changes in the PR. Answers will need to be regenerated.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-10-06T14:06:46.341137+00:00",
            "updated_on": "2015-10-06T14:06:46.344219+00:00",
            "id": 10543707
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10725301"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:a962b8bc8d9c..ca754f897f2f?path=yt%2Ffrontends%2Ftipsy%2Fdata_structures.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10725301"
                }
            },
            "pullrequest": {
                "title": "Tipsy cosmology unit fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
                    }
                },
                "id": 1787
            },
            "content": {
                "raw": "This should be a check against `self.cosmological_simulation` rather than self.comoving, since `comoving` is a tipsy-specific thing.  We should also probably deprecate `comoving`.",
                "html": "<p>This should be a check against <code>self.cosmological_simulation</code> rather than self.comoving, since <code>comoving</code> is a tipsy-specific thing.  We should also probably deprecate <code>comoving</code>.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-10-12T18:52:07.458141+00:00",
            "updated_on": "2015-10-12T18:52:07.460676+00:00",
            "inline": {
                "from": null,
                "path": "yt/frontends/tipsy/data_structures.py",
                "to": 192
            },
            "id": 10725301
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
                    },
                    "html": {
                        "href": "https://bitbucket.org/brittonsmith/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Britton Smith",
                "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
                "username": "brittonsmith"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10847260"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10847260"
                }
            },
            "pullrequest": {
                "title": "Tipsy cosmology unit fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
                    }
                },
                "id": 1787
            },
            "content": {
                "raw": "Hi @ngoldbaum, I've looked this over and your changes seem correct.  However, I have found one additional issue.  Currently, the mass units default to mass_unit = 1 Msun, but if I take the sum of the particle masses for the whole dataset, I end up with a value of 0.272 code_mass, which ends up being 0.272 Msun.  Conveniently, 0.272 is the value of omega_matter for this dataset.  Therefore, it seems to me that when the dataset is cosmological and the ``dMsolUnit`` key is missing from the parameters dict, the particle masses are in units of the (critical density x domain volume), or possibly the (critical density at z = 0 x domain volume).  So, in ``_set_code_unit_attributes``, there needs to be something like:\n\n```\n#!python\n\nif \"dMsolUnit\" not in ds.parameters:\n    self.mass_unit = cosmo.critical_density(0.0) * ds.domain_width.prod()\n```\n\nUnfortunately, because the one test dataset we have is at z = 0, there is the unfortunate degeneracy caused by the comoving and proper frame being equal.  Would it be possible to obtain another dataset from this run at z > 0 to verify that the above is correct all the time?  It would also be valuable in verifying the rest of this PR.",
                "html": "<p>Hi <a href=\"/ngoldbaum/\" rel=\"nofollow\" title=\"@ngoldbaum\" class=\"mention\">Nathan Goldbaum</a>, I've looked this over and your changes seem correct.  However, I have found one additional issue.  Currently, the mass units default to mass_unit = 1 Msun, but if I take the sum of the particle masses for the whole dataset, I end up with a value of 0.272 code_mass, which ends up being 0.272 Msun.  Conveniently, 0.272 is the value of omega_matter for this dataset.  Therefore, it seems to me that when the dataset is cosmological and the <code>dMsolUnit</code> key is missing from the parameters dict, the particle masses are in units of the (critical density x domain volume), or possibly the (critical density at z = 0 x domain volume).  So, in <code>_set_code_unit_attributes</code>, there needs to be something like:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"k\">if</span> <span class=\"s2\">&quot;dMsolUnit&quot;</span> <span class=\"ow\">not</span> <span class=\"ow\">in</span> <span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">parameters</span><span class=\"p\">:</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">mass_unit</span> <span class=\"o\">=</span> <span class=\"n\">cosmo</span><span class=\"o\">.</span><span class=\"n\">critical_density</span><span class=\"p\">(</span><span class=\"mf\">0.0</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">domain_width</span><span class=\"o\">.</span><span class=\"n\">prod</span><span class=\"p\">()</span>\n</pre></div>\n\n\n<p>Unfortunately, because the one test dataset we have is at z = 0, there is the unfortunate degeneracy caused by the comoving and proper frame being equal.  Would it be possible to obtain another dataset from this run at z &gt; 0 to verify that the above is correct all the time?  It would also be valuable in verifying the rest of this PR.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-10-15T15:32:03.180092+00:00",
            "updated_on": "2015-10-15T15:32:03.194386+00:00",
            "id": 10847260
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10847567"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10847567"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10847260"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10847260"
                    }
                },
                "id": 10847260
            },
            "pullrequest": {
                "title": "Tipsy cosmology unit fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
                    }
                },
                "id": 1787
            },
            "content": {
                "raw": "Thank you for the detailed checking and thoughtful comment!\n\nI have an output from z=3 I can share offline.",
                "html": "<p>Thank you for the detailed checking and thoughtful comment!</p>\n<p>I have an output from z=3 I can share offline.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-10-15T15:38:49.692128+00:00",
            "updated_on": "2015-10-15T15:38:49.694435+00:00",
            "id": 10847567
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10888204"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10888204"
                }
            },
            "pullrequest": {
                "title": "Tipsy cosmology unit fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
                    }
                },
                "id": 1787
            },
            "content": {
                "raw": "@brittonsmith fixed a few lingering issues that I left behind. I think the Tipsy cosmology units situation should be substantially improved with this pull request.\n\nThat said, I'd *really* like to hear from a Tipsy expert (@bwkeller ?) to check if what we're doing here is correct and to play around with some real data.",
                "html": "<p><a href=\"/brittonsmith/\" rel=\"nofollow\" title=\"@brittonsmith\" class=\"mention\">Britton Smith</a> fixed a few lingering issues that I left behind. I think the Tipsy cosmology units situation should be substantially improved with this pull request.</p>\n<p>That said, I'd <em>really</em> like to hear from a Tipsy expert (<a href=\"/bwkeller/\" rel=\"nofollow\" title=\"@bwkeller\" class=\"mention\">Ben Keller</a> ?) to check if what we're doing here is correct and to play around with some real data.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-10-16T16:58:31.637550+00:00",
            "updated_on": "2015-10-16T16:58:31.647120+00:00",
            "id": 10888204
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10888231"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:525e7a051959..d77e881944f8?path=yt%2Ffrontends%2Ftipsy%2Fdata_structures.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10888231"
                }
            },
            "pullrequest": {
                "title": "Tipsy cosmology unit fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
                    }
                },
                "id": 1787
            },
            "content": {
                "raw": "This still needs to be checking `cosmological_simulation` and `comoving` should be deprecated.",
                "html": "<p>This still needs to be checking <code>cosmological_simulation</code> and <code>comoving</code> should be deprecated.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-10-16T16:59:09.501309+00:00",
            "updated_on": "2015-10-16T16:59:09.506145+00:00",
            "inline": {
                "from": null,
                "path": "yt/frontends/tipsy/data_structures.py",
                "to": 192
            },
            "id": 10888231
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10890903"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10890903"
                }
            },
            "pullrequest": {
                "title": "Tipsy cosmology unit fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
                    }
                },
                "id": 1787
            },
            "content": {
                "raw": "Something went wrong, you should checkout http://tests.yt-project.org/job/yt_testsuite_dev/707/",
                "html": "<p>Something went wrong, you should checkout <a href=\"http://tests.yt-project.org/job/yt_testsuite_dev/707/\" rel=\"nofollow\">http://tests.yt-project.org/job/yt_testsuite_dev/707/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2015-10-16T18:29:55.139737+00:00",
            "updated_on": "2015-10-16T18:29:55.197783+00:00",
            "id": 10890903
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/bwkeller"
                    },
                    "html": {
                        "href": "https://bitbucket.org/bwkeller/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/bwkeller/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Ben Keller",
                "uuid": "{1719424c-ccde-435f-aa44-5102314e6b2d}",
                "username": "bwkeller"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10892223"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10892223"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10888204"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10888204"
                    }
                },
                "id": 10888204
            },
            "pullrequest": {
                "title": "Tipsy cosmology unit fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
                    }
                },
                "id": 1787
            },
            "content": {
                "raw": "I'll take a look at this later today.",
                "html": "<p>I'll take a look at this later today.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-10-16T19:09:56.001741+00:00",
            "updated_on": "2015-10-16T19:09:56.006765+00:00",
            "id": 10892223
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/bwkeller"
                    },
                    "html": {
                        "href": "https://bitbucket.org/bwkeller/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/bwkeller/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Ben Keller",
                "uuid": "{1719424c-ccde-435f-aa44-5102314e6b2d}",
                "username": "bwkeller"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10989310"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10989310"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/10888204"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-10888204"
                    }
                },
                "id": 10888204
            },
            "pullrequest": {
                "title": "Tipsy cosmology unit fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
                    }
                },
                "id": 1787
            },
            "content": {
                "raw": "I just looked through the code, and loaded some cosmological and non-cosmological simulations.  The units and cosmological detection are all working as they should.  I'm going to approve this.",
                "html": "<p>I just looked through the code, and loaded some cosmological and non-cosmological simulations.  The units and cosmological detection are all working as they should.  I'm going to approve this.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-10-20T20:38:57.007964+00:00",
            "updated_on": "2015-10-20T20:38:57.011835+00:00",
            "id": 10989310
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/chummels"
                    },
                    "html": {
                        "href": "https://bitbucket.org/chummels/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/chummels/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Cameron Hummels",
                "uuid": "{de871bb8-32e9-450a-b8c9-2b49a1334f16}",
                "username": "chummels"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/11032769"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-11032769"
                }
            },
            "pullrequest": {
                "title": "Tipsy cosmology unit fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
                    }
                },
                "id": 1787
            },
            "content": {
                "raw": "I have tested this on the Tipsy dataset generated from an original Gadget dataset provided by @nmearl and @benopp .  With this PR, we now get reliable results from both ways of reading in the data, either the Tipsy data (while setting the `cosmology_parameters` and `unit_base` in the `load` command) or with the Gadget data.  Great work, @ngoldbaum !  I'd add tests for these, but the datasets are large and loading/projecting is time-consuming.  ",
                "html": "<p>I have tested this on the Tipsy dataset generated from an original Gadget dataset provided by <a href=\"/nmearl/\" rel=\"nofollow\" title=\"@nmearl\" class=\"mention\">Nicholas Earl</a> and <a href=\"/benopp/\" rel=\"nofollow\" title=\"@benopp\" class=\"mention\">Ben Oppenheimer</a> .  With this PR, we now get reliable results from both ways of reading in the data, either the Tipsy data (while setting the <code>cosmology_parameters</code> and <code>unit_base</code> in the <code>load</code> command) or with the Gadget data.  Great work, <a href=\"/ngoldbaum/\" rel=\"nofollow\" title=\"@ngoldbaum\" class=\"mention\">Nathan Goldbaum</a> !  I'd add tests for these, but the datasets are large and loading/projecting is time-consuming.  </p>",
                "markup": "markdown"
            },
            "created_on": "2015-10-21T21:53:34.053863+00:00",
            "updated_on": "2015-10-21T21:53:34.065325+00:00",
            "id": 11032769
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787/comments/11040279"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787/_/diff#comment-11040279"
                }
            },
            "pullrequest": {
                "title": "Tipsy cosmology unit fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1787"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1787"
                    }
                },
                "id": 1787
            },
            "content": {
                "raw": "Something went wrong, you should checkout http://tests.yt-project.org/job/yt_testsuite_dev/754/",
                "html": "<p>Something went wrong, you should checkout <a href=\"http://tests.yt-project.org/job/yt_testsuite_dev/754/\" rel=\"nofollow\">http://tests.yt-project.org/job/yt_testsuite_dev/754/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2015-10-22T07:03:24.610161+00:00",
            "updated_on": "2015-10-22T07:03:24.686075+00:00",
            "id": 11040279
        }
    ]
}