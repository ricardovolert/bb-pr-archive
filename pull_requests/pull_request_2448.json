{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2016-11-30T03:40:37.585126+00:00",
    "comment_count": 1,
    "description": "This consists of three commits. The first is unrelated but is necessary for one of the other commits so I've included it here. Let me know if I should PR it separately.\r\n\r\nThe issue reported in #1300 is due to a loss of floating point precision in the way we calculate the bin edges for log-scaled bin fields. The way we currently do it is effectively the same as taking the exponent of a logarithm, which leads to differences at the 10^-10 level. This can be a problem for the bin extrema, since especially with `create_profile`, the extrema are determined from the data themselves. In pathological cases (e.g. in the dataset from #1300) this can cause the profile object to miss all available data.\r\n\r\nThe fix is to use the extrema that we get explicitly from the user or that were calculated automatically in `create_profile`.\r\n\r\nIn addition, I've added some extra padding to the calculated extrema in `create_profile`, which ensures that data exactly at the bin extrema will still be included.\r\n\r\nI think this might also fix the issue that PR 2255 is trying to fix, so as soon as this is merged I'm going to decline that PR.\r\n\r\n* Add support for the 'spacing' ufunc to YTArray\r\n\r\n* Force extrema of log-scale profile bins to the specified extrema.\r\n\r\n* Pad calculated profile extrema to avoid discarding cells at the extrema",
    "created_on": "2016-11-29T18:24:23.381681+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/96882803a599e1a52ed4bb47a919970b76628efd"
            }
        },
        "hash": "96882803a599e1a52ed4bb47a919970b76628efd"
    },
    "title": "[bugfix] More careful treatment of profile extrema. Closes #1300",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2448/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2448/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2448"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2448/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2448/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2448/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2448/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2448/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2448"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2448/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "id": 2448,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt/commit/96882803a599"
                }
            },
            "hash": "96882803a599"
        },
        "repository": {
            "full_name": "ngoldbaum/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/ngoldbaum/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/ngoldbaum/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{cb18d7d9-ab77-4e80-81ed-8d32a945e0ef}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/0bfebdb21e22"
                }
            },
            "hash": "0bfebdb21e22"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2448/comments/27557388"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2448/_/diff#comment-27557388"
                }
            },
            "pullrequest": {
                "title": "[bugfix] More careful treatment of profile extrema. Closes #1300",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2448"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2448"
                    }
                },
                "id": 2448
            },
            "content": {
                "raw": "I've incremented the answer numbers for answer tests that were failing. I manually verified that the answers are different (under both python2.7 and python3.5, the 2.7 tests didn't fail due to an issue with the test system that Kacper is looking at) and that the differences are due to including data at the edges of the profile bins. Given the nature of the changes in this PR I think this is entirely expected and desirable. If anyone is worried about the changes in the answers please let me know.",
                "html": "<p>I've incremented the answer numbers for answer tests that were failing. I manually verified that the answers are different (under both python2.7 and python3.5, the 2.7 tests didn't fail due to an issue with the test system that Kacper is looking at) and that the differences are due to including data at the edges of the profile bins. Given the nature of the changes in this PR I think this is entirely expected and desirable. If anyone is worried about the changes in the answers please let me know.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-11-29T21:22:23.889183+00:00",
            "updated_on": "2016-11-29T21:22:23.894387+00:00",
            "id": 27557388
        }
    ]
}