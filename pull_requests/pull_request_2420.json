{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2016-10-28T02:01:20.309620+00:00",
    "comment_count": 2,
    "description": "tl;dr this PR makes the unit tests about 10 minutes faster and also improves test coverage.\r\n\r\nThis does the three following improvements:\r\n\r\n* refactor test_fields to avoid repeatedly performing field detection\r\n\r\n* Ensure that field errors are raised during testing\r\n\r\n* Ensure several more fields are getting tested by test_fields\r\n\r\nThe first change makes the execution time for `yt.fields.tests.test_fields:test_all_fields` go from a little under 13 minutes to about 30s, (~20x speedup).\r\n\r\nThe second change makes it so that during `test_all_fields`, the field detection machinery is more strict, ensuring that we are testing as many fields as possible and hopefully also catching buggy field definitions in the future. This will not have an impact outside of the tests. See the modification to `field_info_container.py` for more detail.\r\n\r\nThe last fixes a number of field detection issues caught by making field detection errors more visible during testing.",
    "created_on": "2016-10-17T21:06:28.756781+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/6b0692dca947"
            }
        },
        "hash": "6b0692dca947"
    },
    "title": "[enh] speed up test_fields by avoiding repeatedly running field detection",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2420/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2420/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2420"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2420/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2420/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2420/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2420/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2420/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2420"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2420/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/xarthisius"
            },
            "html": {
                "href": "https://bitbucket.org/xarthisius/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/xarthisius/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Kacper Kowalik",
        "uuid": "{26af8f1d-35b3-46ce-9939-09915b06e31f}",
        "username": "xarthisius"
    },
    "id": 2420,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt/commit/059fcd074326"
                }
            },
            "hash": "059fcd074326"
        },
        "repository": {
            "full_name": "ngoldbaum/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/ngoldbaum/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/ngoldbaum/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{cb18d7d9-ab77-4e80-81ed-8d32a945e0ef}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/aff20fbf4037"
                }
            },
            "hash": "aff20fbf4037"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2420/comments/25310717"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2420/_/diff#comment-25310717"
                }
            },
            "pullrequest": {
                "title": "[enh] speed up test_fields by avoiding repeatedly running field detection",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2420"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2420"
                    }
                },
                "id": 2420
            },
            "content": {
                "raw": "Before this PR, `test_all_fields` generates 783 tests. After this PR, it generates 837 tests. I've also manually verified that none all of the fields we were already testing are still being run, the difference in these numbers is entirely due to fields getting coverage that were not being tested before due to field detection issues.",
                "html": "<p>Before this PR, <code>test_all_fields</code> generates 783 tests. After this PR, it generates 837 tests. I've also manually verified that none all of the fields we were already testing are still being run, the difference in these numbers is entirely due to fields getting coverage that were not being tested before due to field detection issues.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-10-17T21:09:41.247957+00:00",
            "updated_on": "2016-10-17T21:09:41.256454+00:00",
            "id": 25310717
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/xarthisius"
                    },
                    "html": {
                        "href": "https://bitbucket.org/xarthisius/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/xarthisius/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Kacper Kowalik",
                "uuid": "{26af8f1d-35b3-46ce-9939-09915b06e31f}",
                "username": "xarthisius"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2420/comments/25355163"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2420/_/diff#comment-25355163"
                }
            },
            "pullrequest": {
                "title": "[enh] speed up test_fields by avoiding repeatedly running field detection",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2420"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2420"
                    }
                },
                "id": 2420
            },
            "content": {
                "raw": "LGTM, I checked the coverage and it's identical. Great work!",
                "html": "<p>LGTM, I checked the coverage and it's identical. Great work!</p>",
                "markup": "markdown"
            },
            "created_on": "2016-10-18T14:09:09.616162+00:00",
            "updated_on": "2016-10-18T14:09:09.619203+00:00",
            "id": 25355163
        }
    ]
}