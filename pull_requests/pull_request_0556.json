{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2013-07-25T06:28:39.961955+00:00",
    "comment_count": 2,
    "description": "This PR ensures that the matplotlib `figure` and `axes` objects persist as we modify a PlotWindow plot.  For most use cases this will act exactly the same as before, however, this allows a couple of cool new use cases.\r\n\r\nFirst, we can now play tricks with axes to create multipanel plots with callbacks.  An example script is pasted here: http://paste.yt-project.org/show/3715/ and the corresponding plot is here: http://i.imgur.com/7l4ej4S.png.  Once this PR is accepted I'll PR the plotting script I've pasted to go into the cookbook.\r\n\r\nSecond, we can now very straightforwardly create animations using the matplotlib animation api:\r\nhttp://nbviewer.ipython.org/url/hub.yt-project.org/notebooks/97273b0e547b4d6aba072ef6fc412035.ipynb\r\n\r\nBefore, to get a similar notebook to work, I had to do some hacky stuff to make sure I persisted the figure.  Now, that happens automatically.\r\n\r\nMost operations will preserve the figure and axes, however if the axes bbox changes due to a change in font size or window size, I've set it so new figure and axes objects are created.  This avoids some artifacts that show up if the figure and axes persist in these contexts. This means that it won't be possible to create an animation with a changing font size, or window size.  I don't think anyone would want to create such a movie, so I don't think this will be an issue in practice, but it is a real limitation so please let me know if you spot an issue.\r\n\r\nLast, I noticed that amr_kdtools.c is not in .hgignore, so I've added it.\r\n\r\nUpdate: making animations a bit nicer by assigning a default canvas in the plot constructor.\r\nUpdate 2: Simplifying a bit.  Figures now persist even if the axis ratio changes.",
    "created_on": "2013-07-21T00:55:40.155928+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/0fa3092155e5"
            }
        },
        "hash": "0fa3092155e5"
    },
    "title": "Persist matplotlib figure and axes as PlotWindow plots are modified.",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/556/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/556/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/556"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/556/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/556/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/556/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/556/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/556/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/556"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/556/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/xarthisius"
            },
            "html": {
                "href": "https://bitbucket.org/xarthisius/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/xarthisius/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Kacper Kowalik",
        "uuid": "{26af8f1d-35b3-46ce-9939-09915b06e31f}",
        "username": "xarthisius"
    },
    "id": 556,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt/commit/683e4ea8530e"
                }
            },
            "hash": "683e4ea8530e"
        },
        "repository": {
            "full_name": "ngoldbaum/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/ngoldbaum/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/ngoldbaum/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{cb18d7d9-ab77-4e80-81ed-8d32a945e0ef}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/30d7d5046213"
                }
            },
            "hash": "30d7d5046213"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/556/comments/400984"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/556/_/diff#comment-400984"
                }
            },
            "pullrequest": {
                "title": "Persist matplotlib figure and axes as PlotWindow plots are modified.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/556"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/556"
                    }
                },
                "id": 556
            },
            "content": {
                "raw": "This seems like a big improvement!  Looks good to me.",
                "html": "<p>This seems like a big improvement!  Looks good to me.</p>",
                "markup": "markdown"
            },
            "created_on": "2013-07-22T15:35:53.572761+00:00",
            "updated_on": "2013-07-22T15:35:53.581405+00:00",
            "id": 400984
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/556/comments/409600"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/556/_/diff#comment-409600"
                }
            },
            "pullrequest": {
                "title": "Persist matplotlib figure and axes as PlotWindow plots are modified.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/556"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/556"
                    }
                },
                "id": 556
            },
            "content": {
                "raw": "Any reason not to accept?  @xarthisius I think you should hit the button on this.",
                "html": "<p>Any reason not to accept?  <a href=\"/xarthisius/\" rel=\"nofollow\" title=\"@xarthisius\" class=\"mention\">Kacper Kowalik</a> I think you should hit the button on this.</p>",
                "markup": "markdown"
            },
            "created_on": "2013-07-24T20:21:35.605462+00:00",
            "updated_on": "2013-07-24T20:21:35.623332+00:00",
            "id": 409600
        }
    ]
}