{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2013-04-14T04:31:39.664207+00:00",
    "comment_count": 8,
    "description": "This PR speeds up the ellipsoid data object by ~2x for the nosetests by primarily avoiding large array creation/manipulation.  It also gets rid of the initial check to see if an entire grid is contained by the ellipsoid.  This mimics the sphere setup as it stands right now.  There are also a couple of PEP8 fixes.\r\n\r\nThis passes the ellipsoid nosetests (as well as the boolean ellipsoid tests).  I'd like @gsiisg to try it out before accepting.  Specifically, the changes I made may only speed up small test data, whereas I'm not sure what the effects will be on larger data.\r\n\r\nAt first I thought that the particle io would be as simple as modifying the particle_io.py file to add the ellipsoid but I was mistaken and more work needs to be taken with the hdft_light_reader, as @sskory mentioned.",
    "created_on": "2013-04-02T04:21:27.847371+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/af7c2b1e3697"
            }
        },
        "hash": "af7c2b1e3697"
    },
    "title": "Ellipsoid Data Object Speedup",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
            },
            "html": {
                "href": "https://bitbucket.org/MatthewTurk/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Matt Turk",
        "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
        "username": "MatthewTurk"
    },
    "id": 472,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/samskillman"
            },
            "html": {
                "href": "https://bitbucket.org/samskillman/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/samskillman/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Sam Skillman",
        "uuid": "{b03f9d96-1c52-4f21-bbdc-72f8e2a97a81}",
        "username": "samskillman"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/samskillman/yt/commit/8dd9d9819b06"
                }
            },
            "hash": "8dd9d9819b06"
        },
        "repository": {
            "full_name": "samskillman/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/samskillman/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/samskillman/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/samskillman/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{f1df6f31-13ed-4d98-a11d-1954f1f1fdfa}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/7f171073bb43"
                }
            },
            "hash": "7f171073bb43"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/gsiisg"
                    },
                    "html": {
                        "href": "https://bitbucket.org/gsiisg/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/gsiisg/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "gsiisg",
                "uuid": "{142f28fc-a606-40a5-ad28-e1ca0344b4c5}",
                "username": "gsiisg"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/comments/180417"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472/_/diff#comment-180417"
                }
            },
            "pullrequest": {
                "title": "Ellipsoid Data Object Speedup",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472"
                    }
                },
                "id": 472
            },
            "content": {
                "raw": "I was able to pull this change set and run a simple test to make sure that it works.  From the code, the vectorization of cm calculation was kept, steps of calculations were reduced, and I do not see how this would adversely affect large data sets so I'm inclined to approve.",
                "html": "<p>I was able to pull this change set and run a simple test to make sure that it works.  From the code, the vectorization of cm calculation was kept, steps of calculations were reduced, and I do not see how this would adversely affect large data sets so I'm inclined to approve.</p>",
                "markup": "markdown"
            },
            "created_on": "2013-04-02T20:39:48.096136+00:00",
            "updated_on": "2013-04-02T20:40:51.887275+00:00",
            "id": 180417
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/comments/193213"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472/_/diff#comment-193213"
                }
            },
            "pullrequest": {
                "title": "Ellipsoid Data Object Speedup",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472"
                    }
                },
                "id": 472
            },
            "content": {
                "raw": "I believe @Astrodude87 has been getting a lot of mileage out of the current ellipsoid implementation.  It would be great if he could take a look at this.",
                "html": "<p>I believe <a href=\"/Astrodude87/\" rel=\"nofollow\" title=\"@Astrodude87\" class=\"mention\">Mark Richardson</a> has been getting a lot of mileage out of the current ellipsoid implementation.  It would be great if he could take a look at this.</p>",
                "markup": "markdown"
            },
            "created_on": "2013-04-10T20:52:57.135688+00:00",
            "updated_on": "2013-04-10T20:52:57.146810+00:00",
            "id": 193213
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/Astrodude87"
                    },
                    "html": {
                        "href": "https://bitbucket.org/Astrodude87/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/Astrodude87/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Mark Richardson",
                "uuid": "{6ec799f9-cab9-42e1-b272-1f951d2c3a33}",
                "username": "Astrodude87"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/comments/193385"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472/_/diff#comment-193385"
                }
            },
            "pullrequest": {
                "title": "Ellipsoid Data Object Speedup",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472"
                    }
                },
                "id": 472
            },
            "content": {
                "raw": "Thanks Nathan. I'll check this out.",
                "html": "<p>Thanks Nathan. I'll check this out.</p>",
                "markup": "markdown"
            },
            "created_on": "2013-04-10T23:15:52.234517+00:00",
            "updated_on": "2013-04-10T23:15:52.389907+00:00",
            "id": 193385
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/comments/197222"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472/_/diff#comment-197222"
                }
            },
            "pullrequest": {
                "title": "Ellipsoid Data Object Speedup",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472"
                    }
                },
                "id": 472
            },
            "content": {
                "raw": "Once @Astrodude87 approves, I have no problems with this.",
                "html": "<p>Once <a href=\"/Astrodude87/\" rel=\"nofollow\" title=\"@Astrodude87\" class=\"mention\">Mark Richardson</a> approves, I have no problems with this.</p>",
                "markup": "markdown"
            },
            "created_on": "2013-04-12T17:37:32.263097+00:00",
            "updated_on": "2013-04-12T17:37:32.280785+00:00",
            "id": 197222
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/Astrodude87"
                    },
                    "html": {
                        "href": "https://bitbucket.org/Astrodude87/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/Astrodude87/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Mark Richardson",
                "uuid": "{6ec799f9-cab9-42e1-b272-1f951d2c3a33}",
                "username": "Astrodude87"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/comments/197577"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472/_/diff#comment-197577"
                }
            },
            "pullrequest": {
                "title": "Ellipsoid Data Object Speedup",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472"
                    }
                },
                "id": 472
            },
            "content": {
                "raw": "Sorry for the delay guys. Looks good to me, and runs fine with my quick ellipsoid test.",
                "html": "<p>Sorry for the delay guys. Looks good to me, and runs fine with my quick ellipsoid test.</p>",
                "markup": "markdown"
            },
            "created_on": "2013-04-12T21:46:30.136092+00:00",
            "updated_on": "2013-04-12T21:46:30.226791+00:00",
            "id": 197577
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/comments/197579"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472/_/diff#comment-197579"
                }
            },
            "pullrequest": {
                "title": "Ellipsoid Data Object Speedup",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472"
                    }
                },
                "id": 472
            },
            "content": {
                "raw": "Thanks Mark!  Let's do this.",
                "html": "<p>Thanks Mark!  Let's do this.</p>",
                "markup": "markdown"
            },
            "created_on": "2013-04-12T21:47:30.555970+00:00",
            "updated_on": "2013-04-12T21:47:30.563253+00:00",
            "id": 197579
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/gsiisg"
                    },
                    "html": {
                        "href": "https://bitbucket.org/gsiisg/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/gsiisg/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "gsiisg",
                "uuid": "{142f28fc-a606-40a5-ad28-e1ca0344b4c5}",
                "username": "gsiisg"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/comments/198121"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472/_/diff#comment-198121"
                }
            },
            "pullrequest": {
                "title": "Ellipsoid Data Object Speedup",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472"
                    }
                },
                "id": 472
            },
            "content": {
                "raw": "I did a test with a script calculating various properties of the halo (outputting 20 columns per halo) on 53,980 haloes total.\nThis test was done using the interactive nodes on Gordon (4 nodes = 64 cores total) with parallel objects.\nBefore the ellipsoid changes: 79 minutes\nAfter the ellipsoid changes: 59 minutes\nSo about 25% faster from this qualitative test.\n",
                "html": "<p>I did a test with a script calculating various properties of the halo (outputting 20 columns per halo) on 53,980 haloes total.\nThis test was done using the interactive nodes on Gordon (4 nodes = 64 cores total) with parallel objects.\nBefore the ellipsoid changes: 79 minutes\nAfter the ellipsoid changes: 59 minutes\nSo about 25% faster from this qualitative test.</p>",
                "markup": "markdown"
            },
            "created_on": "2013-04-14T04:21:04.450475+00:00",
            "updated_on": "2013-04-14T04:21:04.556986+00:00",
            "id": 198121
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/samskillman"
                    },
                    "html": {
                        "href": "https://bitbucket.org/samskillman/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/samskillman/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Sam Skillman",
                "uuid": "{b03f9d96-1c52-4f21-bbdc-72f8e2a97a81}",
                "username": "samskillman"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472/comments/198126"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472/_/diff#comment-198126"
                }
            },
            "pullrequest": {
                "title": "Ellipsoid Data Object Speedup",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/472"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/472"
                    }
                },
                "id": 472
            },
            "content": {
                "raw": "Hi Geoffrey,\nThanks for running that speed test. I'm very glad to hear that it also gave a decent speedup for large datasets.  Thanks again for taking the time to verify!",
                "html": "<p>Hi Geoffrey,\nThanks for running that speed test. I'm very glad to hear that it also gave a decent speedup for large datasets.  Thanks again for taking the time to verify!</p>",
                "markup": "markdown"
            },
            "created_on": "2013-04-14T04:31:39.375477+00:00",
            "updated_on": "2013-04-14T04:31:39.383281+00:00",
            "id": 198126
        }
    ]
}