{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2015-01-16T17:45:57.928075+00:00",
    "comment_count": 5,
    "description": "@xarthisius ran some tests and saw that Boxlib IO was enormously inefficient.  This is an attempt to reduce the total time spend in f.seek() operations, which were mostly unnecessary and were the result of lots of inefficient tracking of the current position in a file.\n\nIt's possible this is wrong, although I did think carefully about the math and the tracking, and there's also likely a better way to do this.  Would be good to get eyes from @cmalone and @mzingale on it, as well as Fido.\n\n\n",
    "created_on": "2015-01-16T01:17:31.165820+00:00",
    "task_count": 0,
    "merge_commit": null,
    "title": "Reduce number of seeks in Boxlib IO",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1412"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ChrisMalone"
            },
            "html": {
                "href": "https://bitbucket.org/ChrisMalone/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ChrisMalone/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Chris Malone",
        "uuid": "{eab958cf-edbf-44db-8a2e-8b8ed90af67f}",
        "username": "ChrisMalone"
    },
    "id": 1412,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
            },
            "html": {
                "href": "https://bitbucket.org/MatthewTurk/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Matt Turk",
        "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
        "username": "MatthewTurk"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/MatthewTurk/yt/commit/d8069e2f9549"
                }
            },
            "hash": "d8069e2f9549"
        },
        "repository": {
            "full_name": "MatthewTurk/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/MatthewTurk/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/MatthewTurk/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/MatthewTurk/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b5dfa70b-707c-4330-92a8-e3ea1bee18b3}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/ec8644a41a0e"
                }
            },
            "hash": "ec8644a41a0e"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/comments/4665499"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1412/_/diff#comment-4665499"
                }
            },
            "pullrequest": {
                "title": "Reduce number of seeks in Boxlib IO",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1412"
                    }
                },
                "id": 1412
            },
            "content": {
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>",
                "markup": "markdown"
            },
            "created_on": "2015-01-16T02:38:40.886840+00:00",
            "updated_on": "2015-01-16T02:38:41.050864+00:00",
            "id": 4665499
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/atmyers"
                    },
                    "html": {
                        "href": "https://bitbucket.org/atmyers/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/atmyers/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Andrew Myers",
                "uuid": "{651c5647-b78f-4cd9-8d9a-5d6e8c9ac8d3}",
                "username": "atmyers"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/comments/4674644"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1412/_/diff#comment-4674644"
                }
            },
            "pullrequest": {
                "title": "Reduce number of seeks in Boxlib IO",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1412"
                    }
                },
                "id": 1412
            },
            "content": {
                "raw": "I tried this out on some Orion data and everything worked as expected. I also agree with you that the logic of it is sound. I didn't notice a speedup, but the Orion datasets I have easy access to right now aren't very big. ",
                "html": "<p>I tried this out on some Orion data and everything worked as expected. I also agree with you that the logic of it is sound. I didn't notice a speedup, but the Orion datasets I have easy access to right now aren't very big. </p>",
                "markup": "markdown"
            },
            "created_on": "2015-01-16T15:28:05.922447+00:00",
            "updated_on": "2015-01-16T15:28:05.931471+00:00",
            "id": 4674644
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ChrisMalone"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ChrisMalone/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ChrisMalone/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Chris Malone",
                "uuid": "{eab958cf-edbf-44db-8a2e-8b8ed90af67f}",
                "username": "ChrisMalone"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/comments/4674915"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1412/_/diff#comment-4674915"
                }
            },
            "pullrequest": {
                "title": "Reduce number of seeks in Boxlib IO",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1412"
                    }
                },
                "id": 1412
            },
            "content": {
                "raw": "I've not been able to test this myself as my machine is currently on the fritz.  That said, the logic seems correct to me.  Would it be any more efficient to make `_offset` a property?  Logically it is the same as what you are doing now with the `_get_offset` function - checking if it is not set, and if it isn't then you set it and return it.",
                "html": "<p>I've not been able to test this myself as my machine is currently on the fritz.  That said, the logic seems correct to me.  Would it be any more efficient to make <code>_offset</code> a property?  Logically it is the same as what you are doing now with the <code>_get_offset</code> function - checking if it is not set, and if it isn't then you set it and return it.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-01-16T15:39:19.670943+00:00",
            "updated_on": "2015-01-16T15:39:19.680826+00:00",
            "id": 4674915
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/comments/4676726"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1412/_/diff#comment-4676726"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/comments/4674915"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1412/_/diff#comment-4674915"
                    }
                },
                "id": 4674915
            },
            "pullrequest": {
                "title": "Reduce number of seeks in Boxlib IO",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1412"
                    }
                },
                "id": 1412
            },
            "content": {
                "raw": "I would prefer a property, but I wanted to keep the file handle that was already opened available, so I didn't see how to do that otherwise.",
                "html": "<p>I would prefer a property, but I wanted to keep the file handle that was already opened available, so I didn't see how to do that otherwise.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-01-16T17:01:35.826394+00:00",
            "updated_on": "2015-01-16T17:01:35.835861+00:00",
            "id": 4676726
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/mzingale"
                    },
                    "html": {
                        "href": "https://bitbucket.org/mzingale/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/mzingale/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Michael  Zingale",
                "uuid": "{d1d09b0d-3bd7-4129-ac64-6aa3abfa3223}",
                "username": "mzingale"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412/comments/4677419"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1412/_/diff#comment-4677419"
                }
            },
            "pullrequest": {
                "title": "Reduce number of seeks in Boxlib IO",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1412"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1412"
                    }
                },
                "id": 1412
            },
            "content": {
                "raw": "I tested this out with a volume rendering on a 3-d boxlib dataset, and it seemed to work ok for me.",
                "html": "<p>I tested this out with a volume rendering on a 3-d boxlib dataset, and it seemed to work ok for me.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-01-16T17:36:39.382014+00:00",
            "updated_on": "2015-01-16T17:36:39.391379+00:00",
            "id": 4677419
        }
    ]
}