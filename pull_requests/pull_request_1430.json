{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2015-02-05T21:08:18.501609+00:00",
    "comment_count": 5,
    "description": "This is an attempt to address issue [979](https://bitbucket.org/yt_analysis/yt/issue/979/sph-datasets-generate-a-large-number-of). Basically, this gets rid of a huge number of warning messages when loading SPH datasets that were introduced in yt-3.2. Using the GadgetDiskGalaxy (Gadget) and snapshot_033 (OWLS) sample datasets, I've verified that exactly the same set of fields get added to ds.field_info before and after these changes, and that the result of sampling the value of every field at the center of the domain  is the same. But, this needs to be reviewed by people more familiar with the SPH frontends than I am.\r\n\r\nAlso, there is still one redundant field add after this PR - ('gas', 'metallicity') that happens when the fluid field plugin gets applied. ('gas', 'metallicity') has already been aliased to a smoothed, deposited field, and we don't want to override it.  \r\n\r\nOf course, another way to do this is simply to back out the \"field already exists\" warning that I added. I can certainly do that if people prefer. But, I think that having the warning is good since it prevents yt from quietly doing something other than what you expect. Another idea is to only have add_field give a warning when force_override is not explicitly set. ",
    "created_on": "2015-01-26T20:40:08.690418+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/6790f762cbb6"
            }
        },
        "hash": "6790f762cbb6"
    },
    "title": "Removing \"field already exists\" warnings from the Owls and Gadget frontends",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1430"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
            },
            "html": {
                "href": "https://bitbucket.org/MatthewTurk/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Matt Turk",
        "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
        "username": "MatthewTurk"
    },
    "id": 1430,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/atmyers"
            },
            "html": {
                "href": "https://bitbucket.org/atmyers/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/atmyers/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Andrew Myers",
        "uuid": "{651c5647-b78f-4cd9-8d9a-5d6e8c9ac8d3}",
        "username": "atmyers"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/atmyers/yt/commit/7ab1f63fd438"
                }
            },
            "hash": "7ab1f63fd438"
        },
        "repository": {
            "full_name": "atmyers/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/atmyers/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/atmyers/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/atmyers/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{14866916-6c53-4d06-95e1-89d30c798c08}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/98de256b6cd5"
                }
            },
            "hash": "98de256b6cd5"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/comments/4811059"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/atmyers/yt:7ab1f63fd438..98de256b6cd5?path=yt%2Ffields%2Ffield_info_container.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1430/_/diff#comment-4811059"
                }
            },
            "pullrequest": {
                "title": "Removing \"field already exists\" warnings from the Owls and Gadget frontends",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1430"
                    }
                },
                "id": 1430
            },
            "content": {
                "raw": "Hm, I'm a bit surprised by this removal -- can you tell me a bit more about it?  Don't we need this?",
                "html": "<p>Hm, I'm a bit surprised by this removal -- can you tell me a bit more about it?  Don't we need this?</p>",
                "markup": "markdown"
            },
            "created_on": "2015-01-26T21:02:26.854843+00:00",
            "updated_on": "2015-01-26T21:02:26.866804+00:00",
            "inline": {
                "from": 133,
                "path": "yt/fields/field_info_container.py",
                "to": null
            },
            "id": 4811059
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/atmyers"
                    },
                    "html": {
                        "href": "https://bitbucket.org/atmyers/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/atmyers/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Andrew Myers",
                "uuid": "{651c5647-b78f-4cd9-8d9a-5d6e8c9ac8d3}",
                "username": "atmyers"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/comments/4811297"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/atmyers/yt:None..None?path=yt%2Ffields%2Ffield_info_container.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1430/_/diff#comment-4811297"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/comments/4811059"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1430/_/diff#comment-4811059"
                    }
                },
                "id": 4811059
            },
            "pullrequest": {
                "title": "Removing \"field already exists\" warnings from the Owls and Gadget frontends",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1430"
                    }
                },
                "id": 1430
            },
            "content": {
                "raw": "I'm on a lot of cold medicine today, so I might be reading this wrong :) . But AFAICT lines 137-141 only get reached if (ptype, alias_name) is in self. But, if (ptype, alias_name) is in self, the same code would get executed in lines 146-150. Can you give me a case where the first loop would catch something that the second doesn't? At least, I can say that for the two datasets I looked at, removing the first ``` for ``` loop didn't result in any fields getting left out. ",
                "html": "<p>I'm on a lot of cold medicine today, so I might be reading this wrong :) . But AFAICT lines 137-141 only get reached if (ptype, alias_name) is in self. But, if (ptype, alias_name) is in self, the same code would get executed in lines 146-150. Can you give me a case where the first loop would catch something that the second doesn't? At least, I can say that for the two datasets I looked at, removing the first <code>for</code> loop didn't result in any fields getting left out. </p>",
                "markup": "markdown"
            },
            "created_on": "2015-01-26T21:17:51.917017+00:00",
            "updated_on": "2015-01-26T21:17:51.926697+00:00",
            "inline": {
                "from": null,
                "path": "yt/fields/field_info_container.py",
                "to": null
            },
            "id": 4811297
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/comments/4814357"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1430/_/diff#comment-4814357"
                }
            },
            "pullrequest": {
                "title": "Removing \"field already exists\" warnings from the Owls and Gadget frontends",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1430"
                    }
                },
                "id": 1430
            },
            "content": {
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>",
                "markup": "markdown"
            },
            "created_on": "2015-01-27T00:58:31.921560+00:00",
            "updated_on": "2015-01-27T00:58:32.214403+00:00",
            "id": 4814357
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/desika"
                    },
                    "html": {
                        "href": "https://bitbucket.org/desika/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/desika/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Desika Narayanan",
                "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}",
                "username": "desika"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/comments/4984357"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1430/_/diff#comment-4984357"
                }
            },
            "pullrequest": {
                "title": "Removing \"field already exists\" warnings from the Owls and Gadget frontends",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1430"
                    }
                },
                "id": 1430
            },
            "content": {
                "raw": "I can verify that this works for Gizmo data sets - the only redundant field (like Andrew said) is the (gas,metallicity) one.  ",
                "html": "<p>I can verify that this works for Gizmo data sets - the only redundant field (like Andrew said) is the (gas,metallicity) one.  </p>",
                "markup": "markdown"
            },
            "created_on": "2015-02-05T10:50:03.001317+00:00",
            "updated_on": "2015-02-05T10:50:03.215369+00:00",
            "id": 4984357
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430/comments/4989962"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1430/_/diff#comment-4989962"
                }
            },
            "pullrequest": {
                "title": "Removing \"field already exists\" warnings from the Owls and Gadget frontends",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1430"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1430"
                    }
                },
                "id": 1430
            },
            "content": {
                "raw": "I'm okay with pulling this in, but I'd like to try to figure out where the duplicate fields are coming from; seems to me that what is likely happening is that some routine that sets them up on a per-particle basis is getting called twice.  Anyway, that can be for another day!",
                "html": "<p>I'm okay with pulling this in, but I'd like to try to figure out where the duplicate fields are coming from; seems to me that what is likely happening is that some routine that sets them up on a per-particle basis is getting called twice.  Anyway, that can be for another day!</p>",
                "markup": "markdown"
            },
            "created_on": "2015-02-05T15:07:09.405898+00:00",
            "updated_on": "2015-02-05T15:07:09.421529+00:00",
            "id": 4989962
        }
    ]
}