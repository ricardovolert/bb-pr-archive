{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2014-09-17T03:36:38.361428+00:00",
    "comment_count": 7,
    "description": "This fixes a somewhat pernicious bug.  It usually showed up with the over_refine_factor for a particle dataset was greater than one, although in principle it could also affect when it was equal to one.  What can happen is that when iterating over mesh items in the mesh octree, sometimes we would walk outside the particle octree oct that we had identified for the neighbor searching.  This fixes the issue by adding in a walk over the particle search octree during the course of the iteration over mesh elements.  This could in principle lead to considerably more runtime, but I have added a simple early termination process to try to ease that.\r\n\r\nI'm preparing a few examples oh how to demonstrate this, but I'm pretty sure this is a definite improvement.  There's also the possibility for much better early termination of the neighbor searching inside the tight loop.\r\n\r\nUPDATE 1: Oh, ugh, I'm still getting funky looking smoothing plots.  Changing to WIP.\r\n\r\nUPDATE 2: I found a major bug (fencepost in a fenceposting routine) and now everything mostly works pretty well.  Comparison script: http://paste.yt-project.org/show/5106/",
    "created_on": "2014-09-09T10:54:13.867373+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/b3c9e119a5b6"
            }
        },
        "hash": "b3c9e119a5b6"
    },
    "title": "Fix bug with mismatched smoothing trees.",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "id": 1193,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
            },
            "html": {
                "href": "https://bitbucket.org/MatthewTurk/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Matt Turk",
        "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
        "username": "MatthewTurk"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/MatthewTurk/yt/commit/9ac61672fc1d"
                }
            },
            "hash": "9ac61672fc1d"
        },
        "repository": {
            "full_name": "MatthewTurk/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/MatthewTurk/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/MatthewTurk/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/MatthewTurk/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b5dfa70b-707c-4330-92a8-e3ea1bee18b3}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/c7ff1e9f7257"
                }
            },
            "hash": "c7ff1e9f7257"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/comments/3004463"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193/_/diff#comment-3004463"
                }
            },
            "pullrequest": {
                "title": "Fix bug with mismatched smoothing trees.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193"
                    }
                },
                "id": 1193
            },
            "content": {
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>",
                "markup": "markdown"
            },
            "created_on": "2014-09-09T11:42:38.018594+00:00",
            "updated_on": "2014-09-09T11:42:38.366325+00:00",
            "id": 3004463
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/comments/3011691"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193/_/diff#comment-3011691"
                }
            },
            "pullrequest": {
                "title": "Fix bug with mismatched smoothing trees.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193"
                    }
                },
                "id": 1193
            },
            "content": {
                "raw": "Something went wrong, you should checkout http://tests.yt-project.org/job/py2.7-yt-3.0_testing/1325/",
                "html": "<p>Something went wrong, you should checkout <a href=\"http://tests.yt-project.org/job/py2.7-yt-3.0_testing/1325/\" rel=\"nofollow\">http://tests.yt-project.org/job/py2.7-yt-3.0_testing/1325/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2014-09-09T19:31:49.468647+00:00",
            "updated_on": "2014-09-09T19:31:49.979673+00:00",
            "id": 3011691
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/comments/3027301"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193/_/diff#comment-3027301"
                }
            },
            "pullrequest": {
                "title": "Fix bug with mismatched smoothing trees.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193"
                    }
                },
                "id": 1193
            },
            "content": {
                "raw": "Looks like there are now segfaults for ARTIO and RAMSES.  @xarthisius and ideas?",
                "html": "<p>Looks like there are now segfaults for ARTIO and RAMSES.  <a href=\"/xarthisius/\" rel=\"nofollow\" title=\"@xarthisius\" class=\"mention\">Kacper Kowalik</a> and ideas?</p>",
                "markup": "markdown"
            },
            "created_on": "2014-09-10T18:23:21.261652+00:00",
            "updated_on": "2014-09-10T18:23:21.275042+00:00",
            "id": 3027301
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/comments/3090457"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193/_/diff#comment-3090457"
                }
            },
            "pullrequest": {
                "title": "Fix bug with mismatched smoothing trees.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193"
                    }
                },
                "id": 1193
            },
            "content": {
                "raw": "@xarthisius correctly indicated to me in IRC that the setting of `ipos` to `ind` is the problem -- this is in fact an issue since for datasets with a root mesh greater than one element, we already have `ind` set correctly, and then we add `ipos` onto that.",
                "html": "<p><a href=\"/xarthisius/\" rel=\"nofollow\" title=\"@xarthisius\" class=\"mention\">Kacper Kowalik</a> correctly indicated to me in IRC that the setting of <code>ipos</code> to <code>ind</code> is the problem -- this is in fact an issue since for datasets with a root mesh greater than one element, we already have <code>ind</code> set correctly, and then we add <code>ipos</code> onto that.</p>",
                "markup": "markdown"
            },
            "created_on": "2014-09-16T14:38:23.245213+00:00",
            "updated_on": "2014-09-16T14:38:23.268303+00:00",
            "id": 3090457
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/comments/3091951"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193/_/diff#comment-3091951"
                }
            },
            "pullrequest": {
                "title": "Fix bug with mismatched smoothing trees.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193"
                    }
                },
                "id": 1193
            },
            "content": {
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>",
                "markup": "markdown"
            },
            "created_on": "2014-09-16T15:43:04.667323+00:00",
            "updated_on": "2014-09-16T15:43:05.185156+00:00",
            "id": 3091951
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/comments/3093238"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193/_/diff#comment-3093238"
                }
            },
            "pullrequest": {
                "title": "Fix bug with mismatched smoothing trees.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193"
                    }
                },
                "id": 1193
            },
            "content": {
                "raw": "@desika can comment about whether your VR workflow works still using this version of the pull request?",
                "html": "<p><a href=\"/desika/\" rel=\"nofollow\" title=\"@desika\" class=\"mention\">Desika Narayanan</a> can comment about whether your VR workflow works still using this version of the pull request?</p>",
                "markup": "markdown"
            },
            "created_on": "2014-09-16T17:01:07.207631+00:00",
            "updated_on": "2014-09-16T17:01:07.267489+00:00",
            "id": 3093238
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/desika"
                    },
                    "html": {
                        "href": "https://bitbucket.org/desika/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/desika/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Desika Narayanan",
                "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}",
                "username": "desika"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193/comments/3093283"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193/_/diff#comment-3093283"
                }
            },
            "pullrequest": {
                "title": "Fix bug with mismatched smoothing trees.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1193"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1193"
                    }
                },
                "id": 1193
            },
            "content": {
                "raw": "yup this is working super well for me!  sorry for forgetting to approve after my testing - i had forgotten this exists!  \n\nhttp://imgur.com/ro7fWZ0",
                "html": "<p>yup this is working super well for me!  sorry for forgetting to approve after my testing - i had forgotten this exists!  </p>\n<p><a href=\"http://imgur.com/ro7fWZ0\" rel=\"nofollow\">http://imgur.com/ro7fWZ0</a></p>",
                "markup": "markdown"
            },
            "created_on": "2014-09-16T17:04:04.580121+00:00",
            "updated_on": "2014-09-16T17:04:59.595376+00:00",
            "id": 3093283
        }
    ]
}