{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2015-06-23T17:47:19.375213+00:00",
    "comment_count": 19,
    "description": "(As far as I can tell) normally the ds.domain_left_edge (right_edge) are set by values that encompass all of the particles.  \r\n\r\nThe edits in this PR are to frontends/tipsy/data_structures to allow a user to load a ds that has ds.domain_left_edge (right_edge) that allow for specific regions within the data set, rather than just the default edges.  This will allow effectively for cutouts of the ds.\r\n\r\nAn example script using the yt tipsy data is:\r\n\r\n```\r\nimport yt\r\nimport numpy as np\r\n\r\nfname = 'powderday/tipsy/TipsyGalaxy/galaxy.00300'\r\n\r\n\r\nboxsize = 1\r\nbbox = [[-boxsize,boxsize],\r\n        [-boxsize,boxsize],\r\n        [-boxsize,boxsize]]\r\n\r\n\r\nds = yt.load(fname,bounding_box = bbox)\r\nds.index\r\n\r\nprint \"original bounding box values:\"\r\nprint ds.domain_left_edge\r\nad = ds.all_data()\r\nprint np.sum(ad[('Gas', 'Mass')])\r\n\r\nds = yt.load(fname,bounding_box = bbox)\r\nds.index\r\nad = ds.all_data()\r\nprint \"new bounding box values:\"\r\nprint ds.domain_left_edge\r\nprint np.sum(ad[('Gas', 'Mass')])\r\n\r\n```\r\n\r\nThe only thing is that the ds has to be loaded twice - and the first time the bounding box won't be set.  I'm not 100% sure why this is, though I think this is due to _parse_parameter_file in data_structures overwriting the ds.domain_left_edge on the first load.  Loading gadget data sets has a similar characteristic.",
    "created_on": "2015-03-25T19:30:18.840425+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/952fc8b07788"
            }
        },
        "hash": "952fc8b07788"
    },
    "title": "Added functionality for a bounding_box for tipsy data",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
            },
            "html": {
                "href": "https://bitbucket.org/MatthewTurk/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Matt Turk",
        "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
        "username": "MatthewTurk"
    },
    "id": 1524,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/desika"
            },
            "html": {
                "href": "https://bitbucket.org/desika/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/desika/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Desika Narayanan",
        "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}",
        "username": "desika"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/desika/yt/commit/0ec9a7fcaa55"
                }
            },
            "hash": "0ec9a7fcaa55"
        },
        "repository": {
            "full_name": "desika/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/desika/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/desika/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/desika/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{81d64828-c170-4fec-bd9c-2f7010269203}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/fa26bf106026"
                }
            },
            "hash": "fa26bf106026"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/desika"
                    },
                    "html": {
                        "href": "https://bitbucket.org/desika/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/desika/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Desika Narayanan",
                "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}",
                "username": "desika"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5883152"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5883152"
                }
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "also i should point out that when i run this script, it returns the following:\n\n```\noriginal bounding box values:\n[ -547.51629822  -557.30091064 -3675.19602173] code_length\n6.84973832245 code_mass\nnew bounding box values:\n[-1. -1. -1.]\n0.271782814758 code_mass\n```",
                "html": "<p>also i should point out that when i run this script, it returns the following:</p>\n<div class=\"codehilite\"><pre><span></span>original bounding box values:\n[ -547.51629822  -557.30091064 -3675.19602173] code_length\n6.84973832245 code_mass\nnew bounding box values:\n[-1. -1. -1.]\n0.271782814758 code_mass\n</pre></div>",
                "markup": "markdown"
            },
            "created_on": "2015-03-25T19:33:26.552983+00:00",
            "updated_on": "2015-03-25T19:33:26.607483+00:00",
            "id": 5883152
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5883242"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5883242"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5883152"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5883152"
                    }
                },
                "id": 5883152
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "Shouldn't `domain_left_edge` retain units?  It looks like the second time you loaded the dataset `domain_left_edge` became a list or ndarray instead of a YTArray with units.\n\nDid you take a look at the `_update_domain` function in `io.py` in the tipsy frontend?\n",
                "html": "<p>Shouldn't <code>domain_left_edge</code> retain units?  It looks like the second time you loaded the dataset <code>domain_left_edge</code> became a list or ndarray instead of a YTArray with units.</p>\n<p>Did you take a look at the <code>_update_domain</code> function in <code>io.py</code> in the tipsy frontend?</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-25T19:38:30.651091+00:00",
            "updated_on": "2015-03-25T19:42:54.433266+00:00",
            "id": 5883242
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/desika"
                    },
                    "html": {
                        "href": "https://bitbucket.org/desika/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/desika/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Desika Narayanan",
                "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}",
                "username": "desika"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5883953"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5883953"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5883242"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5883242"
                    }
                },
                "id": 5883242
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "Thanks Nathan - you're right!  \n\nI see what ```_update_domain``` is doing here, but can't figure out how to either retain or assign the units for ```domain_left_edge``` in the ```TipsyDataset``` class of ```data_structures```.   What's more is that if I try the same cutout method for a gadget data set, it does retain the units, though again I can't seem to figure out how.  \n\nIs part of the problem is that the ```TipsyDataset``` has no ```unit_registry``` attribute - but it doesn't seem like the ```GadgetDataset``` does either - so I think I'm missing something.  Apologies - and any advice would definitely be appreciated!",
                "html": "<p>Thanks Nathan - you're right!  </p>\n<p>I see what <code>_update_domain</code> is doing here, but can't figure out how to either retain or assign the units for <code>domain_left_edge</code> in the <code>TipsyDataset</code> class of <code>data_structures</code>.   What's more is that if I try the same cutout method for a gadget data set, it does retain the units, though again I can't seem to figure out how.  </p>\n<p>Is part of the problem is that the <code>TipsyDataset</code> has no <code>unit_registry</code> attribute - but it doesn't seem like the <code>GadgetDataset</code> does either - so I think I'm missing something.  Apologies - and any advice would definitely be appreciated!</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-25T20:14:04.128646+00:00",
            "updated_on": "2015-03-25T20:14:04.178974+00:00",
            "id": 5883953
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5883992"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5883992"
                }
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-25T20:16:07.119468+00:00",
            "updated_on": "2015-03-25T20:16:07.165596+00:00",
            "id": 5883992
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5884030"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5884030"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5883953"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5883953"
                    }
                },
                "id": 5883953
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "The unit registry gets attached to `Dataset` objects in the `_create_unit_registry()` function defined on the `Dataset` base class.  This gets called right before `_parse_parameter_file`.\n\nYou'll likely need to be careful about the order in which the domain is set up.  This might be tricky for tipsy since right now we do a full i/o pass over all the particles to determine the domain boundaries.  Maybe you'll need to short-circuit that if a bounding box is passed in?",
                "html": "<p>The unit registry gets attached to <code>Dataset</code> objects in the <code>_create_unit_registry()</code> function defined on the <code>Dataset</code> base class.  This gets called right before <code>_parse_parameter_file</code>.</p>\n<p>You'll likely need to be careful about the order in which the domain is set up.  This might be tricky for tipsy since right now we do a full i/o pass over all the particles to determine the domain boundaries.  Maybe you'll need to short-circuit that if a bounding box is passed in?</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-25T20:18:06.550050+00:00",
            "updated_on": "2015-03-25T20:18:06.556096+00:00",
            "id": 5884030
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/desika"
                    },
                    "html": {
                        "href": "https://bitbucket.org/desika/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/desika/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Desika Narayanan",
                "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}",
                "username": "desika"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5888580"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5888580"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5884030"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5884030"
                    }
                },
                "id": 5884030
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "Hey Nathan,\n\nThanks - I've spent some time on this and have gotten myself thoroughly confused as to what's going on in the Tipsy frontend.  \n\nWould one way forward be to have a separate method in ```io``` like ```update_domain``` that is only called if a Bounding Box is set?   Say something like ```update_domain_bounding_box``` (or something).  If this would be good, then the question I have is how exactly to go about that - the reason is that it looks like the ```io._update_domain``` is called within the ```TipsyFile``` class - so I'm not sure how to get that to know I'm setting a Bounding Box.  Does that make sense? \n\nApologies for my confusion - as you can tell, I'm not super familiar with this territory.\n\n",
                "html": "<p>Hey Nathan,</p>\n<p>Thanks - I've spent some time on this and have gotten myself thoroughly confused as to what's going on in the Tipsy frontend.  </p>\n<p>Would one way forward be to have a separate method in <code>io</code> like <code>update_domain</code> that is only called if a Bounding Box is set?   Say something like <code>update_domain_bounding_box</code> (or something).  If this would be good, then the question I have is how exactly to go about that - the reason is that it looks like the <code>io._update_domain</code> is called within the <code>TipsyFile</code> class - so I'm not sure how to get that to know I'm setting a Bounding Box.  Does that make sense? </p>\n<p>Apologies for my confusion - as you can tell, I'm not super familiar with this territory.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-26T00:29:34.724023+00:00",
            "updated_on": "2015-03-26T00:29:34.899360+00:00",
            "id": 5888580
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5888703"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5888703"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5888580"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5888580"
                    }
                },
                "id": 5888580
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "I managed to grab a second to dive into this.  I think it's fixed in this commit:\n\nhttps://bitbucket.org/ngoldbaum/yt/commits/bbde14a7de8ac3d522ba842f87788be23d7dc51b?at=tipsy_bbox_fix\n\nI can now run this version of your script:\n\n\n```\n#!python\n\nimport yt\nimport numpy as np\n\nfname = 'TipsyGalaxy/galaxy.00300'\n\n\nboxsize = 1\nbbox = [[-boxsize,boxsize],\n        [-boxsize,boxsize],\n        [-boxsize,boxsize]]\n\n\nds = yt.load(fname, bounding_box=bbox)\n\nds.index\n\nprint \"original bounding box values:\"\nprint ds.domain_left_edge\nad = ds.all_data()\nprint np.sum(ad[('Gas', 'Mass')])\n```\n\nAnd get:\n\n\n```\n#!python\n\noriginal bounding box values:\n[-1. -1. -1.] code_length\n0.271782814758 code_mass\n```\n\nThere is still a single global i/o pass over all the particles in `_update_domain`, I have not checked if that's still necessary with a user-selected bounding box.  What happens with my change is the global bounding box is reset by the user-specified value.",
                "html": "<p>I managed to grab a second to dive into this.  I think it's fixed in this commit:</p>\n<p><a href=\"https://bitbucket.org/ngoldbaum/yt/commits/bbde14a7de8ac3d522ba842f87788be23d7dc51b?at=tipsy_bbox_fix\" rel=\"nofollow\">https://bitbucket.org/ngoldbaum/yt/commits/bbde14a7de8ac3d522ba842f87788be23d7dc51b?at=tipsy_bbox_fix</a></p>\n<p>I can now run this version of your script:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">yt</span>\n<span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"kn\">as</span> <span class=\"nn\">np</span>\n\n<span class=\"n\">fname</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;TipsyGalaxy/galaxy.00300&#39;</span>\n\n\n<span class=\"n\">boxsize</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>\n<span class=\"n\">bbox</span> <span class=\"o\">=</span> <span class=\"p\">[[</span><span class=\"o\">-</span><span class=\"n\">boxsize</span><span class=\"p\">,</span><span class=\"n\">boxsize</span><span class=\"p\">],</span>\n        <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"n\">boxsize</span><span class=\"p\">,</span><span class=\"n\">boxsize</span><span class=\"p\">],</span>\n        <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"n\">boxsize</span><span class=\"p\">,</span><span class=\"n\">boxsize</span><span class=\"p\">]]</span>\n\n\n<span class=\"n\">ds</span> <span class=\"o\">=</span> <span class=\"n\">yt</span><span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"n\">fname</span><span class=\"p\">,</span> <span class=\"n\">bounding_box</span><span class=\"o\">=</span><span class=\"n\">bbox</span><span class=\"p\">)</span>\n\n<span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">index</span>\n\n<span class=\"k\">print</span> <span class=\"s2\">&quot;original bounding box values:&quot;</span>\n<span class=\"k\">print</span> <span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">domain_left_edge</span>\n<span class=\"n\">ad</span> <span class=\"o\">=</span> <span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">all_data</span><span class=\"p\">()</span>\n<span class=\"k\">print</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">sum</span><span class=\"p\">(</span><span class=\"n\">ad</span><span class=\"p\">[(</span><span class=\"s1\">&#39;Gas&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Mass&#39;</span><span class=\"p\">)])</span>\n</pre></div>\n\n\n<p>And get:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">original</span> <span class=\"n\">bounding</span> <span class=\"n\">box</span> <span class=\"n\">values</span><span class=\"p\">:</span>\n<span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">1.</span> <span class=\"o\">-</span><span class=\"mf\">1.</span> <span class=\"o\">-</span><span class=\"mf\">1.</span><span class=\"p\">]</span> <span class=\"n\">code_length</span>\n<span class=\"mf\">0.271782814758</span> <span class=\"n\">code_mass</span>\n</pre></div>\n\n\n<p>There is still a single global i/o pass over all the particles in <code>_update_domain</code>, I have not checked if that's still necessary with a user-selected bounding box.  What happens with my change is the global bounding box is reset by the user-specified value.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-26T00:39:05.911678+00:00",
            "updated_on": "2015-03-26T00:39:05.924873+00:00",
            "id": 5888703
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/desika"
                    },
                    "html": {
                        "href": "https://bitbucket.org/desika/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/desika/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Desika Narayanan",
                "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}",
                "username": "desika"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5888863"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5888863"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5888703"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5888703"
                    }
                },
                "id": 5888703
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "ah nice!  i actually think i tried something like this earlier today, though made the (now obviously foolish!) mistake of something like:\n\n```\nbbox = ds.arr(bounding_box, 'code_length')\n```\nso - should I delete my PR?  or update my yt to your commit and then re-commit?",
                "html": "<p>ah nice!  i actually think i tried something like this earlier today, though made the (now obviously foolish!) mistake of something like:</p>\n<div class=\"codehilite\"><pre><span></span>bbox = ds.arr(bounding_box, &#39;code_length&#39;)\n</pre></div>\n\n\n<p>so - should I delete my PR?  or update my yt to your commit and then re-commit?</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-26T00:54:07.668948+00:00",
            "updated_on": "2015-03-26T00:54:07.704564+00:00",
            "id": 5888863
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5888888"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5888888"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5888863"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5888863"
                    }
                },
                "id": 5888863
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "You just need to pull from my fork and push to your fork.  The PR will auto-update after you push.\n\n\n```\n#!bash\n\n$ hg pull -B tipsy_bbox_fix https://bitbutcket.org/ngoldbaum/yt\n$ hg update tipsy_bbox_fix\n$ hg push -B tipsy_bbox_fix path_to_your_fork\n\n```\n\nPlease give it a test first of course.",
                "html": "<p>You just need to pull from my fork and push to your fork.  The PR will auto-update after you push.</p>\n<div class=\"codehilite\"><pre><span></span>$ hg pull -B tipsy_bbox_fix https://bitbutcket.org/ngoldbaum/yt\n$ hg update tipsy_bbox_fix\n$ hg push -B tipsy_bbox_fix path_to_your_fork\n</pre></div>\n\n\n<p>Please give it a test first of course.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-26T00:55:50.382855+00:00",
            "updated_on": "2015-03-26T00:57:54.723922+00:00",
            "id": 5888888
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/desika"
                    },
                    "html": {
                        "href": "https://bitbucket.org/desika/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/desika/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Desika Narayanan",
                "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}",
                "username": "desika"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5888946"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5888946"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5888888"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5888888"
                    }
                },
                "id": 5888888
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "Thanks Nathan!",
                "html": "<p>Thanks Nathan!</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-26T01:01:34.832979+00:00",
            "updated_on": "2015-03-26T01:01:34.878679+00:00",
            "id": 5888946
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5888959"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/desika/yt:bbde14a7de8a..cbbcdeed18f2?path=yt%2Ffrontends%2Ftipsy%2Fdata_structures.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5888959"
                }
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "Sorry, I made a mistake here.  This else block shouldn't be here since domain_left_edge and domain_right_edge are already set at this point.\n\nYou can pull from my tipsy_bbox_fix bookmark again to get the fix.",
                "html": "<p>Sorry, I made a mistake here.  This else block shouldn't be here since domain_left_edge and domain_right_edge are already set at this point.</p>\n<p>You can pull from my tipsy_bbox_fix bookmark again to get the fix.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-26T01:02:33.284724+00:00",
            "updated_on": "2015-03-26T01:02:33.296074+00:00",
            "inline": {
                "from": null,
                "path": "yt/frontends/tipsy/data_structures.py",
                "to": 113
            },
            "id": 5888959
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5889299"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5889299"
                }
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "Something went wrong, you should checkout http://hub.yt:8080/job/yt_testsuite/151/",
                "html": "<p>Something went wrong, you should checkout <a href=\"http://hub.yt:8080/job/yt_testsuite/151/\" rel=\"nofollow\">http://hub.yt:8080/job/yt_testsuite/151/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-26T01:42:32.738047+00:00",
            "updated_on": "2015-03-26T01:42:32.794058+00:00",
            "id": 5889299
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5889636"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5889636"
                }
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-26T02:23:35.341474+00:00",
            "updated_on": "2015-03-26T02:23:35.379176+00:00",
            "id": 5889636
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/chummels"
                    },
                    "html": {
                        "href": "https://bitbucket.org/chummels/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/chummels/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Cameron Hummels",
                "uuid": "{de871bb8-32e9-450a-b8c9-2b49a1334f16}",
                "username": "chummels"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5910397"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5910397"
                }
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "This looks great.  I'd ask you to document it somewhere so that people aside from us know about it, but since there are no docstrings associated with the TipsyDataset, it seems too much to ask you to write a whole thing of docstrings for it from scratch.",
                "html": "<p>This looks great.  I'd ask you to document it somewhere so that people aside from us know about it, but since there are no docstrings associated with the TipsyDataset, it seems too much to ask you to write a whole thing of docstrings for it from scratch.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-26T18:48:53.091836+00:00",
            "updated_on": "2015-03-26T18:48:53.100497+00:00",
            "id": 5910397
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5938364"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5938364"
                }
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-27T21:04:31.585065+00:00",
            "updated_on": "2015-03-27T21:04:31.737567+00:00",
            "id": 5938364
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/desika"
                    },
                    "html": {
                        "href": "https://bitbucket.org/desika/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/desika/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Desika Narayanan",
                "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}",
                "username": "desika"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/5941429"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-5941429"
                }
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "This last commit by Matt was the result of an offline conversation where we realized that the octree built when bounding_box is set didn't keep the new bounding_box dimensions (but rather the original domain dimensions).  Matt's commit fixes this.",
                "html": "<p>This last commit by Matt was the result of an offline conversation where we realized that the octree built when bounding_box is set didn't keep the new bounding_box dimensions (but rather the original domain dimensions).  Matt's commit fixes this.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-03-28T12:20:15.249881+00:00",
            "updated_on": "2015-03-28T12:20:15.593795+00:00",
            "id": 5941429
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/desika"
                    },
                    "html": {
                        "href": "https://bitbucket.org/desika/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/desika/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Desika Narayanan",
                "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}",
                "username": "desika"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/7739233"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-7739233"
                }
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "Hey All,\n\nI think there might be an issue that's related to this PR (though it might be unrelated).  If I run the following on the tipsy data set:\n\n```\nimport yt\nimport numpy as np\n\nfname = 'TipsyGalaxy/galaxy.00300'\n\n\nboxsize = 100\nbbox = [[-boxsize,boxsize],\n        [-boxsize,boxsize],\n        [-boxsize,boxsize]]\n\n\nds = yt.load(fname,bounding_box=bbox)\nds.index\n\n\n\npx = yt.ProjectionPlot(ds,\"z\",('deposit', 'Gas_density'),center='m')\npx.save('junk.z.png')\n```\n\nI'll get an image back out that has the galaxy as 50 cm big!   However, if I run the same code but replace the load command with:\n\n```\nds = yt.load(fname)\n```\n\nthen no problem.\n\nAnother way this manifests itself is if I load with the bounding_box set in the load command, then:\n\n```\nIn [11]: ds.length_unit\nOut[11]: 1.0 kpc\n\nIn [12]: ds.domain_left_edge\nOut[12]: YTArray([-100., -100., -100.]) code_length\n\nIn [13]: ds.domain_left_edge.in_units('kpc')\nOut[13]: YTArray([ -3.24077929e-20,  -3.24077929e-20,  -3.24077929e-20]) kpc\n```\n\nI've looked through frontends/tipsy/data_structures and can't seem to figure what line is doing this.  I was hoping someone might have a thought or hint on this.  \n\nAgain, this might not be related to this PR, but it sure seems similar.",
                "html": "<p>Hey All,</p>\n<p>I think there might be an issue that's related to this PR (though it might be unrelated).  If I run the following on the tipsy data set:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">yt</span>\n<span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"kn\">as</span> <span class=\"nn\">np</span>\n\n<span class=\"n\">fname</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;TipsyGalaxy/galaxy.00300&#39;</span>\n\n\n<span class=\"n\">boxsize</span> <span class=\"o\">=</span> <span class=\"mi\">100</span>\n<span class=\"n\">bbox</span> <span class=\"o\">=</span> <span class=\"p\">[[</span><span class=\"o\">-</span><span class=\"n\">boxsize</span><span class=\"p\">,</span><span class=\"n\">boxsize</span><span class=\"p\">],</span>\n        <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"n\">boxsize</span><span class=\"p\">,</span><span class=\"n\">boxsize</span><span class=\"p\">],</span>\n        <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"n\">boxsize</span><span class=\"p\">,</span><span class=\"n\">boxsize</span><span class=\"p\">]]</span>\n\n\n<span class=\"n\">ds</span> <span class=\"o\">=</span> <span class=\"n\">yt</span><span class=\"o\">.</span><span class=\"kp\">load</span><span class=\"p\">(</span><span class=\"n\">fname</span><span class=\"p\">,</span><span class=\"n\">bounding_box</span><span class=\"o\">=</span><span class=\"n\">bbox</span><span class=\"p\">)</span>\n<span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">index</span>\n\n\n\n<span class=\"n\">px</span> <span class=\"o\">=</span> <span class=\"n\">yt</span><span class=\"o\">.</span><span class=\"n\">ProjectionPlot</span><span class=\"p\">(</span><span class=\"n\">ds</span><span class=\"p\">,</span><span class=\"s2\">&quot;z&quot;</span><span class=\"p\">,(</span><span class=\"s1\">&#39;deposit&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Gas_density&#39;</span><span class=\"p\">),</span><span class=\"n\">center</span><span class=\"o\">=</span><span class=\"s1\">&#39;m&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">px</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">(</span><span class=\"s1\">&#39;junk.z.png&#39;</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>I'll get an image back out that has the galaxy as 50 cm big!   However, if I run the same code but replace the load command with:</p>\n<div class=\"codehilite\"><pre><span></span>ds = yt.load(fname)\n</pre></div>\n\n\n<p>then no problem.</p>\n<p>Another way this manifests itself is if I load with the bounding_box set in the load command, then:</p>\n<div class=\"codehilite\"><pre><span></span>In [11]: ds.length_unit\nOut[11]: 1.0 kpc\n\nIn [12]: ds.domain_left_edge\nOut[12]: YTArray([-100., -100., -100.]) code_length\n\nIn [13]: ds.domain_left_edge.in_units(&#39;kpc&#39;)\nOut[13]: YTArray([ -3.24077929e-20,  -3.24077929e-20,  -3.24077929e-20]) kpc\n</pre></div>\n\n\n<p>I've looked through frontends/tipsy/data_structures and can't seem to figure what line is doing this.  I was hoping someone might have a thought or hint on this.  </p>\n<p>Again, this might not be related to this PR, but it sure seems similar.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-06-23T15:45:35.511162+00:00",
            "updated_on": "2015-06-23T15:45:35.614631+00:00",
            "id": 7739233
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/7742713"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-7742713"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/7739233"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-7739233"
                    }
                },
                "id": 7739233
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "Can you bring this up again elsewhere? Either on the mailing list or by opening an issue. Comments on a merged PR have a much higher chance of being lost in the shuffle.",
                "html": "<p>Can you bring this up again elsewhere? Either on the mailing list or by opening an issue. Comments on a merged PR have a much higher chance of being lost in the shuffle.</p>",
                "markup": "markdown"
            },
            "created_on": "2015-06-23T17:40:21.507435+00:00",
            "updated_on": "2015-06-23T17:40:21.516914+00:00",
            "id": 7742713
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/desika"
                    },
                    "html": {
                        "href": "https://bitbucket.org/desika/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/desika/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Desika Narayanan",
                "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}",
                "username": "desika"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/7742879"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-7742879"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524/comments/7742713"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524/_/diff#comment-7742713"
                    }
                },
                "id": 7742713
            },
            "pullrequest": {
                "title": "Added functionality for a bounding_box for tipsy data",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1524"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1524"
                    }
                },
                "id": 1524
            },
            "content": {
                "raw": "no problem - done [here](https://bitbucket.org/yt_analysis/yt/issue/1035/defining-a-bounding-box-causes-units)!\n\n",
                "html": "<p>no problem - done <a href=\"https://bitbucket.org/yt_analysis/yt/issue/1035/defining-a-bounding-box-causes-units\">here</a>!</p>",
                "markup": "markdown"
            },
            "created_on": "2015-06-23T17:47:19.314254+00:00",
            "updated_on": "2015-06-23T17:47:19.372522+00:00",
            "id": 7742879
        }
    ]
}