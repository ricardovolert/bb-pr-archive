{
    "reason": "This functionality has been implemented in [PR 2482](https://bitbucket.org/yt_analysis/yt/pull-requests/2482)",
    "state": "DECLINED",
    "updated_on": "2017-01-12T16:37:26.817665+00:00",
    "comment_count": 22,
    "description": "",
    "created_on": "2016-06-02T19:47:51.033120+00:00",
    "task_count": 0,
    "merge_commit": null,
    "title": "Added halo catalog unit_registry saving and loading.",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
            },
            "html": {
                "href": "https://bitbucket.org/brittonsmith/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Britton Smith",
        "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
        "username": "brittonsmith"
    },
    "id": 2208,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/rasmii"
            },
            "html": {
                "href": "https://bitbucket.org/rasmii/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/rasmii/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Rasmi Elasmar",
        "uuid": "{59424e40-f551-4b09-9b47-69bbba6a036e}",
        "username": "rasmii"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/rasmii/yt-halo_catalog_unit_registry/commit/6e03082e0132"
                }
            },
            "hash": "6e03082e0132"
        },
        "repository": {
            "full_name": "rasmii/yt-halo_catalog_unit_registry",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/rasmii/yt-halo_catalog_unit_registry"
                },
                "html": {
                    "href": "https://bitbucket.org/rasmii/yt-halo_catalog_unit_registry"
                },
                "avatar": {
                    "href": "https://bitbucket.org/rasmii/yt-halo_catalog_unit_registry/avatar/32/"
                }
            },
            "name": "yt-halo_catalog_unit_registry",
            "uuid": "{57eb82b3-4d50-4bf1-bf56-9edf183ce7d7}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/ec92132823b0"
                }
            },
            "hash": "ec92132823b0"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19273044"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19273044"
                }
            },
            "pullrequest": {
                "title": "Added halo catalog unit_registry saving and loading.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
                    }
                },
                "id": 2208
            },
            "content": {
                "raw": "@brittonsmith is on vacation but we may want to wait to hear from him to review this.",
                "html": "<p><a href=\"/brittonsmith/\" rel=\"nofollow\" title=\"@brittonsmith\" class=\"mention\">Britton Smith</a> is on vacation but we may want to wait to hear from him to review this.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-06-02T20:01:00.952027+00:00",
            "updated_on": "2016-06-02T20:02:39.946399+00:00",
            "id": 19273044
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/rasmii"
                    },
                    "html": {
                        "href": "https://bitbucket.org/rasmii/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/rasmii/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Rasmi Elasmar",
                "uuid": "{59424e40-f551-4b09-9b47-69bbba6a036e}",
                "username": "rasmii"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19281552"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19281552"
                }
            },
            "pullrequest": {
                "title": "Added halo catalog unit_registry saving and loading.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
                    }
                },
                "id": 2208
            },
            "content": {
                "raw": "Worth noting that `out_file.attrs[\"unit_registry\"] = self.data_ds.unit_registry.to_json()` overwrites whatever is in that attr at the time. This effectively keeps the unit registry of the halo catalog in sync with whatever the unit registry of the Dataset it came from is, but I'm not sure if overwriting the unit_registry attr (and therefore the unit registry of the catalog) on save/load is good default behavior. I suppose someone can only define and use a custom unit registry for the halo catalog once it's loaded in memory, but it will be lost on save in favor of the Dataset unit registry. So maybe the way to make persistent changes to the halo catalog unit registry with this code is to make it to the parent Dataset. Is this a feature or a bug?",
                "html": "<p>Worth noting that <code>out_file.attrs[\"unit_registry\"] = self.data_ds.unit_registry.to_json()</code> overwrites whatever is in that attr at the time. This effectively keeps the unit registry of the halo catalog in sync with whatever the unit registry of the Dataset it came from is, but I'm not sure if overwriting the unit_registry attr (and therefore the unit registry of the catalog) on save/load is good default behavior. I suppose someone can only define and use a custom unit registry for the halo catalog once it's loaded in memory, but it will be lost on save in favor of the Dataset unit registry. So maybe the way to make persistent changes to the halo catalog unit registry with this code is to make it to the parent Dataset. Is this a feature or a bug?</p>",
                "markup": "markdown"
            },
            "created_on": "2016-06-03T00:30:29.414556+00:00",
            "updated_on": "2016-06-03T00:30:29.485036+00:00",
            "id": 19281552
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19281617"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19281617"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19281552"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19281552"
                    }
                },
                "id": 19281552
            },
            "pullrequest": {
                "title": "Added halo catalog unit_registry saving and loading.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
                    }
                },
                "id": 2208
            },
            "content": {
                "raw": "Is there ever a case when the halo catalog dataset should have different units than the dataset it was created from?",
                "html": "<p>Is there ever a case when the halo catalog dataset should have different units than the dataset it was created from?</p>",
                "markup": "markdown"
            },
            "created_on": "2016-06-03T00:35:36.296782+00:00",
            "updated_on": "2016-06-03T00:35:36.298797+00:00",
            "id": 19281617
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/rasmii"
                    },
                    "html": {
                        "href": "https://bitbucket.org/rasmii/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/rasmii/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Rasmi Elasmar",
                "uuid": "{59424e40-f551-4b09-9b47-69bbba6a036e}",
                "username": "rasmii"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19281683"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19281683"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19281617"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19281617"
                    }
                },
                "id": 19281617
            },
            "pullrequest": {
                "title": "Added halo catalog unit_registry saving and loading.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
                    }
                },
                "id": 2208
            },
            "content": {
                "raw": "Not sure -- that's a good point. I think this is good default behavior, and anyone who wants to deviate can do it explicitly when they run their analyses.",
                "html": "<p>Not sure -- that's a good point. I think this is good default behavior, and anyone who wants to deviate can do it explicitly when they run their analyses.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-06-03T00:40:03.456846+00:00",
            "updated_on": "2016-06-03T00:40:03.530548+00:00",
            "id": 19281683
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19285339"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19285339"
                }
            },
            "pullrequest": {
                "title": "Added halo catalog unit_registry saving and loading.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
                    }
                },
                "id": 2208
            },
            "content": {
                "raw": "Something went wrong, you should checkout https://tests.yt-project.org/job/yt_testsuite/520/",
                "html": "<p>Something went wrong, you should checkout <a href=\"https://tests.yt-project.org/job/yt_testsuite/520/\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_testsuite/520/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2016-06-03T04:32:44.811335+00:00",
            "updated_on": "2016-06-03T04:32:44.890305+00:00",
            "id": 19285339
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19677664"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19677664"
                }
            },
            "pullrequest": {
                "title": "Added halo catalog unit_registry saving and loading.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
                    }
                },
                "id": 2208
            },
            "content": {
                "raw": "@brittonsmith could I get you to take a look at this?",
                "html": "<p><a href=\"/brittonsmith/\" rel=\"nofollow\" title=\"@brittonsmith\" class=\"mention\">Britton Smith</a> could I get you to take a look at this?</p>",
                "markup": "markdown"
            },
            "created_on": "2016-06-13T15:43:16.442412+00:00",
            "updated_on": "2016-06-13T15:43:16.461054+00:00",
            "id": 19677664
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
                    },
                    "html": {
                        "href": "https://bitbucket.org/brittonsmith/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Britton Smith",
                "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
                "username": "brittonsmith"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19679665"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19679665"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19281552"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19281552"
                    }
                },
                "id": 19281552
            },
            "pullrequest": {
                "title": "Added halo catalog unit_registry saving and loading.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
                    }
                },
                "id": 2208
            },
            "content": {
                "raw": "This shouldn't be a problem since the unit registry was not being saved before at all.  This file is being opened in \"w\" mode, so it's already clobbering anything that was there.",
                "html": "<p>This shouldn't be a problem since the unit registry was not being saved before at all.  This file is being opened in \"w\" mode, so it's already clobbering anything that was there.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-06-13T16:14:10.478448+00:00",
            "updated_on": "2016-06-13T16:14:10.481495+00:00",
            "id": 19679665
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
                    },
                    "html": {
                        "href": "https://bitbucket.org/brittonsmith/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Britton Smith",
                "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
                "username": "brittonsmith"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19679830"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/rasmii/yt-halo_catalog_unit_registry:6e03082e0132..27783a435b49?path=yt%2Ffrontends%2Fhalo_catalog%2Fdata_structures.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19679830"
                }
            },
            "pullrequest": {
                "title": "Added halo catalog unit_registry saving and loading.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
                    }
                },
                "id": 2208
            },
            "content": {
                "raw": "This part looks fine.  You will also need to alter the function `_set_code_unit_attributes` (further down in this file) accordingly as well.  If you check out the function `set_units` in `yt/data_objects/static_output.py`, you can see the order in which things are called.",
                "html": "<p>This part looks fine.  You will also need to alter the function <code>_set_code_unit_attributes</code> (further down in this file) accordingly as well.  If you check out the function <code>set_units</code> in <code>yt/data_objects/static_output.py</code>, you can see the order in which things are called.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-06-13T16:16:58.555290+00:00",
            "updated_on": "2016-06-13T16:16:58.557968+00:00",
            "inline": {
                "from": null,
                "path": "yt/frontends/halo_catalog/data_structures.py",
                "to": 84
            },
            "id": 19679830
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
                    },
                    "html": {
                        "href": "https://bitbucket.org/brittonsmith/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Britton Smith",
                "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
                "username": "brittonsmith"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19679989"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/rasmii/yt-halo_catalog_unit_registry:None..None?path=yt%2Ffrontends%2Fhalo_catalog%2Fdata_structures.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19679989"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19679830"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19679830"
                    }
                },
                "id": 19679830
            },
            "pullrequest": {
                "title": "Added halo catalog unit_registry saving and loading.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
                    }
                },
                "id": 2208
            },
            "content": {
                "raw": "In there, you can see that `set_units` calls `set_code_units`, which overrides `code_length` (and others) with `self.length_unit` (and others).  This will require doing things in a reverse order since you would be setting `self.length_unit` from `code_length`, etc.",
                "html": "<p>In there, you can see that <code>set_units</code> calls <code>set_code_units</code>, which overrides <code>code_length</code> (and others) with <code>self.length_unit</code> (and others).  This will require doing things in a reverse order since you would be setting <code>self.length_unit</code> from <code>code_length</code>, etc.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-06-13T16:19:48.683434+00:00",
            "updated_on": "2016-06-13T16:19:48.687345+00:00",
            "inline": {
                "from": null,
                "path": "yt/frontends/halo_catalog/data_structures.py",
                "to": null
            },
            "id": 19679989
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/rasmii"
                    },
                    "html": {
                        "href": "https://bitbucket.org/rasmii/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/rasmii/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Rasmi Elasmar",
                "uuid": "{59424e40-f551-4b09-9b47-69bbba6a036e}",
                "username": "rasmii"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19680950"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/rasmii/yt-halo_catalog_unit_registry:None..None?path=yt%2Ffrontends%2Fhalo_catalog%2Fdata_structures.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19680950"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19679830"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19679830"
                    }
                },
                "id": 19679830
            },
            "pullrequest": {
                "title": "Added halo catalog unit_registry saving and loading.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
                    }
                },
                "id": 2208
            },
            "content": {
                "raw": "What's the best way to access the code_unit_attributes of the parent dataset? Would self.unit_system.base_units[length] yield the proper values, or is it using some other default? Is unit_system initialized at this point?",
                "html": "<p>What's the best way to access the code_unit_attributes of the parent dataset? Would self.unit_system.base_units[length] yield the proper values, or is it using some other default? Is unit_system initialized at this point?</p>",
                "markup": "markdown"
            },
            "created_on": "2016-06-13T16:38:12.075783+00:00",
            "updated_on": "2016-06-13T16:38:12.151012+00:00",
            "inline": {
                "from": null,
                "path": "yt/frontends/halo_catalog/data_structures.py",
                "to": null
            },
            "id": 19680950
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19681344"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19681344"
                }
            },
            "pullrequest": {
                "title": "Added halo catalog unit_registry saving and loading.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
                    }
                },
                "id": 2208
            },
            "content": {
                "raw": "All tests pass. Good job! https://tests.yt-project.org/job/yt_testsuite/558/",
                "html": "<p>All tests pass. Good job! <a href=\"https://tests.yt-project.org/job/yt_testsuite/558/\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_testsuite/558/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2016-06-13T16:46:16.291154+00:00",
            "updated_on": "2016-06-13T16:46:16.394661+00:00",
            "id": 19681344
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
                    },
                    "html": {
                        "href": "https://bitbucket.org/brittonsmith/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Britton Smith",
                "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
                "username": "brittonsmith"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19681470"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19681470"
                }
            },
            "pullrequest": {
                "title": "Added halo catalog unit_registry saving and loading.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
                    }
                },
                "id": 2208
            },
            "content": {
                "raw": "Hi @rasmii, this will be a nice improvement over the current system that saves everything to CGS and assumes it is that way on load.  As I mentioned in the email thread, all fields are converted to CGS before saving, so for this to be correct, that will also need to be changed as will the declaration of CGS as the incoming unit.  To generalizing the field units, have a look at `yt/frontends/halo_catalog/fields.py` and the values of `m_units`, `p_units`, etc.  I think you'll need to change those to be `code_mass`, `code_length`, etc.  For the saving, you'll probably want to save to whatever the base unit is.  This is happening in `yt/analysis_modules/halo_analysis/halo_catalog.py` in the `_run` function.\n\nAdditionally, the units are saved as attributes to the individual datasets, so it may be even safer to make use of those attributes when the data is read in.  I believe I have done this before.  I will check what I did and get back to you.",
                "html": "<p>Hi <a href=\"/rasmii/\" rel=\"nofollow\" title=\"@rasmii\" class=\"mention\">Rasmi Elasmar</a>, this will be a nice improvement over the current system that saves everything to CGS and assumes it is that way on load.  As I mentioned in the email thread, all fields are converted to CGS before saving, so for this to be correct, that will also need to be changed as will the declaration of CGS as the incoming unit.  To generalizing the field units, have a look at <code>yt/frontends/halo_catalog/fields.py</code> and the values of <code>m_units</code>, <code>p_units</code>, etc.  I think you'll need to change those to be <code>code_mass</code>, <code>code_length</code>, etc.  For the saving, you'll probably want to save to whatever the base unit is.  This is happening in <code>yt/analysis_modules/halo_analysis/halo_catalog.py</code> in the <code>_run</code> function.</p>\n<p>Additionally, the units are saved as attributes to the individual datasets, so it may be even safer to make use of those attributes when the data is read in.  I believe I have done this before.  I will check what I did and get back to you.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-06-13T16:48:27.958808+00:00",
            "updated_on": "2016-06-13T16:48:28.010073+00:00",
            "id": 19681470
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19681543"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19681543"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208/comments/19681470"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208/_/diff#comment-19681470"
                    }
                },
                "id": 19681470
            },
            "pullrequest": {
                "title": "Added halo catalog unit_registry saving and loading.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2208"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2208"
                    }
                },
                "id": 2208
            },
            "content": {
                "raw": "Also, if you don't feel like falling down this rabbit hole, the current units should be correct (in CGS), just not necessarily the same as the original dataset's units.",
                "html": "<p>Also, if you don't feel like falling down this rabbit hole, the current units should be correct (in CGS), just not necessarily the same as the original dataset's units.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-06-13T16:49:52.398195+00:00",
            "updated_on": "2016-06-13T16:49:52.404098+00:00",
            "id": 19681543
        }
    ]
}