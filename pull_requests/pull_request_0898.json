{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2014-05-14T12:23:24.848348+00:00",
    "comment_count": 9,
    "description": "This adds a simple ragged array / indexed array set of ufuncs.  The way this works is that if you have a set of arrays:\r\n\r\nvalues\r\nindices\r\nsizes\r\n\r\nwhat you can do is supply these three items to the function `index_unop` and it will return a set of return values of the same size as `sizes` where the operation has been applied.  The operations currently supported are `max`, `min`, `prod`, `sum`.",
    "created_on": "2014-05-12T12:52:12.629374+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/036f745796c1"
            }
        },
        "hash": "036f745796c1"
    },
    "title": "Adding first ragged array extension.",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
            },
            "html": {
                "href": "https://bitbucket.org/MatthewTurk/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Matt Turk",
        "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
        "username": "MatthewTurk"
    },
    "id": 898,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
            },
            "html": {
                "href": "https://bitbucket.org/MatthewTurk/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Matt Turk",
        "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
        "username": "MatthewTurk"
    },
    "source": {
        "branch": {
            "name": "yt-3.0"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/MatthewTurk/yt/commit/6d232a04fdc6"
                }
            },
            "hash": "6d232a04fdc6"
        },
        "repository": {
            "full_name": "MatthewTurk/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/MatthewTurk/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/MatthewTurk/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/MatthewTurk/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b5dfa70b-707c-4330-92a8-e3ea1bee18b3}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt-3.0"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/4d1488b8fa47"
                }
            },
            "hash": "4d1488b8fa47"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments/1852508"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898/_/diff#comment-1852508"
                }
            },
            "pullrequest": {
                "title": "Adding first ragged array extension.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898"
                    }
                },
                "id": 898
            },
            "content": {
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>",
                "markup": "markdown"
            },
            "created_on": "2014-05-12T13:17:44.125446+00:00",
            "updated_on": "2014-05-12T13:17:44.267114+00:00",
            "id": 1852508
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments/1852917"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898/_/diff#comment-1852917"
                }
            },
            "pullrequest": {
                "title": "Adding first ragged array extension.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898"
                    }
                },
                "id": 898
            },
            "content": {
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>",
                "markup": "markdown"
            },
            "created_on": "2014-05-12T13:47:27.701328+00:00",
            "updated_on": "2014-05-12T13:47:27.847399+00:00",
            "id": 1852917
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
                    },
                    "html": {
                        "href": "https://bitbucket.org/brittonsmith/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Britton Smith",
                "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
                "username": "brittonsmith"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments/1853738"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898/_/diff#comment-1853738"
                }
            },
            "pullrequest": {
                "title": "Adding first ragged array extension.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898"
                    }
                },
                "id": 898
            },
            "content": {
                "raw": "I'm having a hard time visualizing what this does.  Can you provide some example use cases and a sample script to use it?",
                "html": "<p>I'm having a hard time visualizing what this does.  Can you provide some example use cases and a sample script to use it?</p>",
                "markup": "markdown"
            },
            "created_on": "2014-05-12T14:49:17.839696+00:00",
            "updated_on": "2014-05-12T14:49:17.847466+00:00",
            "id": 1853738
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments/1853858"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898/_/diff#comment-1853858"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments/1853738"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898/_/diff#comment-1853738"
                    }
                },
                "id": 1853738
            },
            "pullrequest": {
                "title": "Adding first ragged array extension.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898"
                    }
                },
                "id": 898
            },
            "content": {
                "raw": "Sure!  Here's the use case I designed it for.\n\nImagine you have a set of halos, and a bunch of particle fields.  Let's say you want the mass of the particles in each halo.  What we can do is get a set of `indices`, which says, \"This refers to particle A\", and a set of `sizes`.  So the sizes would be of size `nhalos`, and would mean how many particles in each halo.  What this will do is take the field, the index array, and the set of sizes of the halos, and it will then return to you an array of size `nhalos` that is the result of the operation form each subarray.\n\nThis way, you can avoid splitting up an array based on what it belongs to, avoid copying data, and avoid doing manual fancy indexing if you're just going to have the result of a ufunc once you're done.\n\nThis will be used in the FOF routines -- we'll have a sorted set of indices, and a set of sizes, and we'll use that to compute properties.",
                "html": "<p>Sure!  Here's the use case I designed it for.</p>\n<p>Imagine you have a set of halos, and a bunch of particle fields.  Let's say you want the mass of the particles in each halo.  What we can do is get a set of <code>indices</code>, which says, \"This refers to particle A\", and a set of <code>sizes</code>.  So the sizes would be of size <code>nhalos</code>, and would mean how many particles in each halo.  What this will do is take the field, the index array, and the set of sizes of the halos, and it will then return to you an array of size <code>nhalos</code> that is the result of the operation form each subarray.</p>\n<p>This way, you can avoid splitting up an array based on what it belongs to, avoid copying data, and avoid doing manual fancy indexing if you're just going to have the result of a ufunc once you're done.</p>\n<p>This will be used in the FOF routines -- we'll have a sorted set of indices, and a set of sizes, and we'll use that to compute properties.</p>",
                "markup": "markdown"
            },
            "created_on": "2014-05-12T14:57:11.505635+00:00",
            "updated_on": "2014-05-12T14:57:11.512450+00:00",
            "id": 1853858
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments/1853874"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898/_/diff#comment-1853874"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments/1853858"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898/_/diff#comment-1853858"
                    }
                },
                "id": 1853858
            },
            "pullrequest": {
                "title": "Adding first ragged array extension.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898"
                    }
                },
                "id": 898
            },
            "content": {
                "raw": "Basically, what it gets rid of is doing things like:\n\n```\n#!python\nvalues = np.zeros(nhalos)\nfor i, array_indices in enumerate(set_of_indices):\n    values[i] = some_value_set[array_indices].sum()\n```",
                "html": "<p>Basically, what it gets rid of is doing things like:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">values</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">zeros</span><span class=\"p\">(</span><span class=\"n\">nhalos</span><span class=\"p\">)</span>\n<span class=\"k\">for</span> <span class=\"n\">i</span><span class=\"p\">,</span> <span class=\"n\">array_indices</span> <span class=\"ow\">in</span> <span class=\"nb\">enumerate</span><span class=\"p\">(</span><span class=\"n\">set_of_indices</span><span class=\"p\">):</span>\n    <span class=\"n\">values</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">some_value_set</span><span class=\"p\">[</span><span class=\"n\">array_indices</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">sum</span><span class=\"p\">()</span>\n</pre></div>",
                "markup": "markdown"
            },
            "created_on": "2014-05-12T14:58:20.774462+00:00",
            "updated_on": "2014-05-12T14:58:20.782444+00:00",
            "id": 1853874
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
                    },
                    "html": {
                        "href": "https://bitbucket.org/brittonsmith/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Britton Smith",
                "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
                "username": "brittonsmith"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments/1853915"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898/_/diff#comment-1853915"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments/1853874"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898/_/diff#comment-1853874"
                    }
                },
                "id": 1853874
            },
            "pullrequest": {
                "title": "Adding first ragged array extension.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898"
                    }
                },
                "id": 898
            },
            "content": {
                "raw": "Oh, nice.  That's cool!",
                "html": "<p>Oh, nice.  That's cool!</p>",
                "markup": "markdown"
            },
            "created_on": "2014-05-12T15:02:28.848581+00:00",
            "updated_on": "2014-05-12T15:02:28.859632+00:00",
            "id": 1853915
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
                    },
                    "html": {
                        "href": "https://bitbucket.org/brittonsmith/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Britton Smith",
                "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
                "username": "brittonsmith"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments/1853928"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/MatthewTurk/yt:4c3505c7c582..80b6a3399f45?path=yt%2Futilities%2Flib%2Ftests%2Ftest_ragged_arrays.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898/_/diff#comment-1853928"
                }
            },
            "pullrequest": {
                "title": "Adding first ragged array extension.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898"
                    }
                },
                "id": 898
            },
            "content": {
                "raw": "Is there any reason the results shouldn't be bitwise identical?",
                "html": "<p>Is there any reason the results shouldn't be bitwise identical?</p>",
                "markup": "markdown"
            },
            "created_on": "2014-05-12T15:04:25.024496+00:00",
            "updated_on": "2014-05-12T15:04:25.035673+00:00",
            "inline": {
                "from": null,
                "path": "yt/utilities/lib/tests/test_ragged_arrays.py",
                "to": 35
            },
            "id": 1853928
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments/1854307"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898/_/diff#comment-1854307"
                }
            },
            "pullrequest": {
                "title": "Adding first ragged array extension.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898"
                    }
                },
                "id": 898
            },
            "content": {
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>",
                "markup": "markdown"
            },
            "created_on": "2014-05-12T15:32:22.020629+00:00",
            "updated_on": "2014-05-12T15:32:22.141507+00:00",
            "id": 1854307
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments/1855314"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898/_/diff#comment-1855314"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898/comments/1853915"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898/_/diff#comment-1853915"
                    }
                },
                "id": 1853915
            },
            "pullrequest": {
                "title": "Adding first ragged array extension.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/898"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/898"
                    }
                },
                "id": 898
            },
            "content": {
                "raw": "As another followup, here's an example script using the FOF functionality in yt and PositionArrays and whatnot.\n\nhttp://paste.yt-project.org/show/4611/\n\nI get identical results for the three, and it takes 0.24 seconds to use `index_unop`, 320 seconds for the middle way, and 21.7 seconds for the third way.",
                "html": "<p>As another followup, here's an example script using the FOF functionality in yt and PositionArrays and whatnot.</p>\n<p><a href=\"http://paste.yt-project.org/show/4611/\" rel=\"nofollow\">http://paste.yt-project.org/show/4611/</a></p>\n<p>I get identical results for the three, and it takes 0.24 seconds to use <code>index_unop</code>, 320 seconds for the middle way, and 21.7 seconds for the third way.</p>",
                "markup": "markdown"
            },
            "created_on": "2014-05-12T16:58:49.468824+00:00",
            "updated_on": "2014-05-12T16:58:49.477323+00:00",
            "id": 1855314
        }
    ]
}