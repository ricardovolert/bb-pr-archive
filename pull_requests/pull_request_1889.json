{
    "links": {
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889/decline"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1889"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889/activity"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889/commits"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889/merge"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889/statuses"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889/comments"
        },
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889/diff"
        }
    },
    "task_count": 0,
    "source": {
        "repository": {
            "full_name": "dorislee0309/yt",
            "uuid": "{08ce75d6-3a24-4479-a94a-d9ca5875ccaf}",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/dorislee0309/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/dorislee0309/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/dorislee0309/yt/avatar/32/"
                }
            },
            "name": "yt"
        },
        "commit": {
            "hash": "e32f328ae2e7",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/dorislee0309/yt/commit/e32f328ae2e7"
                }
            }
        },
        "branch": {
            "name": "stable"
        }
    },
    "closed_by": {
        "username": "ngoldbaum",
        "type": "user",
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}"
    },
    "title": "fixed casting error for float and int64 multiplication in sdf class",
    "id": 1889,
    "comment_count": 4,
    "created_on": "2015-11-26T03:41:09.661874+00:00",
    "merge_commit": null,
    "comments": [
        {
            "content": {
                "markup": "markdown",
                "raw": "Hi Doris,\n\nThis is great, thank you! We don't have good testing for the SDF frontend, if you'd be interested in improving test coverage I think that would be very much appreciated.\n\nIt looks like you made your change on the \"stable\" branch, which is fine, but we normally want bugfixes to happen on the \"yt\" branch. Can you redo your change on the yt branch and reissue your pull request?\n\nAlternately, you could simply update this pull request to point at the stable branch, which will get rid of the bulk of the changes in the diff below and resolve the conflicts. We will handle cherry-picking the change onto the yt branch when we merge the pull request in.\n\nEither way, up to you.",
                "html": "<p>Hi Doris,</p>\n<p>This is great, thank you! We don't have good testing for the SDF frontend, if you'd be interested in improving test coverage I think that would be very much appreciated.</p>\n<p>It looks like you made your change on the \"stable\" branch, which is fine, but we normally want bugfixes to happen on the \"yt\" branch. Can you redo your change on the yt branch and reissue your pull request?</p>\n<p>Alternately, you could simply update this pull request to point at the stable branch, which will get rid of the bulk of the changes in the diff below and resolve the conflicts. We will handle cherry-picking the change onto the yt branch when we merge the pull request in.</p>\n<p>Either way, up to you.</p>"
            },
            "user": {
                "username": "ngoldbaum",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}"
            },
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889/comments/12187064"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1889/_/diff#comment-12187064"
                }
            },
            "created_on": "2015-11-26T03:48:57.636189+00:00",
            "updated_on": "2015-11-26T03:48:57.638087+00:00",
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1889"
                    }
                },
                "title": "fixed casting error for float and int64 multiplication in sdf class",
                "id": 1889
            },
            "type": "pullrequest_comment",
            "id": 12187064
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "Hi Nathan,\nOk I see that explains the differences. I submitted a new pull request with the patch. The imports are unchanged but it still shows up as diffs.\nThanks.\n",
                "html": "<p>Hi Nathan,\nOk I see that explains the differences. I submitted a new pull request with the patch. The imports are unchanged but it still shows up as diffs.\nThanks.</p>"
            },
            "user": {
                "username": "dorislee0309",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/dorislee0309"
                    },
                    "html": {
                        "href": "https://bitbucket.org/dorislee0309/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/dorislee0309/avatar/32/"
                    }
                },
                "display_name": "Doris Lee",
                "uuid": "{eb8b251f-b540-454b-aade-8e50c8c4cea8}"
            },
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889/comments/12187241"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1889/_/diff#comment-12187241"
                }
            },
            "created_on": "2015-11-26T04:03:27.330414+00:00",
            "updated_on": "2015-11-26T04:03:27.377122+00:00",
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1889"
                    }
                },
                "title": "fixed casting error for float and int64 multiplication in sdf class",
                "id": 1889
            },
            "type": "pullrequest_comment",
            "id": 12187241
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "OK, i'm declining this, let's continue discussion in the other pull request.",
                "html": "<p>OK, i'm declining this, let's continue discussion in the other pull request.</p>"
            },
            "user": {
                "username": "ngoldbaum",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}"
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889/comments/12187241"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1889/_/diff#comment-12187241"
                    }
                },
                "id": 12187241
            },
            "created_on": "2015-11-26T04:08:48.831401+00:00",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889/comments/12187310"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1889/_/diff#comment-12187310"
                }
            },
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1889"
                    }
                },
                "title": "fixed casting error for float and int64 multiplication in sdf class",
                "id": 1889
            },
            "type": "pullrequest_comment",
            "id": 12187310,
            "updated_on": "2015-11-26T04:08:48.833513+00:00"
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "Something went wrong, you should checkout http://tests.yt-project.org/job/yt_testsuite_dev/896/",
                "html": "<p>Something went wrong, you should checkout <a href=\"http://tests.yt-project.org/job/yt_testsuite_dev/896/\" rel=\"nofollow\">http://tests.yt-project.org/job/yt_testsuite_dev/896/</a></p>"
            },
            "user": {
                "username": "yt-fido",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}"
            },
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889/comments/12187645"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1889/_/diff#comment-12187645"
                }
            },
            "created_on": "2015-11-26T04:35:37.327099+00:00",
            "updated_on": "2015-11-26T04:35:37.461120+00:00",
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1889"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1889"
                    }
                },
                "title": "fixed casting error for float and int64 multiplication in sdf class",
                "id": 1889
            },
            "type": "pullrequest_comment",
            "id": 12187645
        }
    ],
    "reason": "Superseded by PR 1890",
    "type": "pullrequest",
    "close_source_branch": false,
    "state": "DECLINED",
    "description": "There seems to be a conflict in the sdf interface. self.parameters.get(\"a\", 1.0) returns a  np.float64, self.domain_left_edge returns numpy array with dtype as int64. \r\nThis is a problem with numpy 1.10.1, but works okay with the previous numpy 1.9.2 version that I was using. A simple cast before the multiplication fixes this. \r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-5-a485ba5f5c14> in <module>()\r\n----> 1 halo = darksky['ds14_a']['halos_a_1.0000'].load(bounding_box = \"None\", midx = 7)\r\n      2 type(halo)\r\n\r\n/global/project/projectdirs/astro250/doris/halo/darksky_catalog/darksky_catalog/dataset.pyc in load(self, bounding_box, midx)\r\n     77             midx = self.index_files[0]\r\n     78         index_file = _get_midx_filename(self.index_files, midx)\r\n---> 79         ds = yt.load(self.url, midx_filename = index_file)\r\n     80         return ds\r\n     81 \r\n\r\n/global/homes/d/dorislee/anaconda/lib/python2.7/site-packages/yt/convenience.pyc in load(*args, **kwargs)\r\n     82     candidates = find_lowest_subclasses(candidates)\r\n     83     if len(candidates) == 1:\r\n---> 84         return candidates[0](*args, **kwargs)\r\n     85     if len(candidates) == 0:\r\n     86         if ytcfg.get(\"yt\", \"enzo_db\") != '' \\\r\n\r\n/global/homes/d/dorislee/anaconda/lib/python2.7/site-packages/yt/frontends/sdf/data_structures.py in __init__(self, filename, dataset_type, n_ref, over_refine_factor, bounding_box, sdf_header, midx_filename, midx_header, midx_level, field_map, units_override)\r\n    113         dataset_type = prefix + 'sdf_particles'\r\n    114         super(SDFDataset, self).__init__(filename, dataset_type,\r\n--> 115                                          units_override=units_override)\r\n    116 \r\n    117     def _parse_parameter_file(self):\r\n\r\n/global/homes/d/dorislee/anaconda/lib/python2.7/site-packages/yt/data_objects/static_output.pyc in __init__(self, filename, dataset_type, file_style, units_override)\r\n    188 \r\n    189         self._create_unit_registry()\r\n--> 190         self._parse_parameter_file()\r\n    191         self.set_units()\r\n    192         self._setup_coordinate_handler()\r\n\r\n/global/homes/d/dorislee/anaconda/lib/python2.7/site-packages/yt/frontends/sdf/data_structures.py in _parse_parameter_file(self)\r\n    147                 self.domain_right_edge = np.array([\r\n    148                     +self.parameters.get(\"R%s\" % ax, R0) for ax in 'xyz'],dtype=np.int64)\r\n--> 149             self.domain_left_edge *= self.parameters.get(\"a\", 1.0)\r\n    150             self.domain_right_edge *= self.parameters.get(\"a\", 1.0)\r\n    151 \r\n\r\nTypeError: Cannot cast ufunc multiply output from dtype('float64') to dtype('int64') with casting rule 'same_kind'\r\n```",
    "author": {
        "username": "dorislee0309",
        "type": "user",
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/dorislee0309"
            },
            "html": {
                "href": "https://bitbucket.org/dorislee0309/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/dorislee0309/avatar/32/"
            }
        },
        "display_name": "Doris Lee",
        "uuid": "{eb8b251f-b540-454b-aade-8e50c8c4cea8}"
    },
    "updated_on": "2015-11-26T04:35:37.467128+00:00",
    "destination": {
        "repository": {
            "full_name": "yt_analysis/yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt"
        },
        "commit": {
            "hash": "03a54b627189",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/03a54b627189"
                }
            }
        },
        "branch": {
            "name": "yt"
        }
    }
}