{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2012-09-03T11:48:29.301123+00:00",
    "comment_count": 6,
    "description": "This is yet another attempt to get figures to look \"nice\" by default.  This new method is a bit messy, but no longer uses bbox_inches='tight', and keeps image sizes the same for a given aspect ratio.  \r\n\r\nI'm up to other suggestions that also work well for PW aspect ratios.\r\n\r\nUpdate #1: This attempts to fix some of the issues @devinsilvia was seeing.   This involves a lot of twiddling.\r\n\r\nUpdate #2:  Updating to earlier switch in scientific notation, as suggested by @ngoldbaum.",
    "created_on": "2012-08-29T21:55:11.856762+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/3840366c0379"
            }
        },
        "hash": "3840366c0379"
    },
    "title": "plot_window figure saving",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/253"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "id": 253,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/samskillman"
            },
            "html": {
                "href": "https://bitbucket.org/samskillman/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/samskillman/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Sam Skillman",
        "uuid": "{b03f9d96-1c52-4f21-bbdc-72f8e2a97a81}",
        "username": "samskillman"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/samskillman/yt/commit/e12ec7dbed9b"
                }
            },
            "hash": "e12ec7dbed9b"
        },
        "repository": {
            "full_name": "samskillman/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/samskillman/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/samskillman/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/samskillman/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{f1df6f31-13ed-4d98-a11d-1954f1f1fdfa}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/80ff2fb3b5eb"
                }
            },
            "hash": "80ff2fb3b5eb"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/devinsilvia"
                    },
                    "html": {
                        "href": "https://bitbucket.org/devinsilvia/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/devinsilvia/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Devin Silvia",
                "uuid": "{de10a23c-34a0-4f76-a031-b5ec3b2a34db}",
                "username": "devinsilvia"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/comments/16150"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/253/_/diff#comment-16150"
                }
            },
            "pullrequest": {
                "title": "plot_window figure saving",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/253"
                    }
                },
                "id": 253
            },
            "content": {
                "raw": "I left the following comment on the actual changeset, but then I realized it should probably go here.\n\n\"In testing it on my rectangular (4x2) data set, it appears to cut off the y-axis label. This almost looks to be a positioning issue as there is a lot of white space to the right of the color bar. An example: http://i.imgur.com/efWIQ.png\n\nOne other thing to note is that the axis labels now seem rather small given the overall size of the image.\"",
                "html": "<p>I left the following comment on the actual changeset, but then I realized it should probably go here.</p>\n<p>\"In testing it on my rectangular (4x2) data set, it appears to cut off the y-axis label. This almost looks to be a positioning issue as there is a lot of white space to the right of the color bar. An example: <a href=\"http://i.imgur.com/efWIQ.png\">http://i.imgur.com/efWIQ.png</a></p>\n<p>One other thing to note is that the axis labels now seem rather small given the overall size of the image.\"</p>\n",
                "markup": "creole"
            },
            "created_on": "2012-08-30T01:57:07.417180+00:00",
            "updated_on": "2012-08-30T01:57:07.534863+00:00",
            "id": 16150
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/comments/16272"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/253/_/diff#comment-16272"
                }
            },
            "pullrequest": {
                "title": "plot_window figure saving",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/253"
                    }
                },
                "id": 253
            },
            "content": {
                "raw": "@samskillman, @devinsilvia, do you think we should keep trying to fix up the plots, or just say that in particular situations it's not going to by-default produce a nice one?  Can we enumerate both the issues that were being fixed by this, and the new ones introduced?",
                "html": "<p><a href=\"/samskillman/\" rel=\"nofollow\" title=\"@samskillman\" class=\"mention\">Sam Skillman</a>, <a href=\"/devinsilvia/\" rel=\"nofollow\" title=\"@devinsilvia\" class=\"mention\">Devin Silvia</a>, do you think we should keep trying to fix up the plots, or just say that in particular situations it's not going to by-default produce a nice one?  Can we enumerate both the issues that were being fixed by this, and the new ones introduced?</p>\n",
                "markup": "creole"
            },
            "created_on": "2012-08-31T11:24:34.964146+00:00",
            "updated_on": "2012-08-31T11:24:34.970043+00:00",
            "id": 16272
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/devinsilvia"
                    },
                    "html": {
                        "href": "https://bitbucket.org/devinsilvia/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/devinsilvia/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Devin Silvia",
                "uuid": "{de10a23c-34a0-4f76-a031-b5ec3b2a34db}",
                "username": "devinsilvia"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/comments/16316"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/253/_/diff#comment-16316"
                }
            },
            "pullrequest": {
                "title": "plot_window figure saving",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/253"
                    }
                },
                "id": 253
            },
            "content": {
                "raw": "I think this mainly came about in an effort to make sure that rectangular domains plot \"correctly\" in the sense that they didn't forcibly have a bunch of empty white space.  That was solved, but the issues that crept in were that sometimes the figure labels would end up cut off.  bbox_inches='tight' solved that issue, but then resulted in non-consistent image sizes.  This current pull request keeps the size of the image consistent, but now we're back to label positioning issues.\n\nGiven this, I think we might want to decide which features are most important.  As a producer of often rectangular simulations, I'd like to keep the functionality such that there isn't a bunch of empty white space.  After that, I'm not entirely decided as to what acceptable sacrifices might be for default plot behaviors.\n\nOne potential solution to the current issues might be to reposition the colorbar based on the aspect ratio (a solution which I somewhat crudely implemented a while back, but wasn't something that was reliable enough that I wanted to put it into yt).  ",
                "html": "<p>I think this mainly came about in an effort to make sure that rectangular domains plot \"correctly\" in the sense that they didn't forcibly have a bunch of empty white space.  That was solved, but the issues that crept in were that sometimes the figure labels would end up cut off.  bbox_inches='tight' solved that issue, but then resulted in non-consistent image sizes.  This current pull request keeps the size of the image consistent, but now we're back to label positioning issues.</p>\n<p>Given this, I think we might want to decide which features are most important.  As a producer of often rectangular simulations, I'd like to keep the functionality such that there isn't a bunch of empty white space.  After that, I'm not entirely decided as to what acceptable sacrifices might be for default plot behaviors.</p>\n<p>One potential solution to the current issues might be to reposition the colorbar based on the aspect ratio (a solution which I somewhat crudely implemented a while back, but wasn't something that was reliable enough that I wanted to put it into yt).  </p>\n",
                "markup": "creole"
            },
            "created_on": "2012-08-31T17:46:43.467787+00:00",
            "updated_on": "2012-08-31T17:46:43.645145+00:00",
            "id": 16316
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/comments/16319"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/253/_/diff#comment-16319"
                }
            },
            "pullrequest": {
                "title": "plot_window figure saving",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/253"
                    }
                },
                "id": 253
            },
            "content": {
                "raw": "Are there any matplotlib-based solutions that would work?  For instance, isn't there a way to mandate an aspect ratio with bbox_inches='tight' ?  This might be a good question for the matplotlib mailing list.",
                "html": "<p>Are there any matplotlib-based solutions that would work?  For instance, isn't there a way to mandate an aspect ratio with bbox_inches='tight' ?  This might be a good question for the matplotlib mailing list.</p>\n",
                "markup": "creole"
            },
            "created_on": "2012-08-31T17:49:48.555906+00:00",
            "updated_on": "2012-08-31T17:49:48.565957+00:00",
            "id": 16319
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/devinsilvia"
                    },
                    "html": {
                        "href": "https://bitbucket.org/devinsilvia/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/devinsilvia/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Devin Silvia",
                "uuid": "{de10a23c-34a0-4f76-a031-b5ec3b2a34db}",
                "username": "devinsilvia"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/comments/16380"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/253/_/diff#comment-16380"
                }
            },
            "pullrequest": {
                "title": "plot_window figure saving",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/253"
                    }
                },
                "id": 253
            },
            "content": {
                "raw": "This fixes things for my data.  There is a bit of excess white space right of the colorbar, but it is doubtful that any default set up will work flawlessly.  I'd be +1 at this point for thing being pushed as they stand.  Dunno if there is anyone else out there with rectangular domains that might want to test this as well.",
                "html": "<p>This fixes things for my data.  There is a bit of excess white space right of the colorbar, but it is doubtful that any default set up will work flawlessly.  I'd be +1 at this point for thing being pushed as they stand.  Dunno if there is anyone else out there with rectangular domains that might want to test this as well.</p>\n",
                "markup": "creole"
            },
            "created_on": "2012-09-01T21:55:31.685790+00:00",
            "updated_on": "2012-09-01T21:55:31.836813+00:00",
            "id": 16380
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253/comments/16443"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/253/_/diff#comment-16443"
                }
            },
            "pullrequest": {
                "title": "plot_window figure saving",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/253"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/253"
                    }
                },
                "id": 253
            },
            "content": {
                "raw": "Hi Sam, just took a look at the outputs of this and I think my earlier reservations are unwarranted.  This looks good for all of the axis ratios I tried :)\n\nI just have one suggestion before accepting the PR: change the exponent to switch to scientific notation in the tick labels when labels go outside the range [10^-4, 10^3].  If you don't, you get crappy-looking plots like this: http://i.imgur.com/oTGOe.png\n\nI think all you need to do is apply this diff: http://paste.yt-project.org/show/2667.  After applying the diff, you'll get this instead: http://i.imgur.com/IoRMu.png",
                "html": "<p>Hi Sam, just took a look at the outputs of this and I think my earlier reservations are unwarranted.  This looks good for all of the axis ratios I tried :)</p>\n<p>I just have one suggestion before accepting the PR: change the exponent to switch to scientific notation in the tick labels when labels go outside the range [10^-4, 10^3].  If you don't, you get crappy-looking plots like this: <a href=\"http://i.imgur.com/oTGOe.png\">http://i.imgur.com/oTGOe.png</a></p>\n<p>I think all you need to do is apply this diff: <a href=\"http://paste.yt-project.org/show/2667\">http://paste.yt-project.org/show/2667</a>.  After applying the diff, you'll get this instead: <a href=\"http://i.imgur.com/IoRMu.png\">http://i.imgur.com/IoRMu.png</a></p>\n",
                "markup": "creole"
            },
            "created_on": "2012-09-02T22:48:37.309600+00:00",
            "updated_on": "2012-09-02T22:48:37.316406+00:00",
            "id": 16443
        }
    ]
}