{
    "reason": "Was hoping this would be the PR that got superseded, but it was the other one.  I will reissue with a description that combines both.",
    "state": "DECLINED",
    "updated_on": "2016-08-19T14:21:19.736933+00:00",
    "comment_count": 6,
    "description": "This is the least invasive fix for Issue #1258 that I can think of.  The crux of this is no longer passing a dataset's unit_registry to the cosmology calculator, allowing it to maintain its own unit system where the comoving and proper frames are equal to each other.  This is how things were being done for compound light rays (from multiple datasets) and the like and this change just makes the behavior of simple light rays (from single datasets) consistent with that.\r\n\r\nIn addition to this, I have removed two instances of identical code and replaced with a call to a single function, `deltaz_forward`.  I have also changed `deltaz_forward` to take a smarter initial guess using Hubble's Law instead of a constant value.  Also, make sure that all omega values are floats, which wasn't the case.",
    "created_on": "2016-08-12T13:03:25.674216+00:00",
    "task_count": 0,
    "merge_commit": null,
    "title": "[bugfix] fix cosmology splice redshift/distance calculation (closes Issue #1258)",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
            },
            "html": {
                "href": "https://bitbucket.org/brittonsmith/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Britton Smith",
        "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
        "username": "brittonsmith"
    },
    "id": 2336,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
            },
            "html": {
                "href": "https://bitbucket.org/brittonsmith/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Britton Smith",
        "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
        "username": "brittonsmith"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/brittonsmith/yt/commit/28caefec8b07"
                }
            },
            "hash": "28caefec8b07"
        },
        "repository": {
            "full_name": "brittonsmith/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/brittonsmith/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/brittonsmith/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/brittonsmith/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{a3a98ec1-6936-4db5-8667-658e17c1eaca}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/9d20cd224c72"
                }
            },
            "hash": "9d20cd224c72"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/comments/22299319"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336/_/diff#comment-22299319"
                }
            },
            "pullrequest": {
                "title": "[bugfix] fix cosmology splice redshift/distance calculation (closes Issue #1258)",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336"
                    }
                },
                "id": 2336
            },
            "content": {
                "raw": "I agree that this is definitely the easiest way to fix this.\n\nWe should probably add some warnings and caveats to the docstrings and documentation that unitful data output from the cosmology calculator can only be converted to comoving units correctly at z=0.",
                "html": "<p>I agree that this is definitely the easiest way to fix this.</p>\n<p>We should probably add some warnings and caveats to the docstrings and documentation that unitful data output from the cosmology calculator can only be converted to comoving units correctly at z=0.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-08-12T16:13:04.429548+00:00",
            "updated_on": "2016-08-12T16:13:04.431920+00:00",
            "id": 22299319
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/madcpf"
                    },
                    "html": {
                        "href": "https://bitbucket.org/madcpf/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/madcpf/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Pengfei Chen",
                "uuid": "{0927c036-14f3-4c8b-a63f-7ab861270f0a}",
                "username": "madcpf"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/comments/22314402"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336/_/diff#comment-22314402"
                }
            },
            "pullrequest": {
                "title": "[bugfix] fix cosmology splice redshift/distance calculation (closes Issue #1258)",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336"
                    }
                },
                "id": 2336
            },
            "content": {
                "raw": "Thank you very much, Britton! This fixes the problem.",
                "html": "<p>Thank you very much, Britton! This fixes the problem.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-08-13T00:00:41.996464+00:00",
            "updated_on": "2016-08-13T00:00:42.045993+00:00",
            "id": 22314402
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
                    },
                    "html": {
                        "href": "https://bitbucket.org/brittonsmith/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Britton Smith",
                "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
                "username": "brittonsmith"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/comments/22345770"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336/_/diff#comment-22345770"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/comments/22299319"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336/_/diff#comment-22299319"
                    }
                },
                "id": 22299319
            },
            "pullrequest": {
                "title": "[bugfix] fix cosmology splice redshift/distance calculation (closes Issue #1258)",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336"
                    }
                },
                "id": 2336
            },
            "content": {
                "raw": "I've added a warning that the user should take care to know what reference frame their calculations are supposed to be in.",
                "html": "<p>I've added a warning that the user should take care to know what reference frame their calculations are supposed to be in.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-08-15T13:40:18.847211+00:00",
            "updated_on": "2016-08-15T13:40:18.849416+00:00",
            "id": 22345770
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/comments/22350747"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336/_/diff#comment-22350747"
                }
            },
            "pullrequest": {
                "title": "[bugfix] fix cosmology splice redshift/distance calculation (closes Issue #1258)",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336"
                    }
                },
                "id": 2336
            },
            "content": {
                "raw": "Docs were built for this PR. See https://tests.yt-project.org/job/yt_docs/1137/\nDocs build visible at https://tests.yt-project.org/job/yt_docs/1137/artifact/sandbox/doc/build/html/index.html",
                "html": "<p>Docs were built for this PR. See <a href=\"https://tests.yt-project.org/job/yt_docs/1137/\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_docs/1137/</a>\nDocs build visible at <a href=\"https://tests.yt-project.org/job/yt_docs/1137/artifact/sandbox/doc/build/html/index.html\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_docs/1137/artifact/sandbox/doc/build/html/index.html</a></p>",
                "markup": "markdown"
            },
            "created_on": "2016-08-15T15:05:11.423587+00:00",
            "updated_on": "2016-08-15T15:05:11.496716+00:00",
            "id": 22350747
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
                    },
                    "html": {
                        "href": "https://bitbucket.org/brittonsmith/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Britton Smith",
                "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
                "username": "brittonsmith"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/comments/22580795"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336/_/diff#comment-22580795"
                }
            },
            "pullrequest": {
                "title": "[bugfix] fix cosmology splice redshift/distance calculation (closes Issue #1258)",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336"
                    }
                },
                "id": 2336
            },
            "content": {
                "raw": "I'm going to pull this into PR #2315 so I can respond to comments on that PR without doing work that will conflict with this.",
                "html": "<p>I'm going to pull this into PR #2315 so I can respond to comments on that PR without doing work that will conflict with this.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-08-19T10:52:11.975825+00:00",
            "updated_on": "2016-08-19T10:52:11.981977+00:00",
            "id": 22580795
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336/comments/22592124"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336/_/diff#comment-22592124"
                }
            },
            "pullrequest": {
                "title": "[bugfix] fix cosmology splice redshift/distance calculation (closes Issue #1258)",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2336"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2336"
                    }
                },
                "id": 2336
            },
            "content": {
                "raw": "Docs were built for this PR. See https://tests.yt-project.org/job/yt_docs/1158/\nDocs build visible at https://tests.yt-project.org/job/yt_docs/1158/artifact/sandbox/doc/build/html/index.html",
                "html": "<p>Docs were built for this PR. See <a href=\"https://tests.yt-project.org/job/yt_docs/1158/\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_docs/1158/</a>\nDocs build visible at <a href=\"https://tests.yt-project.org/job/yt_docs/1158/artifact/sandbox/doc/build/html/index.html\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_docs/1158/artifact/sandbox/doc/build/html/index.html</a></p>",
                "markup": "markdown"
            },
            "created_on": "2016-08-19T14:21:19.634110+00:00",
            "updated_on": "2016-08-19T14:21:19.724555+00:00",
            "id": 22592124
        }
    ]
}