{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2012-11-15T20:42:15.241175+00:00",
    "comment_count": 7,
    "description": "This should allow us to write images with arbitrary numbers of period characters (e.g. basename.middlename.png).\r\n\r\nUPDATE: I've implemented Matt's suggestion, @jzuhone @samskillman does this fix your issues with athena outputs?",
    "created_on": "2012-11-12T19:03:55.940693+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/e0fea3dd9635"
            }
        },
        "hash": "e0fea3dd9635"
    },
    "title": "Fixing the way we find image filename suffixes.  Closes #439.",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
            },
            "html": {
                "href": "https://bitbucket.org/MatthewTurk/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Matt Turk",
        "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
        "username": "MatthewTurk"
    },
    "id": 334,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt/commit/9a13943aae04"
                }
            },
            "hash": "9a13943aae04"
        },
        "repository": {
            "full_name": "ngoldbaum/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/ngoldbaum/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/ngoldbaum/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{cb18d7d9-ab77-4e80-81ed-8d32a945e0ef}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/8cb9af8d00ee"
                }
            },
            "hash": "8cb9af8d00ee"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/jzuhone"
                    },
                    "html": {
                        "href": "https://bitbucket.org/jzuhone/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/jzuhone/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "John ZuHone",
                "uuid": "{0c51edfa-e317-432f-bbef-7401c6e2aa8a}",
                "username": "jzuhone"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/comments/41555"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334/_/diff#comment-41555"
                }
            },
            "pullrequest": {
                "title": "Fixing the way we find image filename suffixes.  Closes #439.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334"
                    }
                },
                "id": 334
            },
            "content": {
                "raw": "Hi Nathan,\n\nI've tried this out on some Athena vtk files, and it actually yields the same error. The reason for this is pretty straightforward: __repr__ for both GDF and Athena return a string for the parameter file with the suffix stripped off. So, for example, if your Athena filename is \"kh.0030.vtk\", \"pf\" will return \"kh.0030\". So, I think your change would work for pf's where the suffix isn't stripped, but for files where they are stripped it just yields the same result. \n\nI'm not sure the best way to resolve this at the moment. @samskillman, any thoughts on this?\n\n",
                "html": "<p>Hi Nathan,</p>\n<p>I've tried this out on some Athena vtk files, and it actually yields the same error. The reason for this is pretty straightforward: <strong>repr</strong> for both GDF and Athena return a string for the parameter file with the suffix stripped off. So, for example, if your Athena filename is \"kh.0030.vtk\", \"pf\" will return \"kh.0030\". So, I think your change would work for pf's where the suffix isn't stripped, but for files where they are stripped it just yields the same result. </p>\n<p>I'm not sure the best way to resolve this at the moment. <a href=\"/samskillman/\" rel=\"nofollow\" title=\"@samskillman\" class=\"mention\">Sam Skillman</a>, any thoughts on this?</p>",
                "markup": "markdown"
            },
            "created_on": "2012-11-14T00:33:16.223244+00:00",
            "updated_on": "2012-11-14T00:33:16.231715+00:00",
            "id": 41555
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/comments/42385"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334/_/diff#comment-42385"
                }
            },
            "pullrequest": {
                "title": "Fixing the way we find image filename suffixes.  Closes #439.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334"
                    }
                },
                "id": 334
            },
            "content": {
                "raw": "What happens if you do splitext[0] ?\n\n    print os.path.splitext(\"something.another.002.vtk\")\n    ('something.another.002', '.vtk')\n",
                "html": "<p>What happens if you do splitext[0] ?</p>\n<div class=\"codehilite\"><pre><span></span>print os.path.splitext(&quot;something.another.002.vtk&quot;)\n(&#39;something.another.002&#39;, &#39;.vtk&#39;)\n</pre></div>",
                "markup": "markdown"
            },
            "created_on": "2012-11-14T20:45:38.200787+00:00",
            "updated_on": "2012-11-14T20:45:38.205451+00:00",
            "id": 42385
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/jzuhone"
                    },
                    "html": {
                        "href": "https://bitbucket.org/jzuhone/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/jzuhone/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "John ZuHone",
                "uuid": "{0c51edfa-e317-432f-bbef-7401c6e2aa8a}",
                "username": "jzuhone"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/comments/42390"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334/_/diff#comment-42390"
                }
            },
            "pullrequest": {
                "title": "Fixing the way we find image filename suffixes.  Closes #439.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334"
                    }
                },
                "id": 334
            },
            "content": {
                "raw": "The problem here is that the name in question isn't \n\n`os.path.splitext(\"something.another.002.vtk\")`\n\nbut\n\n`os.path.splitext(\"something.another.002\")`\n\n",
                "html": "<p>The problem here is that the name in question isn't </p>\n<p><code>os.path.splitext(\"something.another.002.vtk\")</code></p>\n<p>but</p>\n<p><code>os.path.splitext(\"something.another.002\")</code></p>",
                "markup": "markdown"
            },
            "created_on": "2012-11-14T20:49:39.517483+00:00",
            "updated_on": "2012-11-14T20:50:52.227799+00:00",
            "id": 42390
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/comments/42394"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334/_/diff#comment-42394"
                }
            },
            "pullrequest": {
                "title": "Fixing the way we find image filename suffixes.  Closes #439.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334"
                    }
                },
                "id": 334
            },
            "content": {
                "raw": "Oh, I see.  One idea would be to whitelist possible extensions.  For instance, something like:\n\n    ext_list = dict((e,e) for e in ['png', 'pdf', 'eps', 'jpg'])\n    suffix = ext_list.get(os.path.splitext(name)[1], \"\")",
                "html": "<p>Oh, I see.  One idea would be to whitelist possible extensions.  For instance, something like:</p>\n<div class=\"codehilite\"><pre><span></span>ext_list = dict((e,e) for e in [&#39;png&#39;, &#39;pdf&#39;, &#39;eps&#39;, &#39;jpg&#39;])\nsuffix = ext_list.get(os.path.splitext(name)[1], &quot;&quot;)\n</pre></div>",
                "markup": "markdown"
            },
            "created_on": "2012-11-14T20:58:27.937126+00:00",
            "updated_on": "2012-11-14T20:58:27.947309+00:00",
            "id": 42394
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/comments/42413"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334/_/diff#comment-42413"
                }
            },
            "pullrequest": {
                "title": "Fixing the way we find image filename suffixes.  Closes #439.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334"
                    }
                },
                "id": 334
            },
            "content": {
                "raw": "Here's more terse and clear:\n\n    suffix = os.path.splitext(name)[1]\n    suffix = suffix if suffix in ['png', 'tiff', 'jpg'] else ''",
                "html": "<p>Here's more terse and clear:</p>\n<div class=\"codehilite\"><pre><span></span>suffix = os.path.splitext(name)[1]\nsuffix = suffix if suffix in [&#39;png&#39;, &#39;tiff&#39;, &#39;jpg&#39;] else &#39;&#39;\n</pre></div>",
                "markup": "markdown"
            },
            "created_on": "2012-11-14T21:22:17.065835+00:00",
            "updated_on": "2012-11-14T21:22:17.075672+00:00",
            "id": 42413
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/comments/43352"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334/_/diff#comment-43352"
                }
            },
            "pullrequest": {
                "title": "Fixing the way we find image filename suffixes.  Closes #439.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334"
                    }
                },
                "id": 334
            },
            "content": {
                "raw": "I think this should work.",
                "html": "<p>I think this should work.</p>",
                "markup": "markdown"
            },
            "created_on": "2012-11-15T18:52:07.617194+00:00",
            "updated_on": "2012-11-15T18:52:07.623211+00:00",
            "id": 43352
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/jzuhone"
                    },
                    "html": {
                        "href": "https://bitbucket.org/jzuhone/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/jzuhone/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "John ZuHone",
                "uuid": "{0c51edfa-e317-432f-bbef-7401c6e2aa8a}",
                "username": "jzuhone"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334/comments/43452"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334/_/diff#comment-43452"
                }
            },
            "pullrequest": {
                "title": "Fixing the way we find image filename suffixes.  Closes #439.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/334"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/334"
                    }
                },
                "id": 334
            },
            "content": {
                "raw": "Sorry I didn't get to this in time--yes, it did fix things. Thanks!",
                "html": "<p>Sorry I didn't get to this in time--yes, it did fix things. Thanks!</p>",
                "markup": "markdown"
            },
            "created_on": "2012-11-15T20:42:15.064576+00:00",
            "updated_on": "2012-11-15T20:42:15.069569+00:00",
            "id": 43452
        }
    ]
}