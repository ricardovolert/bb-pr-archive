{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2017-01-31T18:58:32.223233+00:00",
    "comment_count": 2,
    "description": "This fixes an issue reported by Jonathan Slavin on the mailing list.\r\n\r\nSince PR 2251 (https://bitbucket.org/yt_analysis/yt/pull-requests/2251), dataset\r\nattributes that contain ndarray data are managed using the\r\n`MutableAttribute` descriptor. This ensures that it's impossible for a user to\r\naccidentally overwrite simulation metadata, which can happen unintentionally if\r\n(say) someone creates a reference to the attribute and then mutates\r\n*that*. Unfortunately this also makes it more difficult to mutate these\r\nattributes when we *want* to, like when we are setting them in the various\r\nfrontends. Unfortunately this design leads to silent brokenness when we *do* try\r\nto mutate a MutableAttribute via indexing in a frontend - since we are only\r\nmutating a copy and not the original data stored in the MutableAttribute.\r\n\r\nI think I've found all of the places in frontends where we try to mutate a\r\nMutableAttribute via indexing rather than attribute setting.\r\n\r\nIf someone has ideas about how to do this in a way that's less surprising to\r\nfrontend authors, I'd very much appreciate some advice.",
    "created_on": "2017-01-25T17:44:08.437670+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/2e2dcac8a83a"
            }
        },
        "hash": "2e2dcac8a83a"
    },
    "title": "Mutate MutableAttribute instances via attribute setting rather than indexing",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2501"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "id": 2501,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt/commit/fce3ce84ec14"
                }
            },
            "hash": "fce3ce84ec14"
        },
        "repository": {
            "full_name": "ngoldbaum/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/ngoldbaum/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/ngoldbaum/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{cb18d7d9-ab77-4e80-81ed-8d32a945e0ef}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/12ab7e374fcb"
                }
            },
            "hash": "12ab7e374fcb"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/atmyers"
                    },
                    "html": {
                        "href": "https://bitbucket.org/atmyers/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/atmyers/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Andrew Myers",
                "uuid": "{651c5647-b78f-4cd9-8d9a-5d6e8c9ac8d3}",
                "username": "atmyers"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501/comments/30642487"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2501/_/diff#comment-30642487"
                }
            },
            "pullrequest": {
                "title": "Mutate MutableAttribute instances via attribute setting rather than indexing",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2501"
                    }
                },
                "id": 2501
            },
            "content": {
                "raw": "Would it make sense for things like domain_left_edge to start off as regular numpy arrays, and then get converted to MutableAttributes after the dataset is instantiated (maybe in a _finalize() method or something like that?). ",
                "html": "<p>Would it make sense for things like domain_left_edge to start off as regular numpy arrays, and then get converted to MutableAttributes after the dataset is instantiated (maybe in a _finalize() method or something like that?). </p>",
                "markup": "markdown"
            },
            "created_on": "2017-01-31T18:31:11.346301+00:00",
            "updated_on": "2017-01-31T18:31:11.350143+00:00",
            "id": 30642487
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501/comments/30642664"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2501/_/diff#comment-30642664"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501/comments/30642487"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2501/_/diff#comment-30642487"
                    }
                },
                "id": 30642487
            },
            "pullrequest": {
                "title": "Mutate MutableAttribute instances via attribute setting rather than indexing",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2501"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2501"
                    }
                },
                "id": 2501
            },
            "content": {
                "raw": "That may work, but I'd prefer we get this merged in as-is so we can do a yt 3.3.4 release with this fixed. We should definitely come back to doing this smarter afterwards.",
                "html": "<p>That may work, but I'd prefer we get this merged in as-is so we can do a yt 3.3.4 release with this fixed. We should definitely come back to doing this smarter afterwards.</p>",
                "markup": "markdown"
            },
            "created_on": "2017-01-31T18:34:45.856046+00:00",
            "updated_on": "2017-01-31T18:34:45.859392+00:00",
            "id": 30642664
        }
    ]
}