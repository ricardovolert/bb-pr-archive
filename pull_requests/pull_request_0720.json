{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2014-03-14T15:48:57.897186+00:00",
    "comment_count": 2,
    "description": "The primary feature of this PR is the addition of the ability for detected particle fields to get their units from the data files if they are available.  The is currently only fully functional with the HaloCatalog frontend.  Since this frontend writes out field units in the output file, we can read these in so as to give units to field previously unknown to yt.  This is a precursor to adding this functionality to grid fields and other frontends that might support it.\r\n\r\n### Additional Bug Fixes/Features ###\r\n1. Casting absolute index to int64 to fix overflow for deep hierarchies.\r\n\r\n2. Re-added the SN_Colour Enzo field.\r\n\r\n3.  Changed Rockstar halo finder to check that particle masses are equal to within a tolerance instead of exactly equal.  Particle masses that should be the same were often off by a very tiny amount, causing Rockstar to quit due to not supporting multi-mass particles.\r\n\r\n4. Small corner cases for calculating virial quantities in the HaloCatalog.\r\n\r\nSorry for the omnibus.  Things piled up.",
    "created_on": "2014-03-14T10:08:47.288614+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/fa45403f8a39"
            }
        },
        "hash": "fa45403f8a39"
    },
    "title": "Detected Field Units for HaloCatalog Frontend and other Bug Fixes",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/720/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/720/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/720"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/720/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/720/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/720/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/720/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/720/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/720"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/720/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
            },
            "html": {
                "href": "https://bitbucket.org/MatthewTurk/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Matt Turk",
        "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
        "username": "MatthewTurk"
    },
    "id": 720,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
            },
            "html": {
                "href": "https://bitbucket.org/brittonsmith/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Britton Smith",
        "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
        "username": "brittonsmith"
    },
    "source": {
        "branch": {
            "name": "yt-3.0"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/brittonsmith/yt/commit/5f6fd78389bd"
                }
            },
            "hash": "5f6fd78389bd"
        },
        "repository": {
            "full_name": "brittonsmith/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/brittonsmith/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/brittonsmith/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/brittonsmith/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{a3a98ec1-6936-4db5-8667-658e17c1eaca}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt-3.0"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/4fdf65441a28"
                }
            },
            "hash": "4fdf65441a28"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/720/comments/1425808"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/brittonsmith/yt:5f6fd78389bd..4fdf65441a28?path=yt%2Fanalysis_modules%2Fhalo_finding%2Frockstar%2Frockstar.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/720/_/diff#comment-1425808"
                }
            },
            "pullrequest": {
                "title": "Detected Field Units for HaloCatalog Frontend and other Bug Fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/720"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/720"
                    }
                },
                "id": 720
            },
            "content": {
                "raw": "What was the usual jitter?",
                "html": "<p>What was the usual jitter?</p>",
                "markup": "markdown"
            },
            "created_on": "2014-03-14T12:51:16.712912+00:00",
            "updated_on": "2014-03-14T12:51:16.723235+00:00",
            "inline": {
                "from": null,
                "path": "yt/analysis_modules/halo_finding/rockstar/rockstar.py",
                "to": 258
            },
            "id": 1425808
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/720/comments/1425852"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/brittonsmith/yt:5f6fd78389bd..4fdf65441a28?path=yt%2Fdata_objects%2Fstatic_output.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/720/_/diff#comment-1425852"
                }
            },
            "pullrequest": {
                "title": "Detected Field Units for HaloCatalog Frontend and other Bug Fixes",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/720"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/720"
                    }
                },
                "id": 720
            },
            "content": {
                "raw": "I know I wrote this code, so I don't have much of a leg to stand on, but do you think it would be clearer as a list comprehension, or is it fine as is?\n\n```\n#!python\nunits = set([self.field_units.get((s, field), \"\") for s in union])\n```",
                "html": "<p>I know I wrote this code, so I don't have much of a leg to stand on, but do you think it would be clearer as a list comprehension, or is it fine as is?</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">units</span> <span class=\"o\">=</span> <span class=\"nb\">set</span><span class=\"p\">([</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field_units</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">((</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"p\">),</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">)</span> <span class=\"k\">for</span> <span class=\"n\">s</span> <span class=\"ow\">in</span> <span class=\"n\">union</span><span class=\"p\">])</span>\n</pre></div>",
                "markup": "markdown"
            },
            "created_on": "2014-03-14T12:55:17.642997+00:00",
            "updated_on": "2014-03-14T12:55:17.653990+00:00",
            "inline": {
                "from": null,
                "path": "yt/data_objects/static_output.py",
                "to": 352
            },
            "id": 1425852
        }
    ]
}