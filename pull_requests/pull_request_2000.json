{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2016-02-24T22:18:43.555365+00:00",
    "comment_count": 7,
    "description": "This fixes a couple of issues with ParticlePlot pointed out by @yihaochen in Issue 1172. This also fixes issue 1173. You can now make particle plots with filtered particle fields, like so:\r\n\r\n\r\n```\r\n#!python\r\n\r\nimport yt\r\nfrom yt.data_objects.particle_filters import add_particle_filter\r\n\r\ndef formed_star(pfilter, data):\r\n    filter = data[\"all\", \"creation_time\"] > 0\r\n    return filter\r\n\r\nadd_particle_filter(\"formed_star\", function=formed_star, filtered_type='all',\r\n                    requires=[\"creation_time\"])\r\n\r\nds = yt.load('IsolatedGalaxy/galaxy0030/galaxy0030')\r\nds.add_particle_filter('formed_star')\r\n\r\np = yt.ParticlePlot(ds, 'particle_position_y', 'particle_position_z', ('formed_star', 'particle_mass'))\r\np.zoom(75.0)\r\np.show()\r\n\r\n```",
    "created_on": "2016-02-23T00:36:57.900315+00:00",
    "task_count": 1,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/0d84f831f09a"
            }
        },
        "hash": "0d84f831f09a"
    },
    "title": "Patch ParticlePlot to work with filtered fields. Closes #1172. Closes #1173. ",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/xarthisius"
            },
            "html": {
                "href": "https://bitbucket.org/xarthisius/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/xarthisius/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Kacper Kowalik",
        "uuid": "{26af8f1d-35b3-46ce-9939-09915b06e31f}",
        "username": "xarthisius"
    },
    "id": 2000,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/atmyers"
            },
            "html": {
                "href": "https://bitbucket.org/atmyers/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/atmyers/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Andrew Myers",
        "uuid": "{651c5647-b78f-4cd9-8d9a-5d6e8c9ac8d3}",
        "username": "atmyers"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/atmyers/yt/commit/3372ff5ade46"
                }
            },
            "hash": "3372ff5ade46"
        },
        "repository": {
            "full_name": "atmyers/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/atmyers/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/atmyers/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/atmyers/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{14866916-6c53-4d06-95e1-89d30c798c08}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/dda193582d6c"
                }
            },
            "hash": "dda193582d6c"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/comments/14878646"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000/_/diff#comment-14878646"
                }
            },
            "pullrequest": {
                "title": "Patch ParticlePlot to work with filtered fields. Closes #1172. Closes #1173. ",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000"
                    }
                },
                "id": 2000
            },
            "content": {
                "raw": "Any chance we can get a test for this?",
                "html": "<p>Any chance we can get a test for this?</p>",
                "markup": "markdown"
            },
            "created_on": "2016-02-23T00:45:34.945431+00:00",
            "updated_on": "2016-02-23T00:45:34.949083+00:00",
            "id": 14878646
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yihaochen"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yihaochen/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yihaochen/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Yi-Hao Chen",
                "uuid": "{a764fe55-fa1b-42b5-9e6d-dc0a473c4630}",
                "username": "yihaochen"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/comments/14878791"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000/_/diff#comment-14878791"
                }
            },
            "pullrequest": {
                "title": "Patch ParticlePlot to work with filtered fields. Closes #1172. Closes #1173. ",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000"
                    }
                },
                "id": 2000
            },
            "content": {
                "raw": "Thanks for fixing that!",
                "html": "<p>Thanks for fixing that!</p>",
                "markup": "markdown"
            },
            "created_on": "2016-02-23T00:52:18.638061+00:00",
            "updated_on": "2016-02-23T00:52:18.697418+00:00",
            "id": 14878791
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/comments/14879861"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000/_/diff#comment-14879861"
                }
            },
            "pullrequest": {
                "title": "Patch ParticlePlot to work with filtered fields. Closes #1172. Closes #1173. ",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000"
                    }
                },
                "id": 2000
            },
            "content": {
                "raw": "All tests pass. Good job! https://tests.yt-project.org/job/yt_testsuite_dev/1312/",
                "html": "<p>All tests pass. Good job! <a href=\"https://tests.yt-project.org/job/yt_testsuite_dev/1312/\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_testsuite_dev/1312/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2016-02-23T01:41:36.911733+00:00",
            "updated_on": "2016-02-23T01:41:36.990082+00:00",
            "id": 14879861
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/comments/14880751"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000/_/diff#comment-14880751"
                }
            },
            "pullrequest": {
                "title": "Patch ParticlePlot to work with filtered fields. Closes #1172. Closes #1173. ",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000"
                    }
                },
                "id": 2000
            },
            "content": {
                "raw": "All tests pass. Good job! https://tests.yt-project.org/job/yt_testsuite_dev/1313/",
                "html": "<p>All tests pass. Good job! <a href=\"https://tests.yt-project.org/job/yt_testsuite_dev/1313/\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_testsuite_dev/1313/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2016-02-23T02:41:50.163598+00:00",
            "updated_on": "2016-02-23T02:41:50.236213+00:00",
            "id": 14880751
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/xarthisius"
                    },
                    "html": {
                        "href": "https://bitbucket.org/xarthisius/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/xarthisius/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Kacper Kowalik",
                "uuid": "{26af8f1d-35b3-46ce-9939-09915b06e31f}",
                "username": "xarthisius"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/comments/14977470"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000/_/diff#comment-14977470"
                }
            },
            "pullrequest": {
                "title": "Patch ParticlePlot to work with filtered fields. Closes #1172. Closes #1173. ",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000"
                    }
                },
                "id": 2000
            },
            "content": {
                "raw": "New tests fail during writing answers:\n\n```\nPlotWindowAttribute_galaxy0030_all_ParticleProjectionPlot_('formed_star', 'particle_mass')_x_set_log_[(('particle_mass', False), {})]_ ... ERROR\nPlotWindowAttribute_galaxy0030_all_ParticleProjectionPlot_('formed_star', 'particle_mass')_y_set_log_[(('particle_mass', False), {})]_ ... ERROR\nPlotWindowAttribute_galaxy0030_all_ParticleProjectionPlot_('formed_star', 'particle_mass')_z_set_log_[(('particle_mass', False), {})]_ ... ERROR\nFailure: ImportError (No module named test_particle_plot) ... ERROR\n\n======================================================================\nERROR: PlotWindowAttribute_galaxy0030_all_ParticleProjectionPlot_('formed_star', 'particle_mass')_x_set_log_[(('particle_mass', False), {})]_\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/usr/lib64/python2.7/site-packages/nose/case.py\", line 197, in runTest\n    self.test(*self.arg)\n  File \"/tmp/blah/yt/utilities/answer_testing/framework.py\", line 331, in __call__\n    nv = self.run()\n  File \"/tmp/blah/yt/utilities/answer_testing/framework.py\", line 748, in run\n    attr(*self.attr_args[0], **self.attr_args[1])\nIndexError: list index out of range\n```\n\nto reproduce:\n\n```\nnosetests --local-dir=/mnt/yt/answers/ \\\n  -v --with-answer-testing --answer-big-data --local \\\n  yt/visualization/tests/test_particle_plot.py:test_particle_projection_filter \\\n  --answer-name=local_pw_304 --answer-store\n```",
                "html": "<p>New tests fail during writing answers:</p>\n<div class=\"codehilite\"><pre><span></span>PlotWindowAttribute_galaxy0030_all_ParticleProjectionPlot_(&#39;formed_star&#39;, &#39;particle_mass&#39;)_x_set_log_[((&#39;particle_mass&#39;, False), {})]_ ... ERROR\nPlotWindowAttribute_galaxy0030_all_ParticleProjectionPlot_(&#39;formed_star&#39;, &#39;particle_mass&#39;)_y_set_log_[((&#39;particle_mass&#39;, False), {})]_ ... ERROR\nPlotWindowAttribute_galaxy0030_all_ParticleProjectionPlot_(&#39;formed_star&#39;, &#39;particle_mass&#39;)_z_set_log_[((&#39;particle_mass&#39;, False), {})]_ ... ERROR\nFailure: ImportError (No module named test_particle_plot) ... ERROR\n\n======================================================================\nERROR: PlotWindowAttribute_galaxy0030_all_ParticleProjectionPlot_(&#39;formed_star&#39;, &#39;particle_mass&#39;)_x_set_log_[((&#39;particle_mass&#39;, False), {})]_\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File &quot;/usr/lib64/python2.7/site-packages/nose/case.py&quot;, line 197, in runTest\n    self.test(*self.arg)\n  File &quot;/tmp/blah/yt/utilities/answer_testing/framework.py&quot;, line 331, in __call__\n    nv = self.run()\n  File &quot;/tmp/blah/yt/utilities/answer_testing/framework.py&quot;, line 748, in run\n    attr(*self.attr_args[0], **self.attr_args[1])\nIndexError: list index out of range\n</pre></div>\n\n\n<p>to reproduce:</p>\n<div class=\"codehilite\"><pre><span></span>nosetests --local-dir=/mnt/yt/answers/ \\\n  -v --with-answer-testing --answer-big-data --local \\\n  yt/visualization/tests/test_particle_plot.py:test_particle_projection_filter \\\n  --answer-name=local_pw_304 --answer-store\n</pre></div>",
                "markup": "markdown"
            },
            "created_on": "2016-02-24T21:12:51.944426+00:00",
            "updated_on": "2016-02-24T21:12:51.947042+00:00",
            "id": 14977470
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/comments/14977562"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000/_/diff#comment-14977562"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/comments/14977470"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000/_/diff#comment-14977470"
                    }
                },
                "id": 14977470
            },
            "pullrequest": {
                "title": "Patch ParticlePlot to work with filtered fields. Closes #1172. Closes #1173. ",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000"
                    }
                },
                "id": 2000
            },
            "content": {
                "raw": "This looks like an issue with the way it's computing the name, right?",
                "html": "<p>This looks like an issue with the way it's computing the name, right?</p>",
                "markup": "markdown"
            },
            "created_on": "2016-02-24T21:15:19.577201+00:00",
            "updated_on": "2016-02-24T21:15:19.606957+00:00",
            "id": 14977562
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/atmyers"
                    },
                    "html": {
                        "href": "https://bitbucket.org/atmyers/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/atmyers/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Andrew Myers",
                "uuid": "{651c5647-b78f-4cd9-8d9a-5d6e8c9ac8d3}",
                "username": "atmyers"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/comments/14978445"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000/_/diff#comment-14978445"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000/comments/14977470"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000/_/diff#comment-14977470"
                    }
                },
                "id": 14977470
            },
            "pullrequest": {
                "title": "Patch ParticlePlot to work with filtered fields. Closes #1172. Closes #1173. ",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2000"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2000"
                    }
                },
                "id": 2000
            },
            "content": {
                "raw": "Should be fixed now.",
                "html": "<p>Should be fixed now.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-02-24T21:39:20.493098+00:00",
            "updated_on": "2016-02-24T21:39:20.495577+00:00",
            "id": 14978445
        }
    ]
}