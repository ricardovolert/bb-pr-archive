{
    "links": {
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/decline"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/activity"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/commits"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/merge"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/statuses"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments"
        },
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/diff"
        }
    },
    "task_count": 0,
    "source": {
        "repository": {
            "full_name": "ngoldbaum/yt",
            "uuid": "{cb18d7d9-ab77-4e80-81ed-8d32a945e0ef}",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/ngoldbaum/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/ngoldbaum/yt/avatar/32/"
                }
            },
            "name": "yt"
        },
        "commit": {
            "hash": "8097072897b9",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt/commit/8097072897b9"
                }
            }
        },
        "branch": {
            "name": "yt"
        }
    },
    "closed_by": {
        "username": "chummels",
        "type": "user",
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/chummels"
            },
            "html": {
                "href": "https://bitbucket.org/chummels/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/chummels/avatar/32/"
            }
        },
        "display_name": "chummels",
        "uuid": "{de871bb8-32e9-450a-b8c9-2b49a1334f16}"
    },
    "title": "Gadget cosmology simulation unit fixes",
    "id": 1710,
    "comment_count": 18,
    "created_on": "2015-08-19T20:24:07.819677+00:00",
    "merge_commit": {
        "hash": "14a4cacf4dfa",
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/14a4cacf4dfa"
            }
        }
    },
    "comments": [
        {
            "content": {
                "markup": "markdown",
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>"
            },
            "user": {
                "username": "yt-fido",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}"
            },
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9229144"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9229144"
                }
            },
            "created_on": "2015-08-19T22:01:11.258270+00:00",
            "updated_on": "2015-08-19T22:01:11.313766+00:00",
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9229144
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>"
            },
            "user": {
                "username": "yt-fido",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}"
            },
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9229914"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9229914"
                }
            },
            "created_on": "2015-08-19T22:42:33.561133+00:00",
            "updated_on": "2015-08-19T22:42:33.620697+00:00",
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9229914
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "why do you want the cosmological defaults in terms of `h`?  why not just `s`, `kpccm`, and `g`? or is that how gadget cosmological outputs are saved?",
                "html": "<p>why do you want the cosmological defaults in terms of <code>h</code>?  why not just <code>s</code>, <code>kpccm</code>, and <code>g</code>? or is that how gadget cosmological outputs are saved?</p>"
            },
            "user": {
                "username": "chummels",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/chummels"
                    },
                    "html": {
                        "href": "https://bitbucket.org/chummels/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/chummels/avatar/32/"
                    }
                },
                "display_name": "chummels",
                "uuid": "{de871bb8-32e9-450a-b8c9-2b49a1334f16}"
            },
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9297909"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9297909"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:8097072897b9..5e5edba3739c?path=yt%2Ffrontends%2Fgadget%2Fdata_structures.py"
                }
            },
            "created_on": "2015-08-22T05:22:30.624851+00:00",
            "updated_on": "2015-08-22T05:22:30.632125+00:00",
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "inline": {
                "to": 111,
                "path": "yt/frontends/gadget/data_structures.py",
                "from": null
            },
            "type": "pullrequest_comment",
            "id": 9297909
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "I guess I could add a comment, but I made it that way because they correspond to the gadget input parameters (e.g. `UnitLength_in_cm`, `UnitMass_in_g` etc..). These are actually misnomers in cosmology simulations since all quantities are in comoving scaled units (i.e. factors of h). This is all as far as I could tell looking at Bobby's simulations and thinking about their units.\n\nI'm happy to convert these to physical units in all cases, but Bobby told me that these choices made more sense to him working with this sort of data.",
                "html": "<p>I guess I could add a comment, but I made it that way because they correspond to the gadget input parameters (e.g. <code>UnitLength_in_cm</code>, <code>UnitMass_in_g</code> etc..). These are actually misnomers in cosmology simulations since all quantities are in comoving scaled units (i.e. factors of h). This is all as far as I could tell looking at Bobby's simulations and thinking about their units.</p>\n<p>I'm happy to convert these to physical units in all cases, but Bobby told me that these choices made more sense to him working with this sort of data.</p>"
            },
            "user": {
                "username": "ngoldbaum",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}"
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9297909"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9297909"
                    }
                },
                "id": 9297909
            },
            "created_on": "2015-08-22T05:28:13.786043+00:00",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9297922"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9297922"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:None..None?path=yt%2Ffrontends%2Fgadget%2Fdata_structures.py"
                }
            },
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "inline": {
                "to": null,
                "path": "yt/frontends/gadget/data_structures.py",
                "from": null
            },
            "type": "pullrequest_comment",
            "id": 9297922,
            "updated_on": "2015-08-22T05:28:13.795294+00:00"
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "yeah i think keeping the defaults in terms of h is a good idea -- usually unit length, time etc. are in terms of h-inverse as well\n",
                "html": "<p>yeah i think keeping the defaults in terms of h is a good idea -- usually unit length, time etc. are in terms of h-inverse as well</p>"
            },
            "user": {
                "username": "desika",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/desika"
                    },
                    "html": {
                        "href": "https://bitbucket.org/desika/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/desika/avatar/32/"
                    }
                },
                "display_name": "Desika Narayanan",
                "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}"
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9297922"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9297922"
                    }
                },
                "id": 9297922
            },
            "created_on": "2015-08-22T19:58:26.988806+00:00",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9299530"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9299530"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:None..None?path=yt%2Ffrontends%2Fgadget%2Fdata_structures.py"
                }
            },
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "inline": {
                "to": null,
                "path": "yt/frontends/gadget/data_structures.py",
                "from": null
            },
            "type": "pullrequest_comment",
            "id": 9299530,
            "updated_on": "2015-08-22T19:58:27.048159+00:00"
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "sorry to be an hg dolt, but how can i pull this particular commit from your fork @ngoldbaum?  what's the fork name/hash id?",
                "html": "<p>sorry to be an hg dolt, but how can i pull this particular commit from your fork <a href=\"/ngoldbaum/\" rel=\"nofollow\" title=\"@ngoldbaum\" class=\"mention\">Nathan Goldbaum</a>?  what's the fork name/hash id?</p>"
            },
            "user": {
                "username": "desika",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/desika"
                    },
                    "html": {
                        "href": "https://bitbucket.org/desika/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/desika/avatar/32/"
                    }
                },
                "display_name": "Desika Narayanan",
                "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}"
            },
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9299531"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9299531"
                }
            },
            "created_on": "2015-08-22T19:58:39.897257+00:00",
            "updated_on": "2015-08-22T19:58:39.966012+00:00",
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9299531
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "Click on the tab \"commits\".  Then just copy the hash of the top commit (ie the more recent commit).  Locally, type into a shell while you're in your yt path (yt-hg):\n\n\n```\n#!python\n\nhg pull https://bitbucket.org/ngoldbaum/yt/branch/yt -r <hash_of_commit>\n```\n",
                "html": "<p>Click on the tab \"commits\".  Then just copy the hash of the top commit (ie the more recent commit).  Locally, type into a shell while you're in your yt path (yt-hg):</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">hg</span> <span class=\"n\">pull</span> <span class=\"n\">https</span><span class=\"p\">:</span><span class=\"o\">//</span><span class=\"n\">bitbucket</span><span class=\"o\">.</span><span class=\"n\">org</span><span class=\"o\">/</span><span class=\"n\">ngoldbaum</span><span class=\"o\">/</span><span class=\"n\">yt</span><span class=\"o\">/</span><span class=\"n\">branch</span><span class=\"o\">/</span><span class=\"n\">yt</span> <span class=\"o\">-</span><span class=\"n\">r</span> <span class=\"o\">&lt;</span><span class=\"n\">hash_of_commit</span><span class=\"o\">&gt;</span>\n</pre></div>"
            },
            "user": {
                "username": "chummels",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/chummels"
                    },
                    "html": {
                        "href": "https://bitbucket.org/chummels/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/chummels/avatar/32/"
                    }
                },
                "display_name": "chummels",
                "uuid": "{de871bb8-32e9-450a-b8c9-2b49a1334f16}"
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9299531"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9299531"
                    }
                },
                "id": 9299531
            },
            "created_on": "2015-08-22T20:12:06.468274+00:00",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9299550"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9299550"
                }
            },
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9299550,
            "updated_on": "2015-08-22T20:12:22.695654+00:00"
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "And then `hg update` so your working directory is updated to the pull request.",
                "html": "<p>And then <code>hg update</code> so your working directory is updated to the pull request.</p>"
            },
            "user": {
                "username": "ngoldbaum",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}"
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9299550"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9299550"
                    }
                },
                "id": 9299550
            },
            "created_on": "2015-08-22T20:23:22.704200+00:00",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9299565"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9299565"
                }
            },
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9299565,
            "updated_on": "2015-08-22T20:23:22.712729+00:00"
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "You can check that you're on the right commit by doing `hg summary`.\n\nI see we don't have explicit documentation for this in the developer guide and we really should since it comes up a lot.",
                "html": "<p>You can check that you're on the right commit by doing <code>hg summary</code>.</p>\n<p>I see we don't have explicit documentation for this in the developer guide and we really should since it comes up a lot.</p>"
            },
            "user": {
                "username": "ngoldbaum",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}"
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9299565"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9299565"
                    }
                },
                "id": 9299565
            },
            "created_on": "2015-08-22T20:25:38.178083+00:00",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9299569"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9299569"
                }
            },
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9299569,
            "updated_on": "2015-08-22T20:25:38.185159+00:00"
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "hey all - these are the (slightly pprinted) offline email conversation i had with @ngoldbaum\n\nI dug up a gadget reader that Phil Hopkins wrote a while ago that has a few random hacks I've put in:\n\nhttp://paste.yt-project.org/show/5832/\n\nwhere sqrt(a) seems to come in as you suggested it should around line 162.  \n\nRunning pfh_readsnap to look at velocities of (what I think is the cosmological gadget ds I gave to yt datasets):\n\n```\nIn [21]: dum['v']\n\nOut[21]: \n\narray([[ 450.48074341,  -18.39207077,  139.27827454],\n\n       [ 456.05810547,  -30.1567421 ,  189.43196106],\n\n       [ 424.99307251,  -38.61084366,  224.60083008],\n\n       ..., \n\n       [-173.42573547, -341.2416687 , -614.8447876 ],\n\n       [-162.60665894, -335.75714111, -614.21270752],\n\n       [-142.8842926 , -345.15133667, -629.56384277]])\n```\n\nif I look at what comes from this PR\n\n\n```\nIn [5]: dum = ad[('PartType0', 'particle_velocity')]\n\n\nIn [6]: dum\n\nOut[6]: \n\nYTArray([[ 450.48074341,  -18.39207077,  139.27827454],\n\n       [ 456.05810547,  -30.1567421 ,  189.43196106],\n\n       [ 424.99307251,  -38.61084366,  224.60083008],\n\n       ..., \n\n       [-173.42573547, -341.2416687 , -614.8447876 ],\n\n       [-162.60665894, -335.75714111, -614.21270752],\n\n       [-142.8842926 , -345.15133667, -629.56384277]]) code_velocity\n```\n\nso this seems good to me.  nice find @ngoldbaum and @rthompson !\n\nedit: the reasoning behind using this gadgetreader was to be another verification source beyond @rthompson's [pygadgetreader](https://bitbucket.org/rthompson/pygadgetreader)",
                "html": "<p>hey all - these are the (slightly pprinted) offline email conversation i had with <a href=\"/ngoldbaum/\" rel=\"nofollow\" title=\"@ngoldbaum\" class=\"mention\">Nathan Goldbaum</a></p>\n<p>I dug up a gadget reader that Phil Hopkins wrote a while ago that has a few random hacks I've put in:</p>\n<p><a href=\"http://paste.yt-project.org/show/5832/\" rel=\"nofollow\">http://paste.yt-project.org/show/5832/</a></p>\n<p>where sqrt(a) seems to come in as you suggested it should around line 162.  </p>\n<p>Running pfh_readsnap to look at velocities of (what I think is the cosmological gadget ds I gave to yt datasets):</p>\n<div class=\"codehilite\"><pre><span></span>In [21]: dum[&#39;v&#39;]\n\nOut[21]: \n\narray([[ 450.48074341,  -18.39207077,  139.27827454],\n\n       [ 456.05810547,  -30.1567421 ,  189.43196106],\n\n       [ 424.99307251,  -38.61084366,  224.60083008],\n\n       ..., \n\n       [-173.42573547, -341.2416687 , -614.8447876 ],\n\n       [-162.60665894, -335.75714111, -614.21270752],\n\n       [-142.8842926 , -345.15133667, -629.56384277]])\n</pre></div>\n\n\n<p>if I look at what comes from this PR</p>\n<div class=\"codehilite\"><pre><span></span>In [5]: dum = ad[(&#39;PartType0&#39;, &#39;particle_velocity&#39;)]\n\n\nIn [6]: dum\n\nOut[6]: \n\nYTArray([[ 450.48074341,  -18.39207077,  139.27827454],\n\n       [ 456.05810547,  -30.1567421 ,  189.43196106],\n\n       [ 424.99307251,  -38.61084366,  224.60083008],\n\n       ..., \n\n       [-173.42573547, -341.2416687 , -614.8447876 ],\n\n       [-162.60665894, -335.75714111, -614.21270752],\n\n       [-142.8842926 , -345.15133667, -629.56384277]]) code_velocity\n</pre></div>\n\n\n<p>so this seems good to me.  nice find <a href=\"/ngoldbaum/\" rel=\"nofollow\" title=\"@ngoldbaum\" class=\"mention\">Nathan Goldbaum</a> and <a href=\"/rthompson/\" rel=\"nofollow\" title=\"@rthompson\" class=\"mention\">Robert Thompson</a> !</p>\n<p>edit: the reasoning behind using this gadgetreader was to be another verification source beyond <a href=\"/rthompson/\" rel=\"nofollow\" title=\"@rthompson\" class=\"mention\">Robert Thompson</a>'s <a href=\"https://bitbucket.org/rthompson/pygadgetreader\">pygadgetreader</a></p>"
            },
            "user": {
                "username": "desika",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/desika"
                    },
                    "html": {
                        "href": "https://bitbucket.org/desika/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/desika/avatar/32/"
                    }
                },
                "display_name": "Desika Narayanan",
                "uuid": "{2978bde9-cd78-434d-bd30-e00949173bb8}"
            },
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9323305"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9323305"
                }
            },
            "created_on": "2015-08-24T15:18:11.567339+00:00",
            "updated_on": "2015-08-24T15:20:01.359943+00:00",
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9323305
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "I still don't think the end result units should read sqrt(a)*km/s.  Gadget outputs velocity data is in v/sqrt(a), in order to get to just v you have to multiply by sqrt(a), which in the end gives you units of km/s.",
                "html": "<p>I still don't think the end result units should read sqrt(a)*km/s.  Gadget outputs velocity data is in v/sqrt(a), in order to get to just v you have to multiply by sqrt(a), which in the end gives you units of km/s.</p>"
            },
            "user": {
                "username": "rthompson",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/rthompson"
                    },
                    "html": {
                        "href": "https://bitbucket.org/rthompson/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/rthompson/avatar/32/"
                    }
                },
                "display_name": "Robert Thompson",
                "uuid": "{a1ae9158-0af0-4382-99bb-4bdade1d18de}"
            },
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9324314"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9324314"
                }
            },
            "created_on": "2015-08-24T15:42:16.299074+00:00",
            "updated_on": "2015-08-24T15:42:16.454921+00:00",
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9324314
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "The `code_velocity` units aren't `km/s`, so how do I include the factor of `sqrt(a)` without explicitly including it in the `velocity_unit`?",
                "html": "<p>The <code>code_velocity</code> units aren't <code>km/s</code>, so how do I include the factor of <code>sqrt(a)</code> without explicitly including it in the <code>velocity_unit</code>?</p>"
            },
            "user": {
                "username": "ngoldbaum",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}"
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9324314"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9324314"
                    }
                },
                "id": 9324314
            },
            "created_on": "2015-08-24T15:45:27.895356+00:00",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9324423"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9324423"
                }
            },
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9324423,
            "updated_on": "2015-08-24T15:45:27.908716+00:00"
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "that I'm not sure of; but if the user does something along the lines of:\n\n    vel = dd['PartType0','Velocities']\n    vel = vel.in_cgs()\n\nit should just read cm/s, not sqrt(a)*cm/s.  I mean in theory shouldn't the code_velocity unit be km/s/sqrt(a)?",
                "html": "<p>that I'm not sure of; but if the user does something along the lines of:</p>\n<div class=\"codehilite\"><pre><span></span>vel = dd[&#39;PartType0&#39;,&#39;Velocities&#39;]\nvel = vel.in_cgs()\n</pre></div>\n\n\n<p>it should just read cm/s, not sqrt(a)*cm/s.  I mean in theory shouldn't the code_velocity unit be km/s/sqrt(a)?</p>"
            },
            "user": {
                "username": "rthompson",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/rthompson"
                    },
                    "html": {
                        "href": "https://bitbucket.org/rthompson/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/rthompson/avatar/32/"
                    }
                },
                "display_name": "Robert Thompson",
                "uuid": "{a1ae9158-0af0-4382-99bb-4bdade1d18de}"
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9324423"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9324423"
                    }
                },
                "id": 9324423
            },
            "created_on": "2015-08-24T15:55:42.758920+00:00",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9324815"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9324815"
                }
            },
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9324815,
            "updated_on": "2015-08-24T16:03:46.973179+00:00"
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "It will do that with this pull request. People will only see the `sqrt(a)` in `ds.velocity_unit`:\n\n\n```\n#!python\n\ngoldbaum at ROUS2 in ~/Documents/yt-hg on yt^\n\u263f yt load GadgetDiskGalaxy/snapshot_200.hdf5\n/usr/local/lib/python2.7/site-packages/IPython/config.py:13: ShimWarning: The `IPython.config` package has been deprecated. You should import from traitlets.config instead.\n  \"You should import from traitlets.config instead.\", ShimWarning)\nPython 2.7.10 (default, Jul 13 2015, 12:05:58)\nType \"copyright\", \"credits\" or \"license\" for more information.\n\nIPython 4.0.0 -- An enhanced Interactive Python.\n?         -> Introduction and overview of IPython's features.\n%quickref -> Quick reference.\nhelp      -> Python's own help system.\nobject?   -> Details about 'object', use 'object??' for extra details.\n\nIn [1]: ad = ds.all_data()\n\nIn [2]: ad['PartType0', 'Velocities']\nOut[2]:\nYTArray([[ 450.48074341,  -18.39207077,  139.27827454],\n       [ 456.05810547,  -30.1567421 ,  189.43196106],\n       [ 424.99307251,  -38.61084366,  224.60083008],\n       ...,\n       [-173.42573547, -341.2416687 , -614.8447876 ],\n       [-162.60665894, -335.75714111, -614.21270752],\n       [-142.8842926 , -345.15133667, -629.56384277]]) code_velocity\n\nIn [3]: ad['PartType0', 'Velocities'].in_cgs()\nOut[3]:\nYTArray([[ 26453155.93538181,  -1080020.22989803,   8178706.7896411 ],\n       [ 26780670.10875023,  -1770865.93120877,  11123834.43328055],\n       [ 24956467.46962178,  -2267308.16586322,  13189022.76781459],\n       ...,\n       [-10183915.94052041, -20038412.75324449, -36104950.72291993],\n       [ -9548597.51031733, -19716350.01107994, -36067833.68048258],\n       [ -8390459.58842835, -20267996.49893458, -36969283.92136168]]) cm/s\n\nIn [6]: ds.velocity_unit\nOut[6]: 100000.0 sqrt(a)*cm/s\n\n```\n\n\n`code_velocity` can't be `km/s/sqrt(a)`, otherwise we wouldn't be able to get velocities to agree with your reader, for example.",
                "html": "<p>It will do that with this pull request. People will only see the <code>sqrt(a)</code> in <code>ds.velocity_unit</code>:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">goldbaum</span> <span class=\"n\">at</span> <span class=\"n\">ROUS2</span> <span class=\"ow\">in</span> <span class=\"o\">~/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">yt</span><span class=\"o\">-</span><span class=\"n\">hg</span> <span class=\"n\">on</span> <span class=\"n\">yt</span><span class=\"o\">^</span>\n<span class=\"err\">\u263f</span> <span class=\"n\">yt</span> <span class=\"n\">load</span> <span class=\"n\">GadgetDiskGalaxy</span><span class=\"o\">/</span><span class=\"n\">snapshot_200</span><span class=\"o\">.</span><span class=\"n\">hdf5</span>\n<span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">local</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">python2</span><span class=\"o\">.</span><span class=\"mi\">7</span><span class=\"o\">/</span><span class=\"n\">site</span><span class=\"o\">-</span><span class=\"n\">packages</span><span class=\"o\">/</span><span class=\"n\">IPython</span><span class=\"o\">/</span><span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">py</span><span class=\"p\">:</span><span class=\"mi\">13</span><span class=\"p\">:</span> <span class=\"n\">ShimWarning</span><span class=\"p\">:</span> <span class=\"n\">The</span> <span class=\"sb\">`IPython.config`</span> <span class=\"n\">package</span> <span class=\"n\">has</span> <span class=\"n\">been</span> <span class=\"n\">deprecated</span><span class=\"o\">.</span> <span class=\"n\">You</span> <span class=\"n\">should</span> <span class=\"kn\">import</span> <span class=\"nn\">from</span> <span class=\"nn\">traitlets.config</span> <span class=\"nn\">instead.</span>\n  <span class=\"s2\">&quot;You should import from traitlets.config instead.&quot;</span><span class=\"p\">,</span> <span class=\"n\">ShimWarning</span><span class=\"p\">)</span>\n<span class=\"n\">Python</span> <span class=\"mf\">2.7</span><span class=\"o\">.</span><span class=\"mi\">10</span> <span class=\"p\">(</span><span class=\"n\">default</span><span class=\"p\">,</span> <span class=\"n\">Jul</span> <span class=\"mi\">13</span> <span class=\"mi\">2015</span><span class=\"p\">,</span> <span class=\"mi\">12</span><span class=\"p\">:</span><span class=\"mo\">05</span><span class=\"p\">:</span><span class=\"mi\">58</span><span class=\"p\">)</span>\n<span class=\"n\">Type</span> <span class=\"s2\">&quot;copyright&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;credits&quot;</span> <span class=\"ow\">or</span> <span class=\"s2\">&quot;license&quot;</span> <span class=\"k\">for</span> <span class=\"n\">more</span> <span class=\"n\">information</span><span class=\"o\">.</span>\n\n<span class=\"n\">IPython</span> <span class=\"mf\">4.0</span><span class=\"o\">.</span><span class=\"mi\">0</span> <span class=\"o\">--</span> <span class=\"n\">An</span> <span class=\"n\">enhanced</span> <span class=\"n\">Interactive</span> <span class=\"n\">Python</span><span class=\"o\">.</span>\n<span class=\"err\">?</span>         <span class=\"o\">-&gt;</span> <span class=\"n\">Introduction</span> <span class=\"ow\">and</span> <span class=\"n\">overview</span> <span class=\"n\">of</span> <span class=\"n\">IPython</span><span class=\"s1\">&#39;s features.</span>\n<span class=\"o\">%</span><span class=\"n\">quickref</span> <span class=\"o\">-&gt;</span> <span class=\"n\">Quick</span> <span class=\"n\">reference</span><span class=\"o\">.</span>\n<span class=\"n\">help</span>      <span class=\"o\">-&gt;</span> <span class=\"n\">Python</span><span class=\"s1\">&#39;s own help system.</span>\n<span class=\"nb\">object</span><span class=\"err\">?</span>   <span class=\"o\">-&gt;</span> <span class=\"n\">Details</span> <span class=\"n\">about</span> <span class=\"s1\">&#39;object&#39;</span><span class=\"p\">,</span> <span class=\"n\">use</span> <span class=\"s1\">&#39;object??&#39;</span> <span class=\"k\">for</span> <span class=\"n\">extra</span> <span class=\"n\">details</span><span class=\"o\">.</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]:</span> <span class=\"n\">ad</span> <span class=\"o\">=</span> <span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">all_data</span><span class=\"p\">()</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]:</span> <span class=\"n\">ad</span><span class=\"p\">[</span><span class=\"s1\">&#39;PartType0&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Velocities&#39;</span><span class=\"p\">]</span>\n<span class=\"n\">Out</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]:</span>\n<span class=\"n\">YTArray</span><span class=\"p\">([[</span> <span class=\"mf\">450.48074341</span><span class=\"p\">,</span>  <span class=\"o\">-</span><span class=\"mf\">18.39207077</span><span class=\"p\">,</span>  <span class=\"mf\">139.27827454</span><span class=\"p\">],</span>\n       <span class=\"p\">[</span> <span class=\"mf\">456.05810547</span><span class=\"p\">,</span>  <span class=\"o\">-</span><span class=\"mf\">30.1567421</span> <span class=\"p\">,</span>  <span class=\"mf\">189.43196106</span><span class=\"p\">],</span>\n       <span class=\"p\">[</span> <span class=\"mf\">424.99307251</span><span class=\"p\">,</span>  <span class=\"o\">-</span><span class=\"mf\">38.61084366</span><span class=\"p\">,</span>  <span class=\"mf\">224.60083008</span><span class=\"p\">],</span>\n       <span class=\"o\">...</span><span class=\"p\">,</span>\n       <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">173.42573547</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">341.2416687</span> <span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">614.8447876</span> <span class=\"p\">],</span>\n       <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">162.60665894</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">335.75714111</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">614.21270752</span><span class=\"p\">],</span>\n       <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">142.8842926</span> <span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">345.15133667</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">629.56384277</span><span class=\"p\">]])</span> <span class=\"n\">code_velocity</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]:</span> <span class=\"n\">ad</span><span class=\"p\">[</span><span class=\"s1\">&#39;PartType0&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Velocities&#39;</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">in_cgs</span><span class=\"p\">()</span>\n<span class=\"n\">Out</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]:</span>\n<span class=\"n\">YTArray</span><span class=\"p\">([[</span> <span class=\"mf\">26453155.93538181</span><span class=\"p\">,</span>  <span class=\"o\">-</span><span class=\"mf\">1080020.22989803</span><span class=\"p\">,</span>   <span class=\"mf\">8178706.7896411</span> <span class=\"p\">],</span>\n       <span class=\"p\">[</span> <span class=\"mf\">26780670.10875023</span><span class=\"p\">,</span>  <span class=\"o\">-</span><span class=\"mf\">1770865.93120877</span><span class=\"p\">,</span>  <span class=\"mf\">11123834.43328055</span><span class=\"p\">],</span>\n       <span class=\"p\">[</span> <span class=\"mf\">24956467.46962178</span><span class=\"p\">,</span>  <span class=\"o\">-</span><span class=\"mf\">2267308.16586322</span><span class=\"p\">,</span>  <span class=\"mf\">13189022.76781459</span><span class=\"p\">],</span>\n       <span class=\"o\">...</span><span class=\"p\">,</span>\n       <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">10183915.94052041</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">20038412.75324449</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">36104950.72291993</span><span class=\"p\">],</span>\n       <span class=\"p\">[</span> <span class=\"o\">-</span><span class=\"mf\">9548597.51031733</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">19716350.01107994</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">36067833.68048258</span><span class=\"p\">],</span>\n       <span class=\"p\">[</span> <span class=\"o\">-</span><span class=\"mf\">8390459.58842835</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">20267996.49893458</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">36969283.92136168</span><span class=\"p\">]])</span> <span class=\"n\">cm</span><span class=\"o\">/</span><span class=\"n\">s</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">6</span><span class=\"p\">]:</span> <span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">velocity_unit</span>\n<span class=\"n\">Out</span><span class=\"p\">[</span><span class=\"mi\">6</span><span class=\"p\">]:</span> <span class=\"mf\">100000.0</span> <span class=\"n\">sqrt</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">)</span><span class=\"o\">*</span><span class=\"n\">cm</span><span class=\"o\">/</span><span class=\"n\">s</span>\n</pre></div>\n\n\n<p><code>code_velocity</code> can't be <code>km/s/sqrt(a)</code>, otherwise we wouldn't be able to get velocities to agree with your reader, for example.</p>"
            },
            "user": {
                "username": "ngoldbaum",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}"
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9324815"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9324815"
                    }
                },
                "id": 9324815
            },
            "created_on": "2015-08-24T16:04:54.109697+00:00",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9325167"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9325167"
                }
            },
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9325167,
            "updated_on": "2015-08-24T16:04:54.123696+00:00"
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "There's nothing special about my reader other than it reading raw gadget/hdf5 data.  As long as the end result velocities are raw data * sqrt(a) it doesn't really matter - I was more concerned about confusion for the user in the true velocity units.",
                "html": "<p>There's nothing special about my reader other than it reading raw gadget/hdf5 data.  As long as the end result velocities are raw data * sqrt(a) it doesn't really matter - I was more concerned about confusion for the user in the true velocity units.</p>"
            },
            "user": {
                "username": "rthompson",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/rthompson"
                    },
                    "html": {
                        "href": "https://bitbucket.org/rthompson/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/rthompson/avatar/32/"
                    }
                },
                "display_name": "Robert Thompson",
                "uuid": "{a1ae9158-0af0-4382-99bb-4bdade1d18de}"
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9325167"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9325167"
                    }
                },
                "id": 9325167
            },
            "created_on": "2015-08-24T16:11:28.132329+00:00",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9325356"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9325356"
                }
            },
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9325356,
            "updated_on": "2015-08-24T16:11:28.253964+00:00"
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "Just to clarify - did I convince you just now or do you still have a concern? I guess it's not your reader per se, but more that if you take the output of your reader and convert it to CGS by hand you get the same answer yt does now. That wouldn't happen if `sqrt(a)` was in the denominator of `velocity_unit`.",
                "html": "<p>Just to clarify - did I convince you just now or do you still have a concern? I guess it's not your reader per se, but more that if you take the output of your reader and convert it to CGS by hand you get the same answer yt does now. That wouldn't happen if <code>sqrt(a)</code> was in the denominator of <code>velocity_unit</code>.</p>"
            },
            "user": {
                "username": "ngoldbaum",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}"
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9325356"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9325356"
                    }
                },
                "id": 9325356
            },
            "created_on": "2015-08-24T16:13:45.621492+00:00",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9325424"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9325424"
                }
            },
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9325424,
            "updated_on": "2015-08-24T16:13:52.260376+00:00"
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "I haven't run this through the yt machinery just yet.  But in simplest terms we just need to understand that:\n\n* raw_velocity (on disk) = km/s/sqrt(a)\n\nin order to get to a peculiar velocity km/s we must multiply raw_velocity * sqrt(a).",
                "html": "<p>I haven't run this through the yt machinery just yet.  But in simplest terms we just need to understand that:</p>\n<ul>\n<li>raw_velocity (on disk) = km/s/sqrt(a)</li>\n</ul>\n<p>in order to get to a peculiar velocity km/s we must multiply raw_velocity * sqrt(a).</p>"
            },
            "user": {
                "username": "rthompson",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/rthompson"
                    },
                    "html": {
                        "href": "https://bitbucket.org/rthompson/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/rthompson/avatar/32/"
                    }
                },
                "display_name": "Robert Thompson",
                "uuid": "{a1ae9158-0af0-4382-99bb-4bdade1d18de}"
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9325424"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9325424"
                    }
                },
                "id": 9325424
            },
            "created_on": "2015-08-24T16:19:32.769692+00:00",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9325613"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9325613"
                }
            },
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9325613,
            "updated_on": "2015-08-24T16:19:32.835916+00:00"
        },
        {
            "content": {
                "markup": "markdown",
                "raw": "Yup, that's exactly what this pull request does.",
                "html": "<p>Yup, that's exactly what this pull request does.</p>"
            },
            "user": {
                "username": "ngoldbaum",
                "type": "user",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}"
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9325613"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9325613"
                    }
                },
                "id": 9325613
            },
            "created_on": "2015-08-24T16:22:20.868857+00:00",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710/comments/9325692"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710/_/diff#comment-9325692"
                }
            },
            "pullrequest": {
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/1710"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/1710"
                    }
                },
                "title": "Gadget cosmology simulation unit fixes",
                "id": 1710
            },
            "type": "pullrequest_comment",
            "id": 9325692,
            "updated_on": "2015-08-24T16:22:20.882973+00:00"
        }
    ],
    "reason": "",
    "type": "pullrequest",
    "close_source_branch": false,
    "state": "MERGED",
    "description": "The main benefit of this PR is that it corrects the velocity and time units used for Gadget simulations.  I'd very much appreciate eyes on this from @desika and @mornkr.\r\n\r\nSee the e-mail from Volker Springel I've added as a comment twice in this pull request, as well as the note on page 32 of the Gadget-2 user's guide. Apparently the factor of sqrt(a) was only included for compatibility with the Gadget-1 output format.\r\n\r\nI've also slightly adjusted the default mass unit so it formats nicer and I've adjusted the `time_unit`, `mass_unit`, and `length_unit` attributes of GadgetDataset instances to make them have nicer units by default. Right now the `time_unit` attribute in particular has confusing units, since it's created by combining a comoving with a non-comoving unit, which the unit system doesn't automatically cancel.\r\n\r\nThis will change answers for cosmology simulations at non-unit redshifts.\r\n\r\n* Add scale factor as a unit valid for cosmology simulations\r\n\r\n* Ensure gadget velocity units are scaled by a**(1/2)\r\n\r\n* Ensure time units are based on the internal comoving velocity units\r\n\r\n* Bring the scaling of the gadget mass unit out of the unit symbol\r\n\r\n* Reformat the gadget unit attributes before exiting the dataset initializer",
    "author": {
        "username": "ngoldbaum",
        "type": "user",
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}"
    },
    "updated_on": "2015-08-27T16:31:05.767335+00:00",
    "destination": {
        "repository": {
            "full_name": "yt_analysis/yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt"
        },
        "commit": {
            "hash": "5e5edba3739c",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/5e5edba3739c"
                }
            }
        },
        "branch": {
            "name": "yt"
        }
    }
}