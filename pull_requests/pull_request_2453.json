{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2016-12-19T22:00:31.679412+00:00",
    "comment_count": 4,
    "description": "During review of [PR 2396](https://bitbucket.org/yt_analysis/yt/pull-requests/2396) it became apparent that the isocontour data object does a poor job of exposing data with units. While it would have been good to catch this during the yt-3.0 push when we added units elsewhere, let's fix this issue once and for all by adding units to the public API of the isocontour data object.\r\n\r\nIt's possible that this breaks user code. I'm not sure whether it's worth having a deprecation cycle.\r\n\r\nThis PR adds units to the following `YTSurface` attributes and operations:\r\n\r\n* The `vertices` attribute\r\n* The return value of sampling a field value at an isocontour (e.g. `surf['density']`)\r\n* The return value of `calculate_flux`\r\n\r\nIn penance for changing the API (i.e. going from no units to units) I've also substantially expanded the test coverage of the `YTSurface` class.\r\n\r\nThere are also a few python3-specific fixes where we needed to explicitly do integer division.",
    "created_on": "2016-12-01T21:49:16.639943+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/97ae0cc375fb"
            }
        },
        "hash": "97ae0cc375fb"
    },
    "title": "[API change?] Units overhaul for isocontours",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2453"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "id": 2453,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt/commit/beb8260ce976"
                }
            },
            "hash": "beb8260ce976"
        },
        "repository": {
            "full_name": "ngoldbaum/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/ngoldbaum/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/ngoldbaum/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{cb18d7d9-ab77-4e80-81ed-8d32a945e0ef}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/3b3b2900d417"
                }
            },
            "hash": "3b3b2900d417"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/john_regan"
                    },
                    "html": {
                        "href": "https://bitbucket.org/john_regan/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/john_regan/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "John  Regan",
                "uuid": "{170107e8-e39c-4d78-ac01-431331a34446}",
                "username": "john_regan"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453/comments/27731829"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:beb8260ce976..7da3033837bc?path=yt%2Fdata_objects%2Fconstruction_data_containers.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2453/_/diff#comment-27731829"
                }
            },
            "pullrequest": {
                "title": "[API change?] Units overhaul for isocontours",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2453"
                    }
                },
                "id": 2453
            },
            "content": {
                "raw": "Just out of curiousity what's the double slash for?",
                "html": "<p>Just out of curiousity what's the double slash for?</p>",
                "markup": "markdown"
            },
            "created_on": "2016-12-02T10:13:51.369837+00:00",
            "updated_on": "2016-12-02T10:13:51.424760+00:00",
            "inline": {
                "from": null,
                "path": "yt/data_objects/construction_data_containers.py",
                "to": 1245
            },
            "id": 27731829
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/john_regan"
                    },
                    "html": {
                        "href": "https://bitbucket.org/john_regan/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/john_regan/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "John  Regan",
                "uuid": "{170107e8-e39c-4d78-ac01-431331a34446}",
                "username": "john_regan"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453/comments/27732592"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2453/_/diff#comment-27732592"
                }
            },
            "pullrequest": {
                "title": "[API change?] Units overhaul for isocontours",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2453"
                    }
                },
                "id": 2453
            },
            "content": {
                "raw": "This looks good to me. ",
                "html": "<p>This looks good to me. </p>",
                "markup": "markdown"
            },
            "created_on": "2016-12-02T10:23:51.863160+00:00",
            "updated_on": "2016-12-02T10:23:51.909207+00:00",
            "id": 27732592
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453/comments/27743396"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:beb8260ce976..7da3033837bc?path=yt%2Fdata_objects%2Fconstruction_data_containers.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2453/_/diff#comment-27743396"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453/comments/27731829"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2453/_/diff#comment-27731829"
                    }
                },
                "id": 27731829
            },
            "pullrequest": {
                "title": "[API change?] Units overhaul for isocontours",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2453"
                    }
                },
                "id": 2453
            },
            "content": {
                "raw": "Integer division. In python2 int/int returns int. In python3 int/int returns float. They created the integer division operator for when you really want int/int to return int. http://python-future.org/compatible_idioms.html#division",
                "html": "<p>Integer division. In python2 int/int returns int. In python3 int/int returns float. They created the integer division operator for when you really want int/int to return int. <a href=\"http://python-future.org/compatible_idioms.html#division\" rel=\"nofollow\">http://python-future.org/compatible_idioms.html#division</a></p>",
                "markup": "markdown"
            },
            "created_on": "2016-12-02T13:28:16.815133+00:00",
            "updated_on": "2016-12-02T13:28:16.821170+00:00",
            "inline": {
                "from": null,
                "path": "yt/data_objects/construction_data_containers.py",
                "to": null
            },
            "id": 27743396
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matt Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453/comments/28254536"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:beb8260ce976..3b3b2900d417?path=yt%2Fdata_objects%2Fconstruction_data_containers.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2453/_/diff#comment-28254536"
                }
            },
            "pullrequest": {
                "title": "[API change?] Units overhaul for isocontours",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2453"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2453"
                    }
                },
                "id": 2453
            },
            "content": {
                "raw": "I think we *have* to assume that the `field_[xyz]_vals` fields have the same units, like you said.  I think the term \"fluxing\" confused me at first.",
                "html": "<p>I think we <em>have</em> to assume that the <code>field_[xyz]_vals</code> fields have the same units, like you said.  I think the term \"fluxing\" confused me at first.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-12-13T16:01:31.628193+00:00",
            "updated_on": "2016-12-13T16:01:31.636627+00:00",
            "inline": {
                "from": null,
                "path": "yt/data_objects/construction_data_containers.py",
                "to": 1238
            },
            "id": 28254536
        }
    ]
}