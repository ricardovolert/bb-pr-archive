{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2014-04-18T15:20:52.462965+00:00",
    "comment_count": 4,
    "description": "This makes it possible to create a movie of a `ProjectionPlot` that uses a `data_source`.\r\n\r\nI also have a small proposal - would anyone object to making this function part of the public API? I'll of course leave behind an alias for the private name for back compat.",
    "created_on": "2014-04-18T03:06:11.588288+00:00",
    "task_count": 0,
    "merge_commit": null,
    "title": "Making it possible to pass a data_source to switch_pf.",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/836"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
            },
            "html": {
                "href": "https://bitbucket.org/MatthewTurk/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Matt Turk",
        "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
        "username": "MatthewTurk"
    },
    "id": 836,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "source": {
        "branch": {
            "name": "yt-3.0"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt/commit/802fba6202d6"
                }
            },
            "hash": "802fba6202d6"
        },
        "repository": {
            "full_name": "ngoldbaum/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/ngoldbaum/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/ngoldbaum/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{cb18d7d9-ab77-4e80-81ed-8d32a945e0ef}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt-3.0"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/ef88aadedeca"
                }
            },
            "hash": "ef88aadedeca"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/comments/1689791"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/836/_/diff#comment-1689791"
                }
            },
            "pullrequest": {
                "title": "Making it possible to pass a data_source to switch_pf.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/836"
                    }
                },
                "id": 836
            },
            "content": {
                "raw": "Looks to me like `data_source` needs to be an instantiated data object, even though the `proj` is not.  This will not work for slice plots, right?\n\nI'm -0 on making this part of the public API.",
                "html": "<p>Looks to me like <code>data_source</code> needs to be an instantiated data object, even though the <code>proj</code> is not.  This will not work for slice plots, right?</p>\n<p>I'm -0 on making this part of the public API.</p>",
                "markup": "markdown"
            },
            "created_on": "2014-04-18T03:09:00.468103+00:00",
            "updated_on": "2014-04-18T03:09:00.477249+00:00",
            "id": 1689791
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/comments/1689865"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/836/_/diff#comment-1689865"
                }
            },
            "pullrequest": {
                "title": "Making it possible to pass a data_source to switch_pf.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/836"
                    }
                },
                "id": 836
            },
            "content": {
                "raw": "All tests pass. Good job!",
                "html": "<p>All tests pass. Good job!</p>",
                "markup": "markdown"
            },
            "created_on": "2014-04-18T03:32:37.860749+00:00",
            "updated_on": "2014-04-18T03:32:38.014390+00:00",
            "id": 1689865
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/comments/1689883"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/836/_/diff#comment-1689883"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/comments/1689791"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/836/_/diff#comment-1689791"
                    }
                },
                "id": 1689791
            },
            "pullrequest": {
                "title": "Making it possible to pass a data_source to switch_pf.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/836"
                    }
                },
                "id": 836
            },
            "content": {
                "raw": "It will not work for slice plots, or any other plot for that matter.  As far as I can tell the projection data object is the only one that accepts a data source.\n\nHere's an example script:\n\n\n```\n#!python\n\nimport yt\n\nfilenames = sorted(glob.glob(\"feedback_fcon/DD????/DD????\"))\nts = yt.DatasetSeries(filenames)\n\nplot = yt.ProjectionPlot(ts[0], 0, 'velocity_magnitude', width=(10, 'kpc'), \n                         weight_field='temperature', data_source=data_source)\nplot.set_zlim('velocity_magnitude', 10, 1000)\nplot.set_unit('velocity_magnitude', 'km/s')\n\nfor ds in ts[10:]:\n    center = (ds.domain_right_edge - ds.domain_left_edge)/2.\n    left_edge = center - ds.quan(5, 'kpc')\n    right_edge = center + ds.quan(5, 'kpc')\n    data_source = ds.region(center, left_edge, right_edge)\n    plot._switch_pf(ds, data_source)\n    plot.save()\n```\n\nIn this snippet I'm trying to figure out the typical velocity of hot outflowing material I'm seeing in my simulation.\n\nI'd like to be able to call `plot.switch_dataset()` instead of `plot._switch_pf()`.",
                "html": "<p>It will not work for slice plots, or any other plot for that matter.  As far as I can tell the projection data object is the only one that accepts a data source.</p>\n<p>Here's an example script:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">yt</span>\n\n<span class=\"n\">filenames</span> <span class=\"o\">=</span> <span class=\"nb\">sorted</span><span class=\"p\">(</span><span class=\"n\">glob</span><span class=\"o\">.</span><span class=\"n\">glob</span><span class=\"p\">(</span><span class=\"s2\">&quot;feedback_fcon/DD????/DD????&quot;</span><span class=\"p\">))</span>\n<span class=\"n\">ts</span> <span class=\"o\">=</span> <span class=\"n\">yt</span><span class=\"o\">.</span><span class=\"n\">DatasetSeries</span><span class=\"p\">(</span><span class=\"n\">filenames</span><span class=\"p\">)</span>\n\n<span class=\"n\">plot</span> <span class=\"o\">=</span> <span class=\"n\">yt</span><span class=\"o\">.</span><span class=\"n\">ProjectionPlot</span><span class=\"p\">(</span><span class=\"n\">ts</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">],</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"s1\">&#39;velocity_magnitude&#39;</span><span class=\"p\">,</span> <span class=\"n\">width</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"s1\">&#39;kpc&#39;</span><span class=\"p\">),</span> \n                         <span class=\"n\">weight_field</span><span class=\"o\">=</span><span class=\"s1\">&#39;temperature&#39;</span><span class=\"p\">,</span> <span class=\"n\">data_source</span><span class=\"o\">=</span><span class=\"n\">data_source</span><span class=\"p\">)</span>\n<span class=\"n\">plot</span><span class=\"o\">.</span><span class=\"n\">set_zlim</span><span class=\"p\">(</span><span class=\"s1\">&#39;velocity_magnitude&#39;</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">1000</span><span class=\"p\">)</span>\n<span class=\"n\">plot</span><span class=\"o\">.</span><span class=\"n\">set_unit</span><span class=\"p\">(</span><span class=\"s1\">&#39;velocity_magnitude&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;km/s&#39;</span><span class=\"p\">)</span>\n\n<span class=\"k\">for</span> <span class=\"n\">ds</span> <span class=\"ow\">in</span> <span class=\"n\">ts</span><span class=\"p\">[</span><span class=\"mi\">10</span><span class=\"p\">:]:</span>\n    <span class=\"n\">center</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">domain_right_edge</span> <span class=\"o\">-</span> <span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">domain_left_edge</span><span class=\"p\">)</span><span class=\"o\">/</span><span class=\"mf\">2.</span>\n    <span class=\"n\">left_edge</span> <span class=\"o\">=</span> <span class=\"n\">center</span> <span class=\"o\">-</span> <span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">quan</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"s1\">&#39;kpc&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">right_edge</span> <span class=\"o\">=</span> <span class=\"n\">center</span> <span class=\"o\">+</span> <span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">quan</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"s1\">&#39;kpc&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">data_source</span> <span class=\"o\">=</span> <span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">region</span><span class=\"p\">(</span><span class=\"n\">center</span><span class=\"p\">,</span> <span class=\"n\">left_edge</span><span class=\"p\">,</span> <span class=\"n\">right_edge</span><span class=\"p\">)</span>\n    <span class=\"n\">plot</span><span class=\"o\">.</span><span class=\"n\">_switch_pf</span><span class=\"p\">(</span><span class=\"n\">ds</span><span class=\"p\">,</span> <span class=\"n\">data_source</span><span class=\"p\">)</span>\n    <span class=\"n\">plot</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n</pre></div>\n\n\n<p>In this snippet I'm trying to figure out the typical velocity of hot outflowing material I'm seeing in my simulation.</p>\n<p>I'd like to be able to call <code>plot.switch_dataset()</code> instead of <code>plot._switch_pf()</code>.</p>",
                "markup": "markdown"
            },
            "created_on": "2014-04-18T03:39:17.409206+00:00",
            "updated_on": "2014-04-18T03:39:17.415682+00:00",
            "id": 1689883
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/comments/1692367"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/836/_/diff#comment-1692367"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836/comments/1689883"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/836/_/diff#comment-1689883"
                    }
                },
                "id": 1689883
            },
            "pullrequest": {
                "title": "Making it possible to pass a data_source to switch_pf.",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/836"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/836"
                    }
                },
                "id": 836
            },
            "content": {
                "raw": "I'm not saying this isn't valid, but this seems to me to be a bit more complex than simply remaking the `ProjectionPlot` each time step.  I do see what you are saying about the underlying data source not being respected at each timestep, however, so I see why this is an improvement.",
                "html": "<p>I'm not saying this isn't valid, but this seems to me to be a bit more complex than simply remaking the <code>ProjectionPlot</code> each time step.  I do see what you are saying about the underlying data source not being respected at each timestep, however, so I see why this is an improvement.</p>",
                "markup": "markdown"
            },
            "created_on": "2014-04-18T13:57:58.984774+00:00",
            "updated_on": "2014-04-18T13:57:58.996184+00:00",
            "id": 1692367
        }
    ]
}