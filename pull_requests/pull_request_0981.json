{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2014-07-01T11:29:02.487236+00:00",
    "comment_count": 6,
    "description": "This fix allows halos that are found through the halo catalog to be analyzed properly before they are written out. The problem is that the default quantities that all halos should have (mass, position, etc) are added to the halo objects after the analysis tasks are called. This fix forces the default quantities to be added first.\r\n\r\nScript showing the error:  http://paste.yt-project.org/show/4843\r\nError:  http://paste.yt-project.org/show/w0TiKeFIzavH8XD2U3mM/",
    "created_on": "2014-06-25T19:48:58.536766+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/21ae8b1d7544"
            }
        },
        "hash": "21ae8b1d7544"
    },
    "title": "Added option to prepend fields to the actions list",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
            },
            "html": {
                "href": "https://bitbucket.org/brittonsmith/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Britton Smith",
        "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
        "username": "brittonsmith"
    },
    "id": 981,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/hegan"
            },
            "html": {
                "href": "https://bitbucket.org/hegan/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/hegan/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Hilary Egan",
        "uuid": "{56ad7d6a-d009-4fc5-ad4f-2c4a93fb844f}",
        "username": "hegan"
    },
    "source": {
        "branch": {
            "name": "yt-3.0"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/hegan/yt/commit/f65291c32a4c"
                }
            },
            "hash": "f65291c32a4c"
        },
        "repository": {
            "full_name": "hegan/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/hegan/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/hegan/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/hegan/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{8166f89d-6aca-4979-8cad-7dd933c97630}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt-3.0"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/6e33df0e38cb"
                }
            },
            "hash": "6e33df0e38cb"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/comments/2237033"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/hegan/yt:e4dd926d3104..35cecc8a0a24?path=yt%2Fanalysis_modules%2Fhalo_analysis%2Fhalo_catalog.py"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981/_/diff#comment-2237033"
                }
            },
            "pullrequest": {
                "title": "Added option to prepend fields to the actions list",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981"
                    }
                },
                "id": 981
            },
            "content": {
                "raw": "You can reduce this with: `prepend = kwargs.pop(\"prepend\", False)`",
                "html": "<p>You can reduce this with: <code>prepend = kwargs.pop(\"prepend\", False)</code></p>",
                "markup": "markdown"
            },
            "created_on": "2014-06-25T19:51:02.882979+00:00",
            "updated_on": "2014-06-25T19:51:02.891988+00:00",
            "inline": {
                "from": null,
                "path": "yt/analysis_modules/halo_analysis/halo_catalog.py",
                "to": 206
            },
            "id": 2237033
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/comments/2237494"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981/_/diff#comment-2237494"
                }
            },
            "pullrequest": {
                "title": "Added option to prepend fields to the actions list",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981"
                    }
                },
                "id": 981
            },
            "content": {
                "raw": "Something went wrong, you should checkout http://tests.yt-project.org/job/py2.7-yt-3.0_testing/793/",
                "html": "<p>Something went wrong, you should checkout <a href=\"http://tests.yt-project.org/job/py2.7-yt-3.0_testing/793/\" rel=\"nofollow\">http://tests.yt-project.org/job/py2.7-yt-3.0_testing/793/</a></p>",
                "markup": "markdown"
            },
            "created_on": "2014-06-25T20:35:14.292885+00:00",
            "updated_on": "2014-06-25T20:35:14.440918+00:00",
            "id": 2237494
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matthew Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/comments/2260534"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981/_/diff#comment-2260534"
                }
            },
            "pullrequest": {
                "title": "Added option to prepend fields to the actions list",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981"
                    }
                },
                "id": 981
            },
            "content": {
                "raw": "@brittonsmith how's this look to you?",
                "html": "<p><a href=\"/brittonsmith/\" rel=\"nofollow\" title=\"@brittonsmith\" class=\"mention\">Britton Smith</a> how's this look to you?</p>",
                "markup": "markdown"
            },
            "created_on": "2014-06-27T20:15:52.743418+00:00",
            "updated_on": "2014-06-27T20:15:52.762479+00:00",
            "id": 2260534
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
                    },
                    "html": {
                        "href": "https://bitbucket.org/brittonsmith/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Britton Smith",
                "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
                "username": "brittonsmith"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/comments/2260863"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981/_/diff#comment-2260863"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/comments/2260534"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981/_/diff#comment-2260534"
                    }
                },
                "id": 2260534
            },
            "pullrequest": {
                "title": "Added option to prepend fields to the actions list",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981"
                    }
                },
                "id": 981
            },
            "content": {
                "raw": "This seems like a fine solution.  Out of curiosity, does it also solve the problem to remove the statement on line 132:\n\n```\n#!python\n\nif not self.halos_pf is None:\n```\nand just have it call ``self.add_default_quantities()`` all the time?  If so, that seems simpler.  If that doesn't solve it, then this should be accepted.",
                "html": "<p>This seems like a fine solution.  Out of curiosity, does it also solve the problem to remove the statement on line 132:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">halos_pf</span> <span class=\"ow\">is</span> <span class=\"bp\">None</span><span class=\"p\">:</span>\n</pre></div>\n\n\n<p>and just have it call <code>self.add_default_quantities()</code> all the time?  If so, that seems simpler.  If that doesn't solve it, then this should be accepted.</p>",
                "markup": "markdown"
            },
            "created_on": "2014-06-27T20:44:28.924071+00:00",
            "updated_on": "2014-06-27T20:44:28.930494+00:00",
            "id": 2260863
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/hegan"
                    },
                    "html": {
                        "href": "https://bitbucket.org/hegan/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/hegan/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Hilary Egan",
                "uuid": "{56ad7d6a-d009-4fc5-ad4f-2c4a93fb844f}",
                "username": "hegan"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/comments/2270137"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981/_/diff#comment-2270137"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/comments/2260863"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981/_/diff#comment-2260863"
                    }
                },
                "id": 2260863
            },
            "pullrequest": {
                "title": "Added option to prepend fields to the actions list",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981"
                    }
                },
                "id": 981
            },
            "content": {
                "raw": "Nope, that line was intentional. It can't add the default quantities ahead of time because there is no field info object to query yet so it can't find them to add them. The exact error is here: http://paste.yt-project.org/show/aJvth22wSKjeEJz8X47q",
                "html": "<p>Nope, that line was intentional. It can't add the default quantities ahead of time because there is no field info object to query yet so it can't find them to add them. The exact error is here: <a href=\"http://paste.yt-project.org/show/aJvth22wSKjeEJz8X47q\" rel=\"nofollow\">http://paste.yt-project.org/show/aJvth22wSKjeEJz8X47q</a></p>",
                "markup": "markdown"
            },
            "created_on": "2014-06-30T14:28:54.545053+00:00",
            "updated_on": "2014-06-30T14:28:54.708354+00:00",
            "id": 2270137
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/brittonsmith"
                    },
                    "html": {
                        "href": "https://bitbucket.org/brittonsmith/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/brittonsmith/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Britton Smith",
                "uuid": "{94333901-a436-4c2c-8322-8d09e387eece}",
                "username": "brittonsmith"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/comments/2280254"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981/_/diff#comment-2280254"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981/comments/2270137"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981/_/diff#comment-2270137"
                    }
                },
                "id": 2270137
            },
            "pullrequest": {
                "title": "Added option to prepend fields to the actions list",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/981"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/981"
                    }
                },
                "id": 981
            },
            "content": {
                "raw": "Ah, good point.  Thanks for clarifying!  I'm good with this and will accept.",
                "html": "<p>Ah, good point.  Thanks for clarifying!  I'm good with this and will accept.</p>",
                "markup": "markdown"
            },
            "created_on": "2014-07-01T11:28:43.669557+00:00",
            "updated_on": "2014-07-01T11:28:43.680685+00:00",
            "id": 2280254
        }
    ]
}