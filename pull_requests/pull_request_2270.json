{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2016-07-13T20:40:46.762295+00:00",
    "comment_count": 9,
    "description": "This includes two improvements that should help users diagnose problems.\r\n\r\n* Add basic install validation to the install script. Closes #1233\r\n\r\n* Print a warning if INST_CONDA=1 and PYTHONPATH is set\r\n\r\nThis also includes a bugfix:\r\n\r\n* Exit install script if building yt fails when INST_CONDA=1 and INST_YT_SOURCE=0",
    "created_on": "2016-07-10T20:51:01.750730+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/6a5dc7d9b000"
            }
        },
        "hash": "6a5dc7d9b000"
    },
    "title": "Install script improvements. Closes #1233",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/xarthisius"
            },
            "html": {
                "href": "https://bitbucket.org/xarthisius/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/xarthisius/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Kacper Kowalik",
        "uuid": "{26af8f1d-35b3-46ce-9939-09915b06e31f}",
        "username": "xarthisius"
    },
    "id": 2270,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt/commit/7dafcf0e2bf6"
                }
            },
            "hash": "7dafcf0e2bf6"
        },
        "repository": {
            "full_name": "ngoldbaum/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/ngoldbaum/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/ngoldbaum/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{cb18d7d9-ab77-4e80-81ed-8d32a945e0ef}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/5e50ddf62454"
                }
            },
            "hash": "5e50ddf62454"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/comments/20811514"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270/_/diff#comment-20811514"
                }
            },
            "pullrequest": {
                "title": "Install script improvements. Closes #1233",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270"
                    }
                },
                "id": 2270
            },
            "content": {
                "raw": "Docs were built for this PR. See https://tests.yt-project.org/job/yt_docs/972/\nDocs build visible at https://tests.yt-project.org/job/yt_docs/972/artifact/sandbox/doc/build/html/index.html",
                "html": "<p>Docs were built for this PR. See <a href=\"https://tests.yt-project.org/job/yt_docs/972/\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_docs/972/</a>\nDocs build visible at <a href=\"https://tests.yt-project.org/job/yt_docs/972/artifact/sandbox/doc/build/html/index.html\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_docs/972/artifact/sandbox/doc/build/html/index.html</a></p>",
                "markup": "markdown"
            },
            "created_on": "2016-07-10T22:03:01.255582+00:00",
            "updated_on": "2016-07-10T22:03:01.333586+00:00",
            "id": 20811514
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/MatthewTurk"
                    },
                    "html": {
                        "href": "https://bitbucket.org/MatthewTurk/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/MatthewTurk/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Matt Turk",
                "uuid": "{b3f0b280-55fc-4e8a-8bd1-40478d4cbdbf}",
                "username": "MatthewTurk"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/comments/20859123"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:753cacfbbdcb..96474e2371d1?path=doc%2Finstall_script.sh"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270/_/diff#comment-20859123"
                }
            },
            "pullrequest": {
                "title": "Install script improvements. Closes #1233",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270"
                    }
                },
                "id": 2270
            },
            "content": {
                "raw": "Elsewhere don't we manually specify the `python` to call?  (i.e., `${DEST_DIR}/bin/${PYTHON_EXEC}`)",
                "html": "<p>Elsewhere don't we manually specify the <code>python</code> to call?  (i.e., <code>${DEST_DIR}/bin/${PYTHON_EXEC}</code>)</p>",
                "markup": "markdown"
            },
            "created_on": "2016-07-11T19:57:13.701161+00:00",
            "updated_on": "2016-07-11T19:57:13.706160+00:00",
            "inline": {
                "from": null,
                "path": "doc/install_script.sh",
                "to": 763
            },
            "id": 20859123
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/comments/20859163"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:None..None?path=doc%2Finstall_script.sh"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270/_/diff#comment-20859163"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/comments/20859123"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270/_/diff#comment-20859123"
                    }
                },
                "id": 20859123
            },
            "pullrequest": {
                "title": "Install script improvements. Closes #1233",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270"
                    }
                },
                "id": 2270
            },
            "content": {
                "raw": "Yes, but PATH is set by this point so this will pick up the appropriate python executable. That said I'll update so this is clearer.",
                "html": "<p>Yes, but PATH is set by this point so this will pick up the appropriate python executable. That said I'll update so this is clearer.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-07-11T19:58:04.592711+00:00",
            "updated_on": "2016-07-11T19:58:04.599122+00:00",
            "inline": {
                "from": null,
                "path": "doc/install_script.sh",
                "to": null
            },
            "id": 20859163
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/xarthisius"
                    },
                    "html": {
                        "href": "https://bitbucket.org/xarthisius/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/xarthisius/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Kacper Kowalik",
                "uuid": "{26af8f1d-35b3-46ce-9939-09915b06e31f}",
                "username": "xarthisius"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/comments/20859707"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:753cacfbbdcb..96474e2371d1?path=doc%2Finstall_script.sh"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270/_/diff#comment-20859707"
                }
            },
            "pullrequest": {
                "title": "Install script improvements. Closes #1233",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270"
                    }
                },
                "id": 2270
            },
            "content": {
                "raw": "typo",
                "html": "<p>typo</p>",
                "markup": "markdown"
            },
            "created_on": "2016-07-11T20:12:00.919619+00:00",
            "updated_on": "2016-07-11T20:12:00.923769+00:00",
            "inline": {
                "from": null,
                "path": "doc/install_script.sh",
                "to": 122
            },
            "id": 20859707
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/comments/20859783"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:None..None?path=doc%2Finstall_script.sh"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270/_/diff#comment-20859783"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/comments/20859707"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270/_/diff#comment-20859707"
                    }
                },
                "id": 20859707
            },
            "pullrequest": {
                "title": "Install script improvements. Closes #1233",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270"
                    }
                },
                "id": 2270
            },
            "content": {
                "raw": "wha? how did this even get triggered in my testing??\n\nthanks for pointing this out though...",
                "html": "<p>wha? how did this even get triggered in my testing??</p>\n<p>thanks for pointing this out though...</p>",
                "markup": "markdown"
            },
            "created_on": "2016-07-11T20:13:38.429312+00:00",
            "updated_on": "2016-07-11T20:13:38.431725+00:00",
            "inline": {
                "from": null,
                "path": "doc/install_script.sh",
                "to": null
            },
            "id": 20859783
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/xarthisius"
                    },
                    "html": {
                        "href": "https://bitbucket.org/xarthisius/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/xarthisius/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Kacper Kowalik",
                "uuid": "{26af8f1d-35b3-46ce-9939-09915b06e31f}",
                "username": "xarthisius"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/comments/20859826"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:753cacfbbdcb..96474e2371d1?path=doc%2Finstall_script.sh"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270/_/diff#comment-20859826"
                }
            },
            "pullrequest": {
                "title": "Install script improvements. Closes #1233",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270"
                    }
                },
                "id": 2270
            },
            "content": {
                "raw": "I think you want `-n` here",
                "html": "<p>I think you want <code>-n</code> here</p>",
                "markup": "markdown"
            },
            "created_on": "2016-07-11T20:14:36.423005+00:00",
            "updated_on": "2016-07-11T20:14:36.425104+00:00",
            "inline": {
                "from": null,
                "path": "doc/install_script.sh",
                "to": 124
            },
            "id": 20859826
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/xarthisius"
                    },
                    "html": {
                        "href": "https://bitbucket.org/xarthisius/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/xarthisius/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Kacper Kowalik",
                "uuid": "{26af8f1d-35b3-46ce-9939-09915b06e31f}",
                "username": "xarthisius"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/comments/20860014"
                },
                "code": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/diff/ngoldbaum/yt:None..None?path=doc%2Finstall_script.sh"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270/_/diff#comment-20860014"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/comments/20859783"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270/_/diff#comment-20859783"
                    }
                },
                "id": 20859783
            },
            "pullrequest": {
                "title": "Install script improvements. Closes #1233",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270"
                    }
                },
                "id": 2270
            },
            "content": {
                "raw": "unset variable / empty string `-eq 0` will yield True, I think [ ${INST_YT_SOURCE} == 0 ] would be the safest",
                "html": "<p>unset variable / empty string <code>-eq 0</code> will yield True, I think [ ${INST_YT_SOURCE} == 0 ] would be the safest</p>",
                "markup": "markdown"
            },
            "created_on": "2016-07-11T20:19:07.645337+00:00",
            "updated_on": "2016-07-11T20:19:07.651314+00:00",
            "inline": {
                "from": null,
                "path": "doc/install_script.sh",
                "to": null
            },
            "id": 20860014
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/yt-fido"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt-fido/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/yt-fido/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "yt-fido",
                "uuid": "{da2aa332-3f05-45c9-ae53-ff5ba34b35ce}",
                "username": "yt-fido"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/comments/20869058"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270/_/diff#comment-20869058"
                }
            },
            "pullrequest": {
                "title": "Install script improvements. Closes #1233",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270"
                    }
                },
                "id": 2270
            },
            "content": {
                "raw": "Docs were built for this PR. See https://tests.yt-project.org/job/yt_docs/982/\nDocs build visible at https://tests.yt-project.org/job/yt_docs/982/artifact/sandbox/doc/build/html/index.html",
                "html": "<p>Docs were built for this PR. See <a href=\"https://tests.yt-project.org/job/yt_docs/982/\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_docs/982/</a>\nDocs build visible at <a href=\"https://tests.yt-project.org/job/yt_docs/982/artifact/sandbox/doc/build/html/index.html\" rel=\"nofollow\">https://tests.yt-project.org/job/yt_docs/982/artifact/sandbox/doc/build/html/index.html</a></p>",
                "markup": "markdown"
            },
            "created_on": "2016-07-12T01:45:19.673550+00:00",
            "updated_on": "2016-07-12T01:45:19.737464+00:00",
            "id": 20869058
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/mzingale"
                    },
                    "html": {
                        "href": "https://bitbucket.org/mzingale/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/mzingale/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Michael  Zingale",
                "uuid": "{d1d09b0d-3bd7-4129-ac64-6aa3abfa3223}",
                "username": "mzingale"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270/comments/20955278"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270/_/diff#comment-20955278"
                }
            },
            "pullrequest": {
                "title": "Install script improvements. Closes #1233",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2270"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2270"
                    }
                },
                "id": 2270
            },
            "content": {
                "raw": "This gives the appropriate warning now at NERSC.",
                "html": "<p>This gives the appropriate warning now at NERSC.</p>",
                "markup": "markdown"
            },
            "created_on": "2016-07-13T13:04:49.281858+00:00",
            "updated_on": "2016-07-13T13:04:49.287770+00:00",
            "id": 20955278
        }
    ]
}