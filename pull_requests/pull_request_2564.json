{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2017-03-30T13:38:00.956865+00:00",
    "comment_count": 4,
    "description": "Before I add a test for this, I'd appreciate it if @jisuoqing and @atmyers could verify that this actually the correct change to make.",
    "created_on": "2017-03-28T13:59:39.986727+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/3fee41c2ea35"
            }
        },
        "hash": "3fee41c2ea35"
    },
    "title": "Allow negative data in ParticleProfile. Closes #1340",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2564"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/xarthisius"
            },
            "html": {
                "href": "https://bitbucket.org/xarthisius/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/xarthisius/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Kacper Kowalik",
        "uuid": "{26af8f1d-35b3-46ce-9939-09915b06e31f}",
        "username": "xarthisius"
    },
    "id": 2564,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt/commit/a980a44e66ae"
                }
            },
            "hash": "a980a44e66ae"
        },
        "repository": {
            "full_name": "ngoldbaum/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/ngoldbaum/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/ngoldbaum/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/ngoldbaum/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{cb18d7d9-ab77-4e80-81ed-8d32a945e0ef}"
        }
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/dc14ea0fd19f"
                }
            },
            "hash": "dc14ea0fd19f"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/atmyers"
                    },
                    "html": {
                        "href": "https://bitbucket.org/atmyers/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/atmyers/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Andrew Myers",
                "uuid": "{651c5647-b78f-4cd9-8d9a-5d6e8c9ac8d3}",
                "username": "atmyers"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564/comments/34012676"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2564/_/diff#comment-34012676"
                }
            },
            "pullrequest": {
                "title": "Allow negative data in ParticleProfile. Closes #1340",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2564"
                    }
                },
                "id": 2564
            },
            "content": {
                "raw": "I think this is the right thing to do, yes.",
                "html": "<p>I think this is the right thing to do, yes.</p>",
                "markup": "markdown"
            },
            "created_on": "2017-03-28T16:19:20.218253+00:00",
            "updated_on": "2017-03-28T16:19:20.223718+00:00",
            "id": 34012676
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/jisuoqing"
                    },
                    "html": {
                        "href": "https://bitbucket.org/jisuoqing/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/jisuoqing/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Suoqing Ji",
                "uuid": "{7ef4ff60-41f7-4600-87bc-df06261680b4}",
                "username": "jisuoqing"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564/comments/34017556"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2564/_/diff#comment-34017556"
                }
            },
            "pullrequest": {
                "title": "Allow negative data in ParticleProfile. Closes #1340",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2564"
                    }
                },
                "id": 2564
            },
            "content": {
                "raw": "This exactly solves the issue. Thank you!",
                "html": "<p>This exactly solves the issue. Thank you!</p>",
                "markup": "markdown"
            },
            "created_on": "2017-03-28T17:22:07.998145+00:00",
            "updated_on": "2017-03-28T17:22:08.000790+00:00",
            "id": 34017556
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/jisuoqing"
                    },
                    "html": {
                        "href": "https://bitbucket.org/jisuoqing/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/jisuoqing/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Suoqing Ji",
                "uuid": "{7ef4ff60-41f7-4600-87bc-df06261680b4}",
                "username": "jisuoqing"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564/comments/34030306"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2564/_/diff#comment-34030306"
                }
            },
            "pullrequest": {
                "title": "Allow negative data in ParticleProfile. Closes #1340",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2564"
                    }
                },
                "id": 2564
            },
            "content": {
                "raw": "And another (probably separate) issue after this fix:\n\n\n```\n#!python\n\nimport yt\nimport numpy as np\n\nn_particles = int(1e4)\n\nppx, ppy, ppz = np.random.normal(size=[3, n_particles])\npvx, pvy, pvz = - np.ones((3, n_particles))\n\ndata = {'particle_position_x': ppx,\n        'particle_position_y': ppy,\n        'particle_position_z': ppz,\n        'particle_velocity_x': pvx,\n        'particle_velocity_y': pvy,\n        'particle_velocity_z': pvz}\n\nbbox = 1.1*np.array([[min(ppx), max(ppx)], [min(ppy), max(ppy)], [min(ppz), max(ppz)]])\nds = yt.load_particles(data, bbox=bbox)\nad = ds.all_data()\nplot = yt.ParticlePhasePlot(ad,\n                            \"particle_position_x\",\n                            \"particle_position_y\",\n                            [\"particle_velocity_x\"])\nplot.set_xlim(ds.domain_left_edge[0], ds.domain_right_edge[0])\nplot.save()\n```\nThis will give\n```\nFile \"/Users/jisuoqing/Workspace/code/yt-x86_64/lib/python2.7/site-packages/matplotlib/ticker.py\", line 1556, in tick_values\n    \"Data has no positive values, and therefore can not be \"\nValueError: Data has no positive values, and therefore can not be log-scaled.\n```\nHowever, if ``plot.set_xlim`` is commented out, the scale can be automatically switched to linear.",
                "html": "<p>And another (probably separate) issue after this fix:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">yt</span>\n<span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"kn\">as</span> <span class=\"nn\">np</span>\n\n<span class=\"n\">n_particles</span> <span class=\"o\">=</span> <span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"mf\">1e4</span><span class=\"p\">)</span>\n\n<span class=\"n\">ppx</span><span class=\"p\">,</span> <span class=\"n\">ppy</span><span class=\"p\">,</span> <span class=\"n\">ppz</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">random</span><span class=\"o\">.</span><span class=\"n\">normal</span><span class=\"p\">(</span><span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">n_particles</span><span class=\"p\">])</span>\n<span class=\"n\">pvx</span><span class=\"p\">,</span> <span class=\"n\">pvy</span><span class=\"p\">,</span> <span class=\"n\">pvz</span> <span class=\"o\">=</span> <span class=\"o\">-</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">ones</span><span class=\"p\">((</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"n\">n_particles</span><span class=\"p\">))</span>\n\n<span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s1\">&#39;particle_position_x&#39;</span><span class=\"p\">:</span> <span class=\"n\">ppx</span><span class=\"p\">,</span>\n        <span class=\"s1\">&#39;particle_position_y&#39;</span><span class=\"p\">:</span> <span class=\"n\">ppy</span><span class=\"p\">,</span>\n        <span class=\"s1\">&#39;particle_position_z&#39;</span><span class=\"p\">:</span> <span class=\"n\">ppz</span><span class=\"p\">,</span>\n        <span class=\"s1\">&#39;particle_velocity_x&#39;</span><span class=\"p\">:</span> <span class=\"n\">pvx</span><span class=\"p\">,</span>\n        <span class=\"s1\">&#39;particle_velocity_y&#39;</span><span class=\"p\">:</span> <span class=\"n\">pvy</span><span class=\"p\">,</span>\n        <span class=\"s1\">&#39;particle_velocity_z&#39;</span><span class=\"p\">:</span> <span class=\"n\">pvz</span><span class=\"p\">}</span>\n\n<span class=\"n\">bbox</span> <span class=\"o\">=</span> <span class=\"mf\">1.1</span><span class=\"o\">*</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([[</span><span class=\"nb\">min</span><span class=\"p\">(</span><span class=\"n\">ppx</span><span class=\"p\">),</span> <span class=\"nb\">max</span><span class=\"p\">(</span><span class=\"n\">ppx</span><span class=\"p\">)],</span> <span class=\"p\">[</span><span class=\"nb\">min</span><span class=\"p\">(</span><span class=\"n\">ppy</span><span class=\"p\">),</span> <span class=\"nb\">max</span><span class=\"p\">(</span><span class=\"n\">ppy</span><span class=\"p\">)],</span> <span class=\"p\">[</span><span class=\"nb\">min</span><span class=\"p\">(</span><span class=\"n\">ppz</span><span class=\"p\">),</span> <span class=\"nb\">max</span><span class=\"p\">(</span><span class=\"n\">ppz</span><span class=\"p\">)]])</span>\n<span class=\"n\">ds</span> <span class=\"o\">=</span> <span class=\"n\">yt</span><span class=\"o\">.</span><span class=\"n\">load_particles</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">bbox</span><span class=\"o\">=</span><span class=\"n\">bbox</span><span class=\"p\">)</span>\n<span class=\"n\">ad</span> <span class=\"o\">=</span> <span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">all_data</span><span class=\"p\">()</span>\n<span class=\"n\">plot</span> <span class=\"o\">=</span> <span class=\"n\">yt</span><span class=\"o\">.</span><span class=\"n\">ParticlePhasePlot</span><span class=\"p\">(</span><span class=\"n\">ad</span><span class=\"p\">,</span>\n                            <span class=\"s2\">&quot;particle_position_x&quot;</span><span class=\"p\">,</span>\n                            <span class=\"s2\">&quot;particle_position_y&quot;</span><span class=\"p\">,</span>\n                            <span class=\"p\">[</span><span class=\"s2\">&quot;particle_velocity_x&quot;</span><span class=\"p\">])</span>\n<span class=\"n\">plot</span><span class=\"o\">.</span><span class=\"n\">set_xlim</span><span class=\"p\">(</span><span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">domain_left_edge</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">],</span> <span class=\"n\">ds</span><span class=\"o\">.</span><span class=\"n\">domain_right_edge</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])</span>\n<span class=\"n\">plot</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n</pre></div>\n\n\n<p>This will give</p>\n<div class=\"codehilite\"><pre><span></span>File &quot;/Users/jisuoqing/Workspace/code/yt-x86_64/lib/python2.7/site-packages/matplotlib/ticker.py&quot;, line 1556, in tick_values\n    &quot;Data has no positive values, and therefore can not be &quot;\nValueError: Data has no positive values, and therefore can not be log-scaled.\n</pre></div>\n\n\n<p>However, if <code>plot.set_xlim</code> is commented out, the scale can be automatically switched to linear.</p>",
                "markup": "markdown"
            },
            "created_on": "2017-03-28T20:33:03.206801+00:00",
            "updated_on": "2017-03-28T20:33:03.210834+00:00",
            "id": 34030306
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564/comments/34095260"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2564/_/diff#comment-34095260"
                }
            },
            "pullrequest": {
                "title": "Allow negative data in ParticleProfile. Closes #1340",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/2564"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/2564"
                    }
                },
                "id": 2564
            },
            "content": {
                "raw": "OK, should be ready to review now.",
                "html": "<p>OK, should be ready to review now.</p>",
                "markup": "markdown"
            },
            "created_on": "2017-03-29T15:18:06.732489+00:00",
            "updated_on": "2017-03-29T15:18:06.740780+00:00",
            "id": 34095260
        }
    ]
}