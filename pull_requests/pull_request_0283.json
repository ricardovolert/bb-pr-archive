{
    "reason": "",
    "state": "MERGED",
    "updated_on": "2012-09-28T01:11:18.112696+00:00",
    "comment_count": 7,
    "description": "A few more fixes to get callbacks working with off-axis slices. This should allow the drawing of magnetic field arrows and streamlines.",
    "created_on": "2012-09-27T23:11:28.067852+00:00",
    "task_count": 0,
    "merge_commit": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/80b349aff943"
            }
        },
        "hash": "80b349aff943"
    },
    "title": "Porting over more callbacks",
    "links": {
        "diff": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/diff"
        },
        "decline": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/decline"
        },
        "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283"
        },
        "activity": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/activity"
        },
        "merge": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/merge"
        },
        "commits": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/commits"
        },
        "statuses": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/statuses"
        },
        "approve": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/approve"
        },
        "html": {
            "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283"
        },
        "comments": {
            "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments"
        }
    },
    "closed_by": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
            },
            "html": {
                "href": "https://bitbucket.org/ngoldbaum/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Nathan Goldbaum",
        "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
        "username": "ngoldbaum"
    },
    "id": 283,
    "type": "pullrequest",
    "author": {
        "links": {
            "self": {
                "href": "https://api.bitbucket.org/2.0/users/atmyers"
            },
            "html": {
                "href": "https://bitbucket.org/atmyers/"
            },
            "avatar": {
                "href": "https://bitbucket.org/account/atmyers/avatar/32/"
            }
        },
        "type": "user",
        "display_name": "Andrew Myers",
        "uuid": "{651c5647-b78f-4cd9-8d9a-5d6e8c9ac8d3}",
        "username": "atmyers"
    },
    "source": {
        "branch": {
            "name": "yt"
        },
        "commit": null,
        "repository": null
    },
    "close_source_branch": false,
    "destination": {
        "branch": {
            "name": "yt"
        },
        "commit": {
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/commit/2359ab1ceea9"
                }
            },
            "hash": "2359ab1ceea9"
        },
        "repository": {
            "full_name": "yt_analysis/yt",
            "type": "repository",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt"
                },
                "avatar": {
                    "href": "https://bitbucket.org/yt_analysis/yt/avatar/32/"
                }
            },
            "name": "yt",
            "uuid": "{b73cb37c-40f2-493a-aaa9-41bc8d8974cc}"
        }
    },
    "comments": [
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments/19945"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283/_/diff#comment-19945"
                }
            },
            "pullrequest": {
                "title": "Porting over more callbacks",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283"
                    }
                },
                "id": 283
            },
            "content": {
                "raw": "This looks fine to me.  @MatthewTurk, are you ok with the new fields Andrew is defining?  I could see one doing the coordinate transformation inside the callback its self rather than in the field, although I think Andrew's solution is a bit cleaner.",
                "html": "<p>This looks fine to me.  <a href=\"/MatthewTurk/\" rel=\"nofollow\" title=\"@MatthewTurk\" class=\"mention\">Matthew Turk</a>, are you ok with the new fields Andrew is defining?  I could see one doing the coordinate transformation inside the callback its self rather than in the field, although I think Andrew's solution is a bit cleaner.</p>\n",
                "markup": "creole"
            },
            "created_on": "2012-09-27T23:57:51.925567+00:00",
            "updated_on": "2012-09-27T23:57:51.931508+00:00",
            "id": 19945
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/atmyers"
                    },
                    "html": {
                        "href": "https://bitbucket.org/atmyers/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/atmyers/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Andrew Myers",
                "uuid": "{651c5647-b78f-4cd9-8d9a-5d6e8c9ac8d3}",
                "username": "atmyers"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments/19947"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283/_/diff#comment-19947"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments/19945"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283/_/diff#comment-19945"
                    }
                },
                "id": 19945
            },
            "pullrequest": {
                "title": "Porting over more callbacks",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283"
                    }
                },
                "id": 283
            },
            "content": {
                "raw": "Hi Nathan,\n\nFWIW, I'm not the least bit attached to that way of organizing things. I was just trying to mimic the way that the velocity callback for oblique cutting planes was handled. ",
                "html": "<p>Hi Nathan,</p>\n<p>FWIW, I'm not the least bit attached to that way of organizing things. I was just trying to mimic the way that the velocity callback for oblique cutting planes was handled. </p>\n",
                "markup": "creole"
            },
            "created_on": "2012-09-28T00:12:59.242595+00:00",
            "updated_on": "2012-09-28T00:12:59.360427+00:00",
            "id": 19947
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments/19949"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283/_/diff#comment-19949"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments/19947"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283/_/diff#comment-19947"
                    }
                },
                "id": 19947
            },
            "pullrequest": {
                "title": "Porting over more callbacks",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283"
                    }
                },
                "id": 283
            },
            "content": {
                "raw": "Oh, good point.  I didn't see that.  I think this is fine as-is then.\n\nWhile you're at it, can you also add aliases for the magnetic field variables in the FLASH frontend?  FLASH uses magx, magy, and magz internally and right now nothing is done to translate to Bx, By, and Bz (which yt picks up from enzo, I think).  All you need to do is add appropriate entries in the translation_dict in yt/frontends/flash/fields.py\n\nMaybe we should think about a general way of handling magnetic quantities?  Right now things are pretty haphazard and not well-standardized from code to code.  For example, gdf has mag_field_[x,y,z] and cell_centered_B_[x,y,z] fields.  The other frontends that have magnetic quantities defined use internal names for the magnetic field, although your change will push us to using the enzo internal names.  One could also imagine having standard derived fields that depend on the magnetic field (e.g. magnetic energy, plasma beta, B magnitude) in universal_fields.py instead of in the code frontends, although I see that magnetic energy is already in there.\n\nAnyway, that's not so important for this particular PR.  Thanks for fixing this up, I'm glad that we're catching all of these issues with plot window :)",
                "html": "<p>Oh, good point.  I didn't see that.  I think this is fine as-is then.</p>\n<p>While you're at it, can you also add aliases for the magnetic field variables in the FLASH frontend?  FLASH uses magx, magy, and magz internally and right now nothing is done to translate to Bx, By, and Bz (which yt picks up from enzo, I think).  All you need to do is add appropriate entries in the translation_dict in yt/frontends/flash/fields.py</p>\n<p>Maybe we should think about a general way of handling magnetic quantities?  Right now things are pretty haphazard and not well-standardized from code to code.  For example, gdf has mag_field_[x,y,z] and cell_centered_B_[x,y,z] fields.  The other frontends that have magnetic quantities defined use internal names for the magnetic field, although your change will push us to using the enzo internal names.  One could also imagine having standard derived fields that depend on the magnetic field (e.g. magnetic energy, plasma beta, B magnitude) in universal_fields.py instead of in the code frontends, although I see that magnetic energy is already in there.</p>\n<p>Anyway, that's not so important for this particular PR.  Thanks for fixing this up, I'm glad that we're catching all of these issues with plot window :)</p>\n",
                "markup": "creole"
            },
            "created_on": "2012-09-28T00:28:33.838267+00:00",
            "updated_on": "2012-09-28T00:28:33.849375+00:00",
            "id": 19949
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/scopatz"
                    },
                    "html": {
                        "href": "https://bitbucket.org/scopatz/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/scopatz/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Anthony Scopatz",
                "uuid": "{4a5f5093-32ea-4c47-bb62-819578ca18f5}",
                "username": "scopatz"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments/19950"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283/_/diff#comment-19950"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments/19949"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283/_/diff#comment-19949"
                    }
                },
                "id": 19949
            },
            "pullrequest": {
                "title": "Porting over more callbacks",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283"
                    }
                },
                "id": 283
            },
            "content": {
                "raw": "Actually @ngoldbaum, I have added all of the new fields for FLASH4 (including mag*) in yt-3.0.  You should probably just backport this file.  ",
                "html": "<p>Actually <a href=\"/ngoldbaum/\" rel=\"nofollow\" title=\"@ngoldbaum\" class=\"mention\">Nathan Goldbaum</a>, I have added all of the new fields for FLASH4 (including mag*) in yt-3.0.  You should probably just backport this file.  </p>\n",
                "markup": "creole"
            },
            "created_on": "2012-09-28T00:33:30.792341+00:00",
            "updated_on": "2012-09-28T00:33:30.799259+00:00",
            "id": 19950
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/jzuhone"
                    },
                    "html": {
                        "href": "https://bitbucket.org/jzuhone/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/jzuhone/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "John ZuHone",
                "uuid": "{0c51edfa-e317-432f-bbef-7401c6e2aa8a}",
                "username": "jzuhone"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments/19954"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283/_/diff#comment-19954"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments/19950"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283/_/diff#comment-19950"
                    }
                },
                "id": 19950
            },
            "pullrequest": {
                "title": "Porting over more callbacks",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283"
                    }
                },
                "id": 283
            },
            "content": {
                "raw": "We probably need to be a tad more careful with the magnetic fields in FLASH. \n\nStrictly speaking, mag[xyz] and magp are not necessarily in Gauss. Dongwook introduced three different unit possibilities for the MHD equations, specifically regarding how the magnetic permeability constant mu_0 is handled. One assumes SI units with mu_0 = 4*pi x 10^-7, another assumes Gaussian (cgs) units with mu_0 = 4*pi, and yet another assumes no units but with mu_0 = 1.\n\nThe latter case is the one most employed by FLASH users, it seems. I think what needs to happen is that standardized magnetic fields in yt need to be converted from the FLASH fields to Gaussian cgs units based on the value of the runtime parameter {{{UnitSystem}}}. What do you think?",
                "html": "<p>We probably need to be a tad more careful with the magnetic fields in FLASH. </p>\n<p>Strictly speaking, mag[xyz] and magp are not necessarily in Gauss. Dongwook introduced three different unit possibilities for the MHD equations, specifically regarding how the magnetic permeability constant mu_0 is handled. One assumes SI units with mu_0 = 4*pi x 10^-7, another assumes Gaussian (cgs) units with mu_0 = 4*pi, and yet another assumes no units but with mu_0 = 1.</p>\n<p>The latter case is the one most employed by FLASH users, it seems. I think what needs to happen is that standardized magnetic fields in yt need to be converted from the FLASH fields to Gaussian cgs units based on the value of the runtime parameter <code>UnitSystem</code>. What do you think?</p>\n",
                "markup": "creole"
            },
            "created_on": "2012-09-28T00:54:48.801478+00:00",
            "updated_on": "2012-09-28T00:54:48.806788+00:00",
            "id": 19954
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/scopatz"
                    },
                    "html": {
                        "href": "https://bitbucket.org/scopatz/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/scopatz/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Anthony Scopatz",
                "uuid": "{4a5f5093-32ea-4c47-bb62-819578ca18f5}",
                "username": "scopatz"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments/19958"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283/_/diff#comment-19958"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments/19954"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283/_/diff#comment-19954"
                    }
                },
                "id": 19954
            },
            "pullrequest": {
                "title": "Porting over more callbacks",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283"
                    }
                },
                "id": 283
            },
            "content": {
                "raw": "Or I could just ask Dongwook to make all of the units adhere to FLASH default standard.  I'll bring this up in group meeting tomorrow.  Of course, we could do what you suggest to by having derived fields that preform this check and do the appropriate transformation.",
                "html": "<p>Or I could just ask Dongwook to make all of the units adhere to FLASH default standard.  I'll bring this up in group meeting tomorrow.  Of course, we could do what you suggest to by having derived fields that preform this check and do the appropriate transformation.</p>\n",
                "markup": "creole"
            },
            "created_on": "2012-09-28T00:59:24.545588+00:00",
            "updated_on": "2012-09-28T00:59:24.554556+00:00",
            "id": 19958
        },
        {
            "user": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/users/ngoldbaum"
                    },
                    "html": {
                        "href": "https://bitbucket.org/ngoldbaum/"
                    },
                    "avatar": {
                        "href": "https://bitbucket.org/account/ngoldbaum/avatar/32/"
                    }
                },
                "type": "user",
                "display_name": "Nathan Goldbaum",
                "uuid": "{5dcd72da-6420-4a6d-9571-e75dffcac587}",
                "username": "ngoldbaum"
            },
            "type": "pullrequest_comment",
            "links": {
                "self": {
                    "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments/19963"
                },
                "html": {
                    "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283/_/diff#comment-19963"
                }
            },
            "parent": {
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283/comments/19958"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283/_/diff#comment-19958"
                    }
                },
                "id": 19958
            },
            "pullrequest": {
                "title": "Porting over more callbacks",
                "type": "pullrequest",
                "links": {
                    "self": {
                        "href": "https://api.bitbucket.org/2.0/repositories/yt_analysis/yt/pullrequests/283"
                    },
                    "html": {
                        "href": "https://bitbucket.org/yt_analysis/yt/pull-requests/283"
                    }
                },
                "id": 283
            },
            "content": {
                "raw": "Well, it looks like I've been using the wrong value for the magnetic field in my simulations and analysis routines.  Thanks for bringing this issue to my attention John.\n\nThere's some discussion about this from Dongwook on the flash users mailing list: http://flash.uchicago.edu/pipermail/flash-users/2011-August/000964.html\n\nYes, we should do what John suggests in the FLASH frontend.  I'm going to file a bug to take care of this separately from the PR.  I'll also be e-mailing the flash mailing list to clarify this point.\n\nAnyway, thanks again for the contribution Andrew.  I'm accepting the PR.",
                "html": "<p>Well, it looks like I've been using the wrong value for the magnetic field in my simulations and analysis routines.  Thanks for bringing this issue to my attention John.</p>\n<p>There's some discussion about this from Dongwook on the flash users mailing list: <a href=\"http://flash.uchicago.edu/pipermail/flash-users/2011-August/000964.html\">http://flash.uchicago.edu/pipermail/flash-users/2011-August/000964.html</a></p>\n<p>Yes, we should do what John suggests in the FLASH frontend.  I'm going to file a bug to take care of this separately from the PR.  I'll also be e-mailing the flash mailing list to clarify this point.</p>\n<p>Anyway, thanks again for the contribution Andrew.  I'm accepting the PR.</p>\n",
                "markup": "creole"
            },
            "created_on": "2012-09-28T01:11:11.104128+00:00",
            "updated_on": "2012-09-28T01:11:11.109175+00:00",
            "id": 19963
        }
    ]
}